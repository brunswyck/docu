

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>VLANS &mdash; docu patrick a documentation</title>
  

  
  
  
  

  

  
  
    

  

  
    <link rel="stylesheet" href="../../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="next" title="ACLs" href="acl.html" />
    <link rel="prev" title="Switch Configuration" href="switchConfiguration.html" />
    <link href="../../../_static/mylayout.css" rel="stylesheet" type="text/css">

  
  <script src="../../../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../../../index.html" class="icon icon-home"> docu patrick
          

          
          </a>

          
            
            
              <div class="version">
                0.0.1
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../cumulocity.html">cumulocity</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../server.html">debian server</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../workstation.html">workstation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../vim.html">VIM</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../git.html">GIT</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../inhoud.html">Routing/Switching</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="inhoud.html">basics</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="connect2console.html">Connect to console</a></li>
<li class="toctree-l3"><a class="reference internal" href="routingConcepts.html">Routing Concepts</a></li>
<li class="toctree-l3"><a class="reference internal" href="staticRouting.html">Static Routes</a></li>
<li class="toctree-l3"><a class="reference internal" href="dynamicRouting.html">Dynamic Routing</a></li>
<li class="toctree-l3"><a class="reference internal" href="switchedNetworks.html">switched networks</a></li>
<li class="toctree-l3"><a class="reference internal" href="switchConfiguration.html">Switch Configuration</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">VLANS</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#vlan-benefits">VLAN Benefits</a></li>
<li class="toctree-l4"><a class="reference internal" href="#vlan-types">VLAN Types</a></li>
<li class="toctree-l4"><a class="reference internal" href="#voice-vlans">Voice VLANs</a></li>
<li class="toctree-l4"><a class="reference internal" href="#vlan-trunks">VLAN Trunks</a></li>
<li class="toctree-l4"><a class="reference internal" href="#q-frame">802.1Q Frame</a></li>
<li class="toctree-l4"><a class="reference internal" href="#native-vlans-802-1q-tagging">Native VLANS &amp; 802.1Q Tagging</a></li>
<li class="toctree-l4"><a class="reference internal" href="#voice-vlan-tagging">Voice VLAN Tagging</a></li>
<li class="toctree-l4"><a class="reference internal" href="#q-tagging">802.1Q tagging</a></li>
<li class="toctree-l4"><a class="reference internal" href="#vlan-ranges">VLAN Ranges</a></li>
<li class="toctree-l4"><a class="reference internal" href="#configuring-vlans">Configuring VLANS</a></li>
<li class="toctree-l4"><a class="reference internal" href="#deleting-vlans">deleting VLANs</a></li>
<li class="toctree-l4"><a class="reference internal" href="#verifying-vlan-info">verifying VLAN info</a></li>
<li class="toctree-l4"><a class="reference internal" href="#trunk-configuration">TRUNK Configuration</a></li>
<li class="toctree-l4"><a class="reference internal" href="#combination-exercise">combination exercise</a></li>
<li class="toctree-l4"><a class="reference internal" href="#troubleshooting-vlans">Troubleshooting VLANS</a></li>
<li class="toctree-l4"><a class="reference internal" href="#troubleshooting-trunks">Troubleshooting Trunks</a></li>
<li class="toctree-l4"><a class="reference internal" href="#troubleshooting-vlan-trunk-bullet-points">Troubleshooting vlan/trunk bullet points</a></li>
<li class="toctree-l4"><a class="reference internal" href="#vlan-command-summary-table">VLAN Command Summary Table</a></li>
<li class="toctree-l4"><a class="reference internal" href="#inter-vlan-routing">Inter-VLAN Routing</a></li>
<li class="toctree-l4"><a class="reference internal" href="#inter-vlan-routing-challenge">Inter-VLAN Routing Challenge</a></li>
<li class="toctree-l4"><a class="reference internal" href="#skills-integration-challenge">Skills integration challenge</a></li>
<li class="toctree-l4"><a class="reference internal" href="#qna-chapter-6">QnA Chapter 6</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="acl.html">ACLs</a></li>
<li class="toctree-l3"><a class="reference internal" href="dhcp.html">DHCP</a></li>
<li class="toctree-l3"><a class="reference internal" href="nat.html">NAT</a></li>
<li class="toctree-l3"><a class="reference internal" href="lldpAndLicensing.html">Device Discovery Management &amp; Maintenance</a></li>
<li class="toctree-l3"><a class="reference internal" href="finals.html">routing n switching basics finals</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../sn/inhoud.html">scaling networks</a></li>
<li class="toctree-l2"><a class="reference internal" href="../sdn/inhoud.html">Open Daylight</a></li>
</ul>
</li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../index.html">docu patrick</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../../index.html">Docs</a> &raquo;</li>
        
          <li><a href="../inhoud.html">Routing/Switching</a> &raquo;</li>
        
          <li><a href="inhoud.html">basics</a> &raquo;</li>
        
      <li>VLANS</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../../../_sources/nw/rns/basics/vlans.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="vlans">
<h1>VLANS<a class="headerlink" href="#vlans" title="Permalink to this headline">¶</a></h1>
<p>One of the technologies used to improve network performance is the separation of large broadcast domains into smaller ones.</p>
<p>The role of providing access into a LAN is normally reserved for an access layer switch. A virtual local area network (VLAN) can be created on a Layer 2 switch to reduce the size of broadcast domains, similar to a Layer 3 device. VLANs are commonly incorporated into network design making it easier for a network to support the goals of an organization. While VLANs are primarily used within switched local area networks, modern implementations of VLANs allow them to span MANs and WANs.</p>
<p>Because VLANs segment the network, a Layer 3 process is required to allow traffic to move from one network segment to another.</p>
<p>This Layer 3 routing process can either be implemented using a router or a Layer 3 switch interface. The use of a Layer 3 device provides a method for controlling the flow of traffic between network segments, including network segments created by VLANs.</p>
<p>The first part of this chapter will cover how to configure, manage, and troubleshoot VLANs and VLAN trunks. The second part of this chapter focuses on implementing inter-VLAN routing using a router. Inter-VLAN routing on a Layer 3 switch is covered in a later course.</p>
<p>Packets destined for devices that do not belong to the VLAN must be forwarded through a device that supports routing.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">A VLAN creates a logical broadcast domain that can span multiple physical LAN segments. VLANs improve network performance by separating large broadcast domains into smaller ones. If a device in one VLAN sends a broadcast Ethernet frame, all devices in the VLAN receive the frame, but devices in other VLANs do not.</p>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">VLANs enable the implementation of access and security policies according to specific groupings of users. Each switch port can be assigned to only one VLAN (with the exception of a port connected to an IP phone or to another switch).</p>
</div>
<div class="section" id="vlan-benefits">
<h2>VLAN Benefits<a class="headerlink" href="#vlan-benefits" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><dl class="first docutils">
<dt>Improved Security:</dt>
<dd>Groups that have sensitive data are separated from the rest of the network</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Reduced Cost:</dt>
<dd>Reduced need for expensive network upgrades and more efficient use of existing bandwidth and uplinks</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Better Performance:</dt>
<dd>Dividing L2 networks into multiple logical workgroups (broadcast domains) reduces unnecessary traffic</dd>
</dl>
</li>
<li>Smaller Broadcast Domains</li>
<li><dl class="first docutils">
<dt>IT Efficiency:</dt>
<dd>VLANs make it easier to manage the network because users with similar network requirements share the same VLAN. When a new switch is provisioned, all the policies and procedures already configured for the particular VLAN are implemented when the ports are assigned. It is also easy for the IT staff to identify the function of a VLAN by giving it an appropriate name</dd>
</dl>
</li>
<li>Management Efficiency</li>
<li>Simpler Project and Application Management: VLANs aggregate users and network devices to support business or geographic requirements. Having separate functions makes managing a project or working with a specialized application easier; an example of such an application is an e-learning development platform for faculty.</li>
</ul>
<p>Each VLAN in a switched network corresponds to an IP network. Therefore, VLAN design must take into consideration the implementation of a hierarchical network-addressing scheme. Hierarchical network addressing means that IP network numbers are applied to network segments or VLANs in an orderly fashion that takes the network as a whole into consideration.</p>
</div>
<div class="section" id="vlan-types">
<h2>VLAN Types<a class="headerlink" href="#vlan-types" title="Permalink to this headline">¶</a></h2>
<dl class="docutils">
<dt>Data VLAN:</dt>
<dd>for user generated traffic aka user VLAN. Used to seperate the network into groups of users or devices</dd>
<dt>Default VLAN:</dt>
<dd>All switch ports become part of it after initial boot. VLAN 1. View with <code class="docutils literal notranslate"><span class="pre">show</span> <span class="pre">vlan</span> <span class="pre">brief</span></code>. VLAN 2 cannot be renamed or deleted</dd>
<dt>Native VLAN:</dt>
<dd>Assigned to an 802.1Q trunk port (links between switches) that supports VLAN tagged traffic &amp; untagged traffic. Tagged means there is a <strong>4-byte</strong> tag inserted in original Ethernet frame header. The 802.1Q trunk port places untagged traffic on the native VLAN, that is <strong>VLAN 1 by default</strong>. It is a best practice to configure the native VLAN as an unused VLAN, distinct from VLAN 1 and other VLANs</dd>
<dt>Management VLAN:</dt>
<dd>VLAN configured to access the management capabilities of a switch. VLAN 1 is the management VLAN by default. To create the management VLAN, the switch virtual interface (SVI) of that VLAN is assigned an IP address and a subnet mask, allowing the switch to be managed via HTTP, Telnet, SSH, or SNMP.</dd>
</dl>
</div>
<div class="section" id="voice-vlans">
<h2>Voice VLANs<a class="headerlink" href="#voice-vlans" title="Permalink to this headline">¶</a></h2>
<p>VoIP traffic requires:</p>
<ul class="simple">
<li>Assured bandwidth to ensure voice quality</li>
<li>Transmission priority over other types of network traffic</li>
<li>Ability to be routed around congested areas on the network</li>
<li>Delay of less than 150 ms across the network</li>
</ul>
<p>To meet these requirements, the entire network has to be designed to support VoIP.</p>
<img alt="../../../_images/voice_vlans.png" src="../../../_images/voice_vlans.png" />
</div>
<div class="section" id="vlan-trunks">
<h2>VLAN Trunks<a class="headerlink" href="#vlan-trunks" title="Permalink to this headline">¶</a></h2>
<p>A trunk is a point-to-point link between 2 network devices dat carries more than one VLAN. It extends VLANS across an entire network. This way no router is needed.</p>
<p>A trunk does not belong to a specific VLAN, it is a conduit for multiple VLANS between switches and routers. A trunk can also be used between a NW device and server or other device that is equiped with an 802.1Q capable NIC</p>
<img alt="../../../_images/vlan_trunks.png" src="../../../_images/vlan_trunks.png" />
</div>
<div class="section" id="q-frame">
<h2>802.1Q Frame<a class="headerlink" href="#q-frame" title="Permalink to this headline">¶</a></h2>
<img alt="../../../_images/802.1Q_frame.png" src="../../../_images/802.1Q_frame.png" />
<p>When the switch receives a frame on a port configured in access mode and assigned a VLAN, the switch inserts a VLAN tag in the frame header, recalculates the Frame Check Sequence (FCS), and sends the tagged frame out of a trunk port.</p>
<div class="section" id="vlan-tag-field-details">
<h3>VLAN Tag Field Details<a class="headerlink" href="#vlan-tag-field-details" title="Permalink to this headline">¶</a></h3>
<dl class="docutils">
<dt>The VLAN tag field consists of a Type field, a Priority field, a Canonical Format Identifier field, and VLAN ID field:</dt>
<dd><ul class="first last simple">
<li><strong>Type</strong> - A 2-byte value called the tag protocol ID (TPID) value. For Ethernet, it is set to hexadecimal 0x8100.</li>
<li><strong>User priority</strong> - A 3-bit value that supports level or <strong>service implementation</strong>.</li>
<li><strong>Canonical Format Identifier</strong> (CFI) - A 1-bit identifier that <strong>enables Token Ring frames to be carried across Ethernet links</strong>.</li>
<li><strong>VLAN ID</strong> (VID) - A 12-bit VLAN identification number that supports up to 4096 VLAN IDs.</li>
</ul>
</dd>
</dl>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">After the switch inserts the Type and tag control information fields, it recalculates the FCS values and inserts the new FCS into the frame.</p>
</div>
</div>
</div>
<div class="section" id="native-vlans-802-1q-tagging">
<h2>Native VLANS &amp; 802.1Q Tagging<a class="headerlink" href="#native-vlans-802-1q-tagging" title="Permalink to this headline">¶</a></h2>
<div class="section" id="tagged-frames-on-the-native-vlan">
<h3>Tagged Frames on the Native VLAN<a class="headerlink" href="#tagged-frames-on-the-native-vlan" title="Permalink to this headline">¶</a></h3>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">If an 802.1Q trunk port receives a tagged frame with the VLAN ID that is the same as the native VLAN, it drops the frame.</p>
</div>
<p>Consequently, when configuring a switch port on a Cisco switch, configure devices so that they do not send tagged frames on the native VLAN. Devices from other vendors that support tagged frames on the native VLAN include IP phones, servers, routers, and non-Cisco switches.</p>
<p>This scenario reflects poor network design for several reasons: it uses a hub, it has a host connected to a trunk link, and it implies that the switches have access ports assigned to the native VLAN. It also illustrates the motivation for the IEEE 802.1Q specification for native VLANs as a means of handling legacy scenarios.</p>
<img alt="../../../_images/trunkbehavior_nativevlans.png" src="../../../_images/trunkbehavior_nativevlans.png" />
</div>
<div class="section" id="untagged-frames-on-the-native-vlan">
<h3>Untagged Frames on the Native VLAN<a class="headerlink" href="#untagged-frames-on-the-native-vlan" title="Permalink to this headline">¶</a></h3>
<p>When a Cisco switch trunk port receives untagged frames (which are unusual in a well-designed network), it forwards those frames to the native VLAN. If there are no devices associated with the native VLAN (which is not unusual) and there are no other trunk ports (which is not unusual), then the frame is dropped. The default native VLAN is VLAN 1.
When configuring an 802.1Q trunk port, a default Port VLAN ID (PVID) is assigned the value of the native VLAN ID. All untagged traffic coming in or out of the 802.1Q port is forwarded based on the PVID value.
For example, if VLAN 99 is configured as the native VLAN, the PVID is 99 and all untagged traffic is forwarded to VLAN 99. If the native VLAN has not been reconfigured, the PVID value is set to VLAN 1.</p>
</div>
</div>
<div class="section" id="voice-vlan-tagging">
<h2>Voice VLAN Tagging<a class="headerlink" href="#voice-vlan-tagging" title="Permalink to this headline">¶</a></h2>
<img alt="../../../_images/voice_vlan_tagging.png" src="../../../_images/voice_vlan_tagging.png" />
<ul class="simple">
<li>Port 1 connects to the switch or other VoIP device.</li>
<li>Port 2 is an internal 10/100 interface that carries the IP phone traffic.</li>
<li>Port 3 (access port) connects to a PC or other device.</li>
</ul>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">An access port that is used to connect a Cisco IP phone can be configured to use two separate VLANs: one VLAN for voice traffic and another VLAN for data traffic from a device attached to the phone. The link between the switch and the IP phone acts as a trunk to carry both voice VLAN traffic and data VLAN traffic.</p>
</div>
<p>On the switch, the access is configured to send Cisco Discovery Protocol (CDP) packets that instruct an attached IP phone to send voice traffic to the switch in one of three ways, depending on the type of traffic:</p>
<ul class="simple">
<li>voice VLAN tagged with a Layer 2 class of service (CoS) priority value</li>
<li>access VLAN tagged with a Layer 2 CoS priority value</li>
<li>access VLAN, untagged (no Layer 2 CoS priority value)</li>
</ul>
</div>
<div class="section" id="q-tagging">
<h2>802.1Q tagging<a class="headerlink" href="#q-tagging" title="Permalink to this headline">¶</a></h2>
<table border="1" class="docutils">
<colgroup>
<col width="44%" />
<col width="19%" />
<col width="16%" />
<col width="21%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head" colspan="4">802.1Q tag format</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>16 bits</td>
<td>3 bits</td>
<td>1 bit</td>
<td>12 bits</td>
</tr>
<tr class="row-odd"><td rowspan="2">TPID</td>
<td colspan="3">TCI</td>
</tr>
<tr class="row-even"><td>PCP</td>
<td>DEI</td>
<td>VID</td>
</tr>
</tbody>
</table>
<ul>
<li><p class="first">Tag protocol identifier (TPID): a 16-bit field set to a value of 0x8100 in order to identify the frame as an IEEE 802.1Q-tagged frame. This field is located at the same position as the EtherType/length field in untagged frames, and is thus used to distinguish the frame from untagged frames.</p>
</li>
<li><p class="first">Tag control information (TCI)
* Priority code point (PCP): a 3-bit field which refers to the <a class="reference external" href="https://en.wikipedia.org/wiki/IEEE_802.1p">IEEE 802.1p</a> <a class="reference external" href="https://en.wikipedia.org/wiki/Class_of_service">class of service</a> and maps to the frame priority level.</p>
<ul>
<li><p class="first">PCP values in order of priority are:</p>
<ul>
<li><p class="first">1 (background)</p>
</li>
<li><p class="first">0 (best effort, default)</p>
</li>
<li><p class="first">2 (excellent effort)</p>
</li>
<li><p class="first">3 (critical application)</p>
</li>
<li><p class="first">4 (video)</p>
</li>
<li><p class="first">5 (voice)</p>
</li>
<li><p class="first">6 (internetwork control)</p>
</li>
<li><p class="first">7 (network control)</p>
<p>These values can be used to prioritize different classes of traffic.</p>
</li>
</ul>
</li>
<li><p class="first">Drop eligible indicator (DEI): a 1-bit field. (formerly CFI[b]) May be used separately or in conjunction with PCP to indicate frames eligible to be dropped in the presence of congestion.</p>
</li>
<li><p class="first">VLAN identifier (VID): a 12-bit field specifying the VLAN to which the frame belongs. The hexadecimal values of 0x000 and 0xFFF are reserved. All other values may be used as VLAN identifiers, allowing up to 4,094 VLANs. The reserved value 0x000 indicates that the frame does not carry a VLAN ID; in this case, the 802.1Q tag specifies only a priority and is referred to as a priority tag. On bridges, VID 0x001 (the default VLAN ID) is often reserved for a management VLAN; this is vendor-specific. The VID value 0xFFF is reserved for implementation use; it must not be configured or transmitted. 0xFFF can be used to indicate a wildcard match in management operations or filtering database entries.</p>
</li>
</ul>
</li>
</ul>
<p>For frames using <a class="reference external" href="https://en.wikipedia.org/wiki/IEEE_802.2">IEEE 802.2</a>/<a class="reference external" href="https://en.wikipedia.org/wiki/Subnetwork_Access_Protocol">SNAP</a> encapsulation with an organizationally unique identifier (OUI) field of 00-00-00 (so that the protocol ID field in the SNAP header is an EtherType), as would be the case on LANs other than Ethernet, the EtherType value in the SNAP header is set to 0x8100 and the aforementioned extra 4 bytes are appended after the SNAP header.[citation needed]</p>
<p>Because inserting the VLAN tag changes the frame, 802.1Q encapsulation forces a recalculation of the original frame check sequence field in the Ethernet trailer.</p>
<p>The IEEE 802.3ac standard increased the maximum Ethernet frame size from 1518 bytes to 1522 bytes to accommodate the four-byte VLAN tag. Some network devices that do not support the larger frame size will process these frames successfully, but may report them as “baby giant” anomalies.</p>
<p>QinQ allows multiple VLAN tags in an Ethernet frame; together these tags constitute a tag stack. When used in the context of an Ethernet frame, a QinQ frame is a frame that has 2 VLAN 802.1Q headers (double-tagged).
<a class="reference external" href="https://en.wikipedia.org/wiki/IEEE_802.1ad">802.1ad QinQ</a>
The idea is to provide, for example, the possibility for customers to run their own VLANs inside service provider’s provided VLAN. This way the service provider can just configure one VLAN for the customer and customer can then treat that VLAN as if it were a trunk.</p>
<p><code class="docutils literal notranslate"><span class="pre">show</span> <span class="pre">interfaces</span> <span class="pre">fa0/18</span> <span class="pre">switchport</span></code></p>
<p><code class="docutils literal notranslate"><span class="pre">show</span> <span class="pre">vlan</span> <span class="pre">brief</span></code></p>
</div>
<div class="section" id="vlan-ranges">
<h2>VLAN Ranges<a class="headerlink" href="#vlan-ranges" title="Permalink to this headline">¶</a></h2>
<div class="section" id="normal-range">
<h3>normal range<a class="headerlink" href="#normal-range" title="Permalink to this headline">¶</a></h3>
<dl class="docutils">
<dt>1, 1002 - 1005:</dt>
<dd>Default Vlan, reserved for token ring &amp; fiber distributed data interface (FDDI) Vlans</dd>
<dt>Configuration:</dt>
<dd>Stored in VLAN database file called vlan.dat located in flash memory of switch</dd>
<dt>VTP:</dt>
<dd>can only store normal range VLANs</dd>
</dl>
</div>
<div class="section" id="extended-range">
<h3>extended range<a class="headerlink" href="#extended-range" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>big corporations need extended VLAN Ids</li>
<li>are identified as between <strong>1006 - 4094</strong></li>
<li>cfgs <strong>note written to vlan.dat</strong></li>
<li>support fewer features than normal range</li>
<li>saved by default in running config</li>
<li><strong>VTP doesn’t learn extended range VLANs</strong></li>
</ul>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">If you need to use extended range VLANs and you switch does not support VTPv3, then you would need to set the mode to transparent for VTP, which technically means that you are still using VTP, but you are not learning any VTP information from other VTP enabled devices.
With VTPv3 you can use the extended range VLANs by setting the mode to server, client, transparent or off, because VTPv3 does support the extended range VLANs.</p>
</div>
</div>
</div>
<div class="section" id="configuring-vlans">
<h2>Configuring VLANS<a class="headerlink" href="#configuring-vlans" title="Permalink to this headline">¶</a></h2>
<div class="code highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">S1</span><span class="c1"># configure terminal</span>
<span class="n">S1</span><span class="p">(</span><span class="n">config</span><span class="p">)</span><span class="c1"># interface F0/18</span>
<span class="n">S1</span><span class="p">(</span><span class="n">config</span><span class="o">-</span><span class="k">if</span><span class="p">)</span><span class="c1"># switchport mode access</span>
<span class="n">S1</span><span class="p">(</span><span class="n">config</span><span class="o">-</span><span class="k">if</span><span class="p">)</span><span class="c1"># switchport access vlan 20</span>
<span class="n">S1</span><span class="p">(</span><span class="n">config</span><span class="o">-</span><span class="k">if</span><span class="p">)</span><span class="c1"># end</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Use the <strong>switchport voice vlan 150</strong> command</p>
</div>
<p>Voice traffic must be labeled as trusted as soon as it enters the network. Use the ** mls qos trust[cos | device cisco-phone | dscp | ip-precedence] ** interface configuration command</p>
<div class="code highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">S3</span><span class="p">(</span><span class="n">config</span><span class="p">)</span><span class="c1"># vlan 20</span>
<span class="n">S3</span><span class="p">(</span><span class="n">config</span><span class="o">-</span><span class="n">vlan</span><span class="p">)</span><span class="c1"># name student</span>
<span class="n">S3</span><span class="p">(</span><span class="n">config</span><span class="o">-</span><span class="n">vlan</span><span class="p">)</span><span class="c1"># vlan 150</span>
<span class="n">S3</span><span class="p">(</span><span class="n">config</span><span class="o">-</span><span class="n">vlan</span><span class="p">)</span><span class="c1"># name VOICE</span>
<span class="n">S3</span><span class="p">(</span><span class="n">config</span><span class="o">-</span><span class="n">vlan</span><span class="p">)</span><span class="c1"># exit</span>
<span class="n">S3</span><span class="p">(</span><span class="n">config</span><span class="p">)</span><span class="c1">#</span>
<span class="n">S3</span><span class="p">(</span><span class="n">config</span><span class="p">)</span><span class="c1"># interface fa0/18</span>
<span class="n">S3</span><span class="p">(</span><span class="n">config</span><span class="o">-</span><span class="k">if</span><span class="p">)</span><span class="c1"># switchport mode access</span>
<span class="n">S3</span><span class="p">(</span><span class="n">config</span><span class="o">-</span><span class="k">if</span><span class="p">)</span><span class="c1"># switchport access vlan 20</span>
<span class="n">S3</span><span class="p">(</span><span class="n">config</span><span class="o">-</span><span class="k">if</span><span class="p">)</span><span class="c1">#</span>
<span class="n">S3</span><span class="p">(</span><span class="n">config</span><span class="o">-</span><span class="k">if</span><span class="p">)</span><span class="c1"># mls qos trust cos</span>
<span class="n">S3</span><span class="p">(</span><span class="n">config</span><span class="o">-</span><span class="k">if</span><span class="p">)</span><span class="c1"># switchport voice vlan 150</span>
<span class="n">S3</span><span class="p">(</span><span class="n">config</span><span class="o">-</span><span class="k">if</span><span class="p">)</span><span class="c1"># end</span>
<span class="n">S3</span><span class="c1">#</span>
</pre></div>
</div>
<div class="section" id="configure-optional-parameters">
<h3>configure optional parameters<a class="headerlink" href="#configure-optional-parameters" title="Permalink to this headline">¶</a></h3>
<div class="code highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">switch</span><span class="c1"># configure terminal</span>
<span class="n">switch</span><span class="p">(</span><span class="n">config</span><span class="p">)</span><span class="c1"># vlan 5</span>
<span class="n">switch</span><span class="p">(</span><span class="n">config</span><span class="o">-</span><span class="n">vlan</span><span class="p">)</span><span class="c1"># name accounting</span>
<span class="n">switch</span><span class="p">(</span><span class="n">config</span><span class="o">-</span><span class="n">vlan</span><span class="p">)</span><span class="c1"># state active</span>
<span class="n">switch</span><span class="p">(</span><span class="n">config</span><span class="o">-</span><span class="n">vlan</span><span class="p">)</span><span class="c1"># no shutdown</span>
</pre></div>
</div>
</div>
<div class="section" id="adding-ports-to-a-vlan">
<h3>adding ports to a VLAN<a class="headerlink" href="#adding-ports-to-a-vlan" title="Permalink to this headline">¶</a></h3>
<p>This example shows how to configure an Ethernet interface to join VLAN 5</p>
<div class="code highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">switch</span><span class="c1"># configure terminal</span>
<span class="n">switch</span><span class="p">(</span><span class="n">config</span><span class="p">)</span><span class="c1"># interface ethernet 1/13</span>
<span class="n">switch</span><span class="p">(</span><span class="n">config</span><span class="o">-</span><span class="k">if</span><span class="p">)</span><span class="c1"># switchport access vlan 5</span>
</pre></div>
</div>
</div>
<div class="section" id="verifying-vlan-configuration">
<h3>Verifying VLAN configuration<a class="headerlink" href="#verifying-vlan-configuration" title="Permalink to this headline">¶</a></h3>
<p>show all VLANs defined in the range of 1-21</p>
<div class="code highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">switch</span><span class="c1"># show running-config vlan 1-21</span>
<span class="n">version</span> <span class="mf">4.0</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
<span class="n">vlan</span> <span class="mi">1</span>
<span class="n">vlan</span> <span class="mi">5</span>
</pre></div>
</div>
<p>show the VLANs created on switch and their status</p>
<div class="code highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">switch</span><span class="c1"># show vlan</span>

<span class="n">VLAN</span> <span class="n">Name</span> <span class="n">Status</span> <span class="n">Ports</span>
<span class="o">----</span> <span class="o">--------------------------------</span> <span class="o">---------</span> <span class="o">-------------------------------</span>
<span class="mi">1</span> <span class="n">default</span> <span class="n">active</span> <span class="n">Eth1</span><span class="o">/</span><span class="mi">1</span><span class="p">,</span> <span class="n">Eth1</span><span class="o">/</span><span class="mi">2</span><span class="p">,</span> <span class="n">Eth1</span><span class="o">/</span><span class="mi">3</span><span class="p">,</span> <span class="n">Eth1</span><span class="o">/</span><span class="mi">4</span>
<span class="n">Eth1</span><span class="o">/</span><span class="mi">5</span><span class="p">,</span> <span class="n">Eth1</span><span class="o">/</span><span class="mi">6</span><span class="p">,</span> <span class="n">Eth1</span><span class="o">/</span><span class="mi">7</span><span class="p">,</span> <span class="n">Eth1</span><span class="o">/</span><span class="mi">8</span>
<span class="n">Eth1</span><span class="o">/</span><span class="mi">9</span><span class="p">,</span> <span class="n">Eth1</span><span class="o">/</span><span class="mi">10</span><span class="p">,</span> <span class="n">Eth1</span><span class="o">/</span><span class="mi">11</span>
<span class="n">Eth1</span><span class="o">/</span><span class="mi">12</span><span class="p">,</span> <span class="n">Eth1</span><span class="o">/</span><span class="mi">15</span><span class="p">,</span> <span class="n">Eth1</span><span class="o">/</span><span class="mi">16</span>
<span class="n">Eth1</span><span class="o">/</span><span class="mi">17</span><span class="p">,</span> <span class="n">Eth1</span><span class="o">/</span><span class="mi">18</span><span class="p">,</span> <span class="n">Eth1</span><span class="o">/</span><span class="mi">19</span>
<span class="n">Eth1</span><span class="o">/</span><span class="mi">20</span><span class="p">,</span> <span class="n">Eth1</span><span class="o">/</span><span class="mi">21</span><span class="p">,</span> <span class="n">Eth1</span><span class="o">/</span><span class="mi">22</span>
<span class="n">Eth1</span><span class="o">/</span><span class="mi">23</span><span class="p">,</span> <span class="n">Eth1</span><span class="o">/</span><span class="mi">24</span><span class="p">,</span> <span class="n">Eth1</span><span class="o">/</span><span class="mi">25</span>
<span class="n">Eth1</span><span class="o">/</span><span class="mi">26</span><span class="p">,</span> <span class="n">Eth1</span><span class="o">/</span><span class="mi">27</span><span class="p">,</span> <span class="n">Eth1</span><span class="o">/</span><span class="mi">28</span>
<span class="n">Eth1</span><span class="o">/</span><span class="mi">29</span><span class="p">,</span> <span class="n">Eth1</span><span class="o">/</span><span class="mi">30</span><span class="p">,</span> <span class="n">Eth1</span><span class="o">/</span><span class="mi">31</span>
<span class="n">Eth1</span><span class="o">/</span><span class="mi">32</span><span class="p">,</span> <span class="n">Eth1</span><span class="o">/</span><span class="mi">33</span><span class="p">,</span> <span class="n">Eth1</span><span class="o">/</span><span class="mi">34</span>
<span class="n">Eth1</span><span class="o">/</span><span class="mi">35</span><span class="p">,</span> <span class="n">Eth1</span><span class="o">/</span><span class="mi">36</span><span class="p">,</span> <span class="n">Eth1</span><span class="o">/</span><span class="mi">37</span>
<span class="n">Eth1</span><span class="o">/</span><span class="mi">38</span><span class="p">,</span> <span class="n">Eth1</span><span class="o">/</span><span class="mi">39</span><span class="p">,</span> <span class="n">Eth1</span><span class="o">/</span><span class="mi">40</span>
<span class="n">Eth3</span><span class="o">/</span><span class="mi">1</span><span class="p">,</span> <span class="n">Eth3</span><span class="o">/</span><span class="mi">2</span><span class="p">,</span> <span class="n">Eth3</span><span class="o">/</span><span class="mi">3</span><span class="p">,</span> <span class="n">Eth3</span><span class="o">/</span><span class="mi">4</span>
<span class="n">veth1</span><span class="o">/</span><span class="mi">1</span>
<span class="mi">13</span> <span class="n">VLAN0005</span> <span class="n">active</span> <span class="n">Eth1</span><span class="o">/</span><span class="mi">13</span><span class="p">,</span> <span class="n">Eth1</span><span class="o">/</span><span class="mi">14</span>
</pre></div>
</div>
<p>shows the details of VLAN 13 including its member ports</p>
<div class="code highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">switch</span><span class="c1"># show vlan id 13</span>

<span class="n">VLAN</span> <span class="n">Name</span> <span class="n">Status</span> <span class="n">Ports</span>
<span class="o">----</span> <span class="o">--------------------------------</span> <span class="o">---------</span> <span class="o">-------------------------------</span>
<span class="mi">13</span> <span class="n">VLAN0005</span> <span class="n">active</span> <span class="n">Eth1</span><span class="o">/</span><span class="mi">13</span><span class="p">,</span> <span class="n">Eth1</span><span class="o">/</span><span class="mi">14</span>


<span class="n">VLAN</span> <span class="n">Type</span> <span class="n">MTU</span>
<span class="o">----</span> <span class="o">-----</span> <span class="o">-----</span>
<span class="mi">13</span> <span class="n">enet</span> <span class="mi">576</span>

<span class="n">Remote</span> <span class="n">SPAN</span> <span class="n">VLAN</span>
<span class="o">----------------</span>
<span class="n">Disabled</span>

<span class="n">Primary</span> <span class="n">Secondary</span> <span class="n">Type</span> <span class="n">Ports</span>
<span class="o">------</span> <span class="o">---------</span> <span class="o">---------------</span> <span class="o">-------------------------------------------</span>
</pre></div>
</div>
<p>show the VLAN settings summary</p>
<div class="code highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">switch</span><span class="c1"># show vlan summary</span>

<span class="n">Number</span> <span class="n">of</span> <span class="n">existing</span> <span class="n">VLANs</span> <span class="p">:</span> <span class="mi">2</span>
<span class="n">Number</span> <span class="n">of</span> <span class="n">existing</span> <span class="n">VTP</span> <span class="n">VLANs</span> <span class="p">:</span> <span class="mi">2</span>
<span class="n">Number</span> <span class="n">of</span> <span class="n">existing</span> <span class="n">extended</span> <span class="n">VLANs</span> <span class="p">:</span> <span class="mi">0</span>
</pre></div>
</div>
</div>
<div class="section" id="remove-vlan-assignment">
<h3>remove VLAN Assignment<a class="headerlink" href="#remove-vlan-assignment" title="Permalink to this headline">¶</a></h3>
<p>Interface F0/18 was previously assigned to VLAN 20. The no switchport access vlan command is entered for interface F0/18</p>
<div class="code highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">S1</span><span class="c1"># configure terminal</span>
<span class="n">S1</span><span class="p">(</span><span class="n">config</span><span class="p">)</span><span class="c1"># interface F0/18</span>
<span class="n">S1</span><span class="p">(</span><span class="n">config</span><span class="o">-</span><span class="k">if</span><span class="p">)</span><span class="c1"># no switchport access vlan</span>
<span class="n">S1</span><span class="p">(</span><span class="n">config</span><span class="o">-</span><span class="k">if</span><span class="p">)</span><span class="c1"># end</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">VLAN 20 is still active even if no ports are assigned to it</p>
</div>
<p><code class="docutils literal notranslate"><span class="pre">S1#</span> <span class="pre">show</span> <span class="pre">interfaces</span> <span class="pre">F0/18</span> <span class="pre">switchport</span></code> -&gt; verifies that access VLAN for F0/18 has been reset to VLAN 1</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">It is not necessary to first remove a port from a VLAN to change its VLAN membership. When an access port has its VLAN membership reassigned to another existing VLAN, the new VLAN membership simply replaces the previous VLAN membership. In Figure 4, port F0/11 is assigned to VLAN 20.</p>
</div>
</div>
</div>
<div class="section" id="deleting-vlans">
<h2>deleting VLANs<a class="headerlink" href="#deleting-vlans" title="Permalink to this headline">¶</a></h2>
<div class="code highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">S1</span><span class="c1"># conf t</span>
<span class="n">S1</span><span class="p">(</span><span class="n">config</span><span class="p">)</span><span class="c1"># no vlan 20</span>
<span class="n">S1</span><span class="p">(</span><span class="n">config</span><span class="p">)</span><span class="c1"># end</span>
<span class="n">S1</span><span class="c1"># show vlan brief</span>
</pre></div>
</div>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">Before deleting a VLAN, reassign all member ports to a different VLAN first. Any ports that are not moved to an active VLAN are unable to communicate with other hosts after the VLAN is deleted and until they are assigned to an active VLAN</p>
</div>
<p>Alternatively, the entire vlan.dat file can be deleted using the <code class="docutils literal notranslate"><span class="pre">S1#</span> <span class="pre">delete</span> <span class="pre">flash:vlan.dat</span></code> command or <code class="docutils literal notranslate"><span class="pre">delete</span> <span class="pre">vlan.dat</span></code> if on other location.</p>
</div>
<div class="section" id="verifying-vlan-info">
<h2>verifying VLAN info<a class="headerlink" href="#verifying-vlan-info" title="Permalink to this headline">¶</a></h2>
<p><strong>show vlan summary</strong>
<strong>show vlan name student</strong>
<strong>show interfaces vlan 20</strong>
<strong>show interfaces F0/18 switchport</strong></p>
</div>
<div class="section" id="trunk-configuration">
<h2>TRUNK Configuration<a class="headerlink" href="#trunk-configuration" title="Permalink to this headline">¶</a></h2>
<div class="code highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">interface</span> <span class="n">FastEthernet0</span><span class="o">/</span><span class="mi">1</span>
<span class="n">switchport</span> <span class="n">mode</span> <span class="n">trunk</span>
<span class="n">switchport</span> <span class="n">trunk</span> <span class="n">native</span> <span class="n">vlan</span> <span class="mi">99</span>
<span class="n">switchport</span> <span class="n">trunk</span> <span class="n">allowed</span> <span class="n">vlan</span> <span class="mi">10</span><span class="p">,</span><span class="mi">20</span><span class="p">,</span><span class="mi">30</span><span class="p">,</span><span class="mi">99</span>
<span class="n">end</span>
</pre></div>
</div>
<div class="section" id="resetting-trunk-to-default-state">
<h3>Resetting Trunk to Default state<a class="headerlink" href="#resetting-trunk-to-default-state" title="Permalink to this headline">¶</a></h3>
<div class="code highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">configure</span> <span class="n">terminal</span>
<span class="n">interface</span> <span class="n">FastEthernet0</span><span class="o">/</span><span class="mi">1</span>
<span class="n">no</span> <span class="n">switchport</span> <span class="n">trunk</span> <span class="n">allowed</span> <span class="n">vlan</span>
<span class="n">no</span> <span class="n">switchport</span> <span class="n">trunk</span> <span class="n">native</span> <span class="n">vlan</span>
<span class="n">end</span>

<span class="n">Verify</span> <span class="n">the</span> <span class="n">trunk</span> <span class="n">configuration</span> <span class="k">with</span>

<span class="n">show</span> <span class="n">interfaces</span> <span class="n">f0</span><span class="o">/</span><span class="mi">1</span> <span class="n">switchport</span> <span class="n">command</span><span class="o">.</span>
</pre></div>
</div>
</div>
<div class="section" id="excercise">
<h3>excercise<a class="headerlink" href="#excercise" title="Permalink to this headline">¶</a></h3>
<div class="code highlight-default notranslate"><div class="highlight"><pre><span></span>S3#conf t
S3(config)#do show vlan brief

VLAN Name                             Status    Ports
---- -------------------------------- --------- -------------------------------
1    default                          active    Fa0/1, Fa0/2, Fa0/3, Fa0/4
                                                Fa0/5, Fa0/7, Fa0/8, Fa0/9
                                                Fa0/10, Fa0/12, Fa0/13, Fa0/14
                                                Fa0/15, Fa0/16, Fa0/17, Fa0/19
                                                Fa0/20, Fa0/21, Fa0/22, Fa0/23
                                                Fa0/24, Gig0/1, Gig0/2
10   Faculty/Staff                    active    Fa0/11
20   Students                         active    Fa0/18
30   Guest(Default)                   active    Fa0/6
88   Management                       active
99   Native                           active
1002 fddi-default                     active
1003 token-ring-default               active
1004 fddinet-default                  active
1005 trnet-default                    active
S3(config)#
S3(config)#interface Gig0/2
S3(config-if)#switchport mode trunk
S3(config-if)#switchport trunk native vlan 99
S3(config-if)#s%SPANTREE-2-UNBLOCK_CONSIST_PORT: Unblocking GigabitEthernet0/2 on VLAN0099. Port consistency restored.

%SPANTREE-2-UNBLOCK_CONSIST_PORT: Unblocking GigabitEthernet0/2 on VLAN0001. Port consistency restored.
switc
S3(config-if)#switchport nat
S3(config-if)#switchport native vl
S3(config-if)#switchport native vlan 99
S3(config-if)#show inter
S3(config-if)#exit
S3(config)#exit
S3#
show interface trunk
Port        Mode         Encapsulation  Status        Native vlan
Gig0/2      on           802.1q         trunking      99

Port        Vlans allowed on trunk
Gig0/2      1-1005

Port        Vlans allowed and active in management domain
Gig0/2      1,10,20,30,88,99

Port        Vlans in spanning tree forwarding state and not pruned
Gig0/2      1,10,20,30,88,99

S3#show vlan brief

VLAN Name                             Status    Ports
---- -------------------------------- --------- -------------------------------
1    default                          active    Fa0/1, Fa0/2, Fa0/3, Fa0/4
                                                Fa0/5, Fa0/7, Fa0/8, Fa0/9
                                                Fa0/10, Fa0/12, Fa0/13, Fa0/14
                                                Fa0/15, Fa0/16, Fa0/17, Fa0/19
                                                Fa0/20, Fa0/21, Fa0/22, Fa0/23
                                                Fa0/24, Gig0/1
10   Faculty/Staff                    active    Fa0/11
20   Students                         active    Fa0/18
30   Guest(Default)                   active    Fa0/6
88   Management                       active
99   Native                           active
1002 fddi-default                     active
1003 token-ring-default               active
1004 fddinet-default                  active
1005 trnet-default                    active
S3#show interfaces GigabitEthernet 0/1
GigabitEthernet0/1 is down, line protocol is down (disabled)
  Hardware is Lance, address is 00d0.9766.3301 (bia 00d0.9766.3301)
 BW 1000000 Kbit, DLY 1000 usec,
     reliability 255/255, txload 1/255, rxload 1/255
  Encapsulation ARPA, loopback not set
  Keepalive set (10 sec)
  Full-duplex, 1000Mb/s
  input flow-control is off, output flow-control is off
  ARP type: ARPA, ARP Timeout 04:00:00
  Last input 00:00:08, output 00:00:05, output hang never
  Last clearing of &quot;show interface&quot; counters never
  Input queue: 0/75/0/0 (size/max/drops/flushes); Total output drops: 0
  Queueing strategy: fifo
  Output queue :0/40 (size/max)
  5 minute input rate 0 bits/sec, 0 packets/sec
  5 minute output rate 0 bits/sec, 0 packets/sec
     956 packets input, 193351 bytes, 0 no buffer
     Received 956 broadcasts, 0 runts, 0 giants, 0 throttles
     0 input errors, 0 CRC, 0 frame, 0 overrun, 0 ignored, 0 abort
     0 watchdog, 0 multicast, 0 pause input
     0 input packets with dribble condition detected
     2357 packets output, 263570 bytes, 0 underruns

S3#show interfaces GigabitEthernet 0/1 switchport
Name: Gig0/1
Switchport: Enabled
Administrative Mode: dynamic auto
Operational Mode: down
Administrative Trunking Encapsulation: dot1q
Operational Trunking Encapsulation: native
Negotiation of Trunking: On
Access Mode VLAN: 1 (default)
Trunking Native Mode VLAN: 1 (default)
Voice VLAN: none
Administrative private-vlan host-association: none
Administrative private-vlan mapping: none
Administrative private-vlan trunk native VLAN: none
Administrative private-vlan trunk encapsulation: dot1q
Administrative private-vlan trunk normal VLANs: none
Administrative private-vlan trunk private VLANs: none
Operational private-vlan: none
Trunking VLANs Enabled: ALL
Pruning VLANs Enabled: 2-1001
Capture Mode Disabled
Capture VLANs Allowed: ALL
Protected: false
Appliance trust: none

on switch 1 running config
--------------------------
interface GigabitEthernet0/1
 switchport trunk native vlan 99
 switchport trunk allowed vlan 10,20,30,99
 switchport mode trunk
!
interface GigabitEthernet0/2
 switchport trunk native vlan 99
 switchport trunk allowed vlan 10,20,30,99
 switchport mode trunk
</pre></div>
</div>
</div>
<div class="section" id="verify-commands">
<h3>Verify commands<a class="headerlink" href="#verify-commands" title="Permalink to this headline">¶</a></h3>
<div class="code highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">S1</span><span class="c1">#show vlan brief</span>

<span class="n">VLAN</span> <span class="n">Name</span>                             <span class="n">Status</span>    <span class="n">Ports</span>
<span class="o">----</span> <span class="o">--------------------------------</span> <span class="o">---------</span> <span class="o">-------------------------------</span>
<span class="mi">1</span>    <span class="n">default</span>                          <span class="n">active</span>    <span class="n">Fa0</span><span class="o">/</span><span class="mi">1</span><span class="p">,</span> <span class="n">Fa0</span><span class="o">/</span><span class="mi">2</span><span class="p">,</span> <span class="n">Fa0</span><span class="o">/</span><span class="mi">3</span><span class="p">,</span> <span class="n">Fa0</span><span class="o">/</span><span class="mi">4</span>
                                                <span class="n">Fa0</span><span class="o">/</span><span class="mi">5</span><span class="p">,</span> <span class="n">Fa0</span><span class="o">/</span><span class="mi">6</span><span class="p">,</span> <span class="n">Fa0</span><span class="o">/</span><span class="mi">7</span><span class="p">,</span> <span class="n">Fa0</span><span class="o">/</span><span class="mi">8</span>
                                                <span class="n">Fa0</span><span class="o">/</span><span class="mi">9</span><span class="p">,</span> <span class="n">Fa0</span><span class="o">/</span><span class="mi">10</span><span class="p">,</span> <span class="n">Fa0</span><span class="o">/</span><span class="mi">11</span><span class="p">,</span> <span class="n">Fa0</span><span class="o">/</span><span class="mi">12</span>
                                                <span class="n">Fa0</span><span class="o">/</span><span class="mi">13</span><span class="p">,</span> <span class="n">Fa0</span><span class="o">/</span><span class="mi">14</span><span class="p">,</span> <span class="n">Fa0</span><span class="o">/</span><span class="mi">15</span><span class="p">,</span> <span class="n">Fa0</span><span class="o">/</span><span class="mi">16</span>
                                                <span class="n">Fa0</span><span class="o">/</span><span class="mi">17</span><span class="p">,</span> <span class="n">Fa0</span><span class="o">/</span><span class="mi">18</span><span class="p">,</span> <span class="n">Fa0</span><span class="o">/</span><span class="mi">19</span><span class="p">,</span> <span class="n">Fa0</span><span class="o">/</span><span class="mi">20</span>
                                                <span class="n">Fa0</span><span class="o">/</span><span class="mi">21</span><span class="p">,</span> <span class="n">Fa0</span><span class="o">/</span><span class="mi">22</span><span class="p">,</span> <span class="n">Fa0</span><span class="o">/</span><span class="mi">23</span><span class="p">,</span> <span class="n">Fa0</span><span class="o">/</span><span class="mi">24</span>
<span class="mi">10</span>   <span class="n">Faculty</span><span class="o">/</span><span class="n">Staff</span>                    <span class="n">active</span>
<span class="mi">20</span>   <span class="n">Students</span>                         <span class="n">active</span>
<span class="mi">30</span>   <span class="n">Guest</span><span class="p">(</span><span class="n">Default</span><span class="p">)</span>                   <span class="n">active</span>
<span class="mi">88</span>   <span class="n">Management</span>                       <span class="n">active</span>
<span class="mi">99</span>   <span class="n">Native</span>                           <span class="n">active</span>
<span class="mi">1002</span> <span class="n">fddi</span><span class="o">-</span><span class="n">default</span>                     <span class="n">active</span>
<span class="mi">1003</span> <span class="n">token</span><span class="o">-</span><span class="n">ring</span><span class="o">-</span><span class="n">default</span>               <span class="n">active</span>
<span class="mi">1004</span> <span class="n">fddinet</span><span class="o">-</span><span class="n">default</span>                  <span class="n">active</span>
<span class="mi">1005</span> <span class="n">trnet</span><span class="o">-</span><span class="n">default</span>                    <span class="n">active</span>
<span class="n">S1</span><span class="c1">#show vt</span>
<span class="n">S1</span><span class="c1">#show vtp ?</span>
  <span class="n">counters</span>  <span class="n">VTP</span> <span class="n">statistics</span>
  <span class="n">password</span>  <span class="n">VTP</span> <span class="n">password</span>
  <span class="n">status</span>    <span class="n">VTP</span> <span class="n">domain</span> <span class="n">status</span>

<span class="n">S1</span><span class="c1">#show vtp status</span>

<span class="n">VTP</span> <span class="n">Version</span>                     <span class="p">:</span> <span class="mi">2</span>
<span class="n">Configuration</span> <span class="n">Revision</span>          <span class="p">:</span> <span class="mi">12</span>
<span class="n">Maximum</span> <span class="n">VLANs</span> <span class="n">supported</span> <span class="n">locally</span> <span class="p">:</span> <span class="mi">255</span>
<span class="n">Number</span> <span class="n">of</span> <span class="n">existing</span> <span class="n">VLANs</span>        <span class="p">:</span> <span class="mi">10</span>
<span class="n">VTP</span> <span class="n">Operating</span> <span class="n">Mode</span>              <span class="p">:</span> <span class="n">Server</span>
<span class="n">VTP</span> <span class="n">Domain</span> <span class="n">Name</span>                 <span class="p">:</span>
<span class="n">VTP</span> <span class="n">Pruning</span> <span class="n">Mode</span>                <span class="p">:</span> <span class="n">Disabled</span>
<span class="n">VTP</span> <span class="n">V2</span> <span class="n">Mode</span>                     <span class="p">:</span> <span class="n">Disabled</span>
<span class="n">VTP</span> <span class="n">Traps</span> <span class="n">Generation</span>            <span class="p">:</span> <span class="n">Disabled</span>
<span class="n">MD5</span> <span class="n">digest</span>                      <span class="p">:</span> <span class="mh">0xD9</span> <span class="mh">0x37</span> <span class="mh">0x14</span> <span class="mh">0xE2</span> <span class="mh">0xAF</span> <span class="mh">0x1D</span> <span class="mh">0x1E</span> <span class="mh">0x38</span>
<span class="n">Configuration</span> <span class="n">last</span> <span class="n">modified</span> <span class="n">by</span> <span class="mf">0.0</span><span class="o">.</span><span class="mf">0.0</span> <span class="n">at</span> <span class="mi">3</span><span class="o">-</span><span class="mi">1</span><span class="o">-</span><span class="mi">93</span> <span class="mi">00</span><span class="p">:</span><span class="mi">01</span><span class="p">:</span><span class="mi">36</span>
<span class="n">Local</span> <span class="n">updater</span> <span class="n">ID</span> <span class="ow">is</span> <span class="mf">0.0</span><span class="o">.</span><span class="mf">0.0</span> <span class="p">(</span><span class="n">no</span> <span class="n">valid</span> <span class="n">interface</span> <span class="n">found</span><span class="p">)</span>

<span class="n">S1</span><span class="c1">#show interfaces trunk</span>

<span class="n">Port</span>        <span class="n">Mode</span>         <span class="n">Encapsulation</span>  <span class="n">Status</span>        <span class="n">Native</span> <span class="n">vlan</span>
<span class="n">Gig0</span><span class="o">/</span><span class="mi">1</span>      <span class="n">on</span>           <span class="mf">802.1</span><span class="n">q</span>         <span class="n">trunking</span>      <span class="mi">99</span>
<span class="n">Gig0</span><span class="o">/</span><span class="mi">2</span>      <span class="n">on</span>           <span class="mf">802.1</span><span class="n">q</span>         <span class="n">trunking</span>      <span class="mi">99</span>

<span class="n">Port</span>        <span class="n">Vlans</span> <span class="n">allowed</span> <span class="n">on</span> <span class="n">trunk</span>
<span class="n">Gig0</span><span class="o">/</span><span class="mi">1</span>      <span class="mi">10</span><span class="p">,</span><span class="mi">20</span><span class="p">,</span><span class="mi">30</span><span class="p">,</span><span class="mi">99</span>
<span class="n">Gig0</span><span class="o">/</span><span class="mi">2</span>      <span class="mi">10</span><span class="p">,</span><span class="mi">20</span><span class="p">,</span><span class="mi">30</span><span class="p">,</span><span class="mi">99</span>

<span class="n">Port</span>        <span class="n">Vlans</span> <span class="n">allowed</span> <span class="ow">and</span> <span class="n">active</span> <span class="ow">in</span> <span class="n">management</span> <span class="n">domain</span>
<span class="n">Gig0</span><span class="o">/</span><span class="mi">1</span>      <span class="mi">10</span><span class="p">,</span><span class="mi">20</span><span class="p">,</span><span class="mi">30</span><span class="p">,</span><span class="mi">99</span>
<span class="n">Gig0</span><span class="o">/</span><span class="mi">2</span>      <span class="mi">10</span><span class="p">,</span><span class="mi">20</span><span class="p">,</span><span class="mi">30</span><span class="p">,</span><span class="mi">99</span>

<span class="n">Port</span>        <span class="n">Vlans</span> <span class="ow">in</span> <span class="n">spanning</span> <span class="n">tree</span> <span class="n">forwarding</span> <span class="n">state</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">pruned</span>
<span class="n">Gig0</span><span class="o">/</span><span class="mi">1</span>      <span class="mi">10</span><span class="p">,</span><span class="mi">20</span><span class="p">,</span><span class="mi">30</span><span class="p">,</span><span class="mi">99</span>
<span class="n">Gig0</span><span class="o">/</span><span class="mi">2</span>      <span class="mi">10</span><span class="p">,</span><span class="mi">20</span><span class="p">,</span><span class="mi">30</span><span class="p">,</span><span class="mi">99</span>

<span class="n">S1</span><span class="c1">#show interface Gig0/1 switchport</span>
<span class="n">Name</span><span class="p">:</span> <span class="n">Gig0</span><span class="o">/</span><span class="mi">1</span>
<span class="n">Switchport</span><span class="p">:</span> <span class="n">Enabled</span>
<span class="n">Administrative</span> <span class="n">Mode</span><span class="p">:</span> <span class="n">trunk</span>
<span class="n">Operational</span> <span class="n">Mode</span><span class="p">:</span> <span class="n">trunk</span>
<span class="n">Administrative</span> <span class="n">Trunking</span> <span class="n">Encapsulation</span><span class="p">:</span> <span class="n">dot1q</span>
<span class="n">Operational</span> <span class="n">Trunking</span> <span class="n">Encapsulation</span><span class="p">:</span> <span class="n">dot1q</span>
<span class="n">Negotiation</span> <span class="n">of</span> <span class="n">Trunking</span><span class="p">:</span> <span class="n">On</span>
<span class="n">Access</span> <span class="n">Mode</span> <span class="n">VLAN</span><span class="p">:</span> <span class="mi">1</span> <span class="p">(</span><span class="n">default</span><span class="p">)</span>
<span class="n">Trunking</span> <span class="n">Native</span> <span class="n">Mode</span> <span class="n">VLAN</span><span class="p">:</span> <span class="mi">99</span> <span class="p">(</span><span class="n">Native</span><span class="p">)</span>
<span class="n">Voice</span> <span class="n">VLAN</span><span class="p">:</span> <span class="n">none</span>
<span class="n">Administrative</span> <span class="n">private</span><span class="o">-</span><span class="n">vlan</span> <span class="n">host</span><span class="o">-</span><span class="n">association</span><span class="p">:</span> <span class="n">none</span>
<span class="n">Administrative</span> <span class="n">private</span><span class="o">-</span><span class="n">vlan</span> <span class="n">mapping</span><span class="p">:</span> <span class="n">none</span>
<span class="n">Administrative</span> <span class="n">private</span><span class="o">-</span><span class="n">vlan</span> <span class="n">trunk</span> <span class="n">native</span> <span class="n">VLAN</span><span class="p">:</span> <span class="n">none</span>
<span class="n">Administrative</span> <span class="n">private</span><span class="o">-</span><span class="n">vlan</span> <span class="n">trunk</span> <span class="n">encapsulation</span><span class="p">:</span> <span class="n">dot1q</span>
<span class="n">Administrative</span> <span class="n">private</span><span class="o">-</span><span class="n">vlan</span> <span class="n">trunk</span> <span class="n">normal</span> <span class="n">VLANs</span><span class="p">:</span> <span class="n">none</span>
<span class="n">Administrative</span> <span class="n">private</span><span class="o">-</span><span class="n">vlan</span> <span class="n">trunk</span> <span class="n">private</span> <span class="n">VLANs</span><span class="p">:</span> <span class="n">none</span>
<span class="n">Operational</span> <span class="n">private</span><span class="o">-</span><span class="n">vlan</span><span class="p">:</span> <span class="n">none</span>
<span class="n">Trunking</span> <span class="n">VLANs</span> <span class="n">Enabled</span><span class="p">:</span> <span class="n">ALL</span>
<span class="n">Pruning</span> <span class="n">VLANs</span> <span class="n">Enabled</span><span class="p">:</span> <span class="mi">2</span><span class="o">-</span><span class="mi">1001</span>
<span class="n">Capture</span> <span class="n">Mode</span> <span class="n">Disabled</span>
<span class="n">Capture</span> <span class="n">VLANs</span> <span class="n">Allowed</span><span class="p">:</span> <span class="n">ALL</span>
<span class="n">Protected</span><span class="p">:</span> <span class="n">false</span>
<span class="n">Appliance</span> <span class="n">trust</span><span class="p">:</span> <span class="n">none</span>

<span class="n">S1</span><span class="c1">#show vlan</span>

<span class="n">VLAN</span> <span class="n">Name</span>                             <span class="n">Status</span>    <span class="n">Ports</span>
<span class="o">----</span> <span class="o">--------------------------------</span> <span class="o">---------</span> <span class="o">-------------------------------</span>
<span class="mi">1</span>    <span class="n">default</span>                          <span class="n">active</span>    <span class="n">Fa0</span><span class="o">/</span><span class="mi">1</span><span class="p">,</span> <span class="n">Fa0</span><span class="o">/</span><span class="mi">2</span><span class="p">,</span> <span class="n">Fa0</span><span class="o">/</span><span class="mi">3</span><span class="p">,</span> <span class="n">Fa0</span><span class="o">/</span><span class="mi">4</span>
                                                <span class="n">Fa0</span><span class="o">/</span><span class="mi">5</span><span class="p">,</span> <span class="n">Fa0</span><span class="o">/</span><span class="mi">6</span><span class="p">,</span> <span class="n">Fa0</span><span class="o">/</span><span class="mi">7</span><span class="p">,</span> <span class="n">Fa0</span><span class="o">/</span><span class="mi">8</span>
                                                <span class="n">Fa0</span><span class="o">/</span><span class="mi">9</span><span class="p">,</span> <span class="n">Fa0</span><span class="o">/</span><span class="mi">10</span><span class="p">,</span> <span class="n">Fa0</span><span class="o">/</span><span class="mi">11</span><span class="p">,</span> <span class="n">Fa0</span><span class="o">/</span><span class="mi">12</span>
                                                <span class="n">Fa0</span><span class="o">/</span><span class="mi">13</span><span class="p">,</span> <span class="n">Fa0</span><span class="o">/</span><span class="mi">14</span><span class="p">,</span> <span class="n">Fa0</span><span class="o">/</span><span class="mi">15</span><span class="p">,</span> <span class="n">Fa0</span><span class="o">/</span><span class="mi">16</span>
                                                <span class="n">Fa0</span><span class="o">/</span><span class="mi">17</span><span class="p">,</span> <span class="n">Fa0</span><span class="o">/</span><span class="mi">18</span><span class="p">,</span> <span class="n">Fa0</span><span class="o">/</span><span class="mi">19</span><span class="p">,</span> <span class="n">Fa0</span><span class="o">/</span><span class="mi">20</span>
                                                <span class="n">Fa0</span><span class="o">/</span><span class="mi">21</span><span class="p">,</span> <span class="n">Fa0</span><span class="o">/</span><span class="mi">22</span><span class="p">,</span> <span class="n">Fa0</span><span class="o">/</span><span class="mi">23</span><span class="p">,</span> <span class="n">Fa0</span><span class="o">/</span><span class="mi">24</span>
<span class="mi">10</span>   <span class="n">Faculty</span><span class="o">/</span><span class="n">Staff</span>                    <span class="n">active</span>
<span class="mi">20</span>   <span class="n">Students</span>                         <span class="n">active</span>
<span class="mi">30</span>   <span class="n">Guest</span><span class="p">(</span><span class="n">Default</span><span class="p">)</span>                   <span class="n">active</span>
<span class="mi">88</span>   <span class="n">Management</span>                       <span class="n">active</span>
<span class="mi">99</span>   <span class="n">Native</span>                           <span class="n">active</span>
<span class="mi">1002</span> <span class="n">fddi</span><span class="o">-</span><span class="n">default</span>                     <span class="n">act</span><span class="o">/</span><span class="n">unsup</span>
<span class="mi">1003</span> <span class="n">token</span><span class="o">-</span><span class="n">ring</span><span class="o">-</span><span class="n">default</span>               <span class="n">act</span><span class="o">/</span><span class="n">unsup</span>
<span class="mi">1004</span> <span class="n">fddinet</span><span class="o">-</span><span class="n">default</span>                  <span class="n">act</span><span class="o">/</span><span class="n">unsup</span>
<span class="mi">1005</span> <span class="n">trnet</span><span class="o">-</span><span class="n">default</span>                    <span class="n">act</span><span class="o">/</span><span class="n">unsup</span>

<span class="n">VLAN</span> <span class="n">Type</span>  <span class="n">SAID</span>       <span class="n">MTU</span>   <span class="n">Parent</span> <span class="n">RingNo</span> <span class="n">BridgeNo</span> <span class="n">Stp</span>  <span class="n">BrdgMode</span> <span class="n">Trans1</span> <span class="n">Trans2</span>
<span class="o">----</span> <span class="o">-----</span> <span class="o">----------</span> <span class="o">-----</span> <span class="o">------</span> <span class="o">------</span> <span class="o">--------</span> <span class="o">----</span> <span class="o">--------</span> <span class="o">------</span> <span class="o">------</span>
<span class="mi">1</span>    <span class="n">enet</span>  <span class="mi">100001</span>     <span class="mi">1500</span>  <span class="o">-</span>      <span class="o">-</span>      <span class="o">-</span>        <span class="o">-</span>    <span class="o">-</span>        <span class="mi">0</span>      <span class="mi">0</span>
<span class="mi">10</span>   <span class="n">enet</span>  <span class="mi">100010</span>     <span class="mi">1500</span>  <span class="o">-</span>      <span class="o">-</span>      <span class="o">-</span>        <span class="o">-</span>    <span class="o">-</span>        <span class="mi">0</span>      <span class="mi">0</span>
<span class="mi">20</span>   <span class="n">enet</span>  <span class="mi">100020</span>     <span class="mi">1500</span>  <span class="o">-</span>      <span class="o">-</span>      <span class="o">-</span>        <span class="o">-</span>    <span class="o">-</span>        <span class="mi">0</span>      <span class="mi">0</span>
<span class="mi">30</span>   <span class="n">enet</span>  <span class="mi">100030</span>     <span class="mi">1500</span>  <span class="o">-</span>      <span class="o">-</span>      <span class="o">-</span>        <span class="o">-</span>    <span class="o">-</span>        <span class="mi">0</span>      <span class="mi">0</span>
<span class="mi">88</span>   <span class="n">enet</span>  <span class="mi">100088</span>     <span class="mi">1500</span>  <span class="o">-</span>      <span class="o">-</span>      <span class="o">-</span>        <span class="o">-</span>    <span class="o">-</span>        <span class="mi">0</span>      <span class="mi">0</span>
<span class="mi">99</span>   <span class="n">enet</span>  <span class="mi">100099</span>     <span class="mi">1500</span>  <span class="o">-</span>      <span class="o">-</span>      <span class="o">-</span>        <span class="o">-</span>    <span class="o">-</span>        <span class="mi">0</span>      <span class="mi">0</span>
<span class="mi">1002</span> <span class="n">fddi</span>  <span class="mi">101002</span>     <span class="mi">1500</span>  <span class="o">-</span>      <span class="o">-</span>      <span class="o">-</span>        <span class="o">-</span>    <span class="o">-</span>        <span class="mi">0</span>      <span class="mi">0</span>
<span class="mi">1003</span> <span class="n">tr</span>    <span class="mi">101003</span>     <span class="mi">1500</span>  <span class="o">-</span>      <span class="o">-</span>      <span class="o">-</span>        <span class="o">-</span>    <span class="o">-</span>        <span class="mi">0</span>      <span class="mi">0</span>
<span class="mi">1004</span> <span class="n">fdnet</span> <span class="mi">101004</span>     <span class="mi">1500</span>  <span class="o">-</span>      <span class="o">-</span>      <span class="o">-</span>        <span class="n">ieee</span> <span class="o">-</span>        <span class="mi">0</span>      <span class="mi">0</span>
<span class="mi">1005</span> <span class="n">trnet</span> <span class="mi">101005</span>     <span class="mi">1500</span>  <span class="o">-</span>      <span class="o">-</span>      <span class="o">-</span>        <span class="n">ibm</span>  <span class="o">-</span>        <span class="mi">0</span>      <span class="mi">0</span>

<span class="n">VLAN</span> <span class="n">Type</span>  <span class="n">SAID</span>       <span class="n">MTU</span>   <span class="n">Parent</span> <span class="n">RingNo</span> <span class="n">BridgeNo</span> <span class="n">Stp</span>  <span class="n">BrdgMode</span> <span class="n">Trans1</span> <span class="n">Trans2</span>
<span class="o">----</span> <span class="o">-----</span> <span class="o">----------</span> <span class="o">-----</span> <span class="o">------</span> <span class="o">------</span> <span class="o">--------</span> <span class="o">----</span> <span class="o">--------</span> <span class="o">------</span> <span class="o">------</span>

<span class="n">Remote</span> <span class="n">SPAN</span> <span class="n">VLANs</span>
<span class="o">------------------------------------------------------------------------------</span>

<span class="n">Primary</span> <span class="n">Secondary</span> <span class="n">Type</span>              <span class="n">Ports</span>
<span class="o">-------</span> <span class="o">---------</span> <span class="o">-----------------</span> <span class="o">------------------------------------------</span>
<span class="n">S1</span><span class="c1">#</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="combination-exercise">
<h2>combination exercise<a class="headerlink" href="#combination-exercise" title="Permalink to this headline">¶</a></h2>
<img alt="../../../_images/vlan_and_vtps_exercise.png" src="../../../_images/vlan_and_vtps_exercise.png" />
<table border="1" class="docutils">
<colgroup>
<col width="12%" />
<col width="17%" />
<col width="22%" />
<col width="23%" />
<col width="26%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Device</th>
<th class="head">Interface</th>
<th class="head">IP Address</th>
<th class="head">Subnet Mask</th>
<th class="head">Default Gateway</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>S1</td>
<td>VLAN 1</td>
<td>192.168.1.11</td>
<td>255.255.255.0</td>
<td>N/A</td>
</tr>
<tr class="row-odd"><td>S2</td>
<td>VLAN 1</td>
<td>192.168.1.12</td>
<td>255.255.255.0</td>
<td>N/A</td>
</tr>
<tr class="row-even"><td>PC-A</td>
<td>NIC</td>
<td>192.168.10.3</td>
<td>255.255.255.0</td>
<td>192.168.10.1</td>
</tr>
<tr class="row-odd"><td>PC-B</td>
<td>NIC</td>
<td>192.168.10.4</td>
<td>255.255.255.0</td>
<td>192.168.10.1</td>
</tr>
<tr class="row-even"><td>PC-C</td>
<td>NIC</td>
<td>192.168.20.3</td>
<td>255.255.255.0</td>
<td>192.168.20.1</td>
</tr>
</tbody>
</table>
<p>basic configuration for switch</p>
<div class="code highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">no</span> <span class="n">ip</span> <span class="n">domain</span><span class="o">-</span><span class="n">lookup</span>
<span class="n">service</span> <span class="n">password</span><span class="o">-</span><span class="n">encryption</span>
<span class="n">enable</span> <span class="n">secret</span> <span class="k">class</span>
<span class="nc">banner</span> <span class="n">motd</span> <span class="c1">#</span>
<span class="n">Unauthorized</span> <span class="n">access</span> <span class="ow">is</span> <span class="n">strictly</span> <span class="n">prohibited</span><span class="o">.</span> <span class="c1">#</span>
<span class="n">line</span> <span class="n">con</span> <span class="mi">0</span>
<span class="n">password</span> <span class="n">cisco</span>
<span class="n">login</span>
<span class="n">logging</span> <span class="n">synchronous</span>
<span class="n">line</span> <span class="n">vty</span> <span class="mi">0</span> <span class="mi">15</span>
<span class="n">password</span> <span class="n">cisco</span>
<span class="n">logging</span> <span class="n">synchronous</span>
<span class="n">login</span>
<span class="n">exit</span>
</pre></div>
</div>
<p>create VLANs on switches</p>
<div class="code highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">S1</span><span class="p">(</span><span class="n">config</span><span class="p">)</span><span class="c1"># vlan 10</span>
<span class="n">S1</span><span class="p">(</span><span class="n">config</span><span class="o">-</span><span class="n">vlan</span><span class="p">)</span><span class="c1"># name Student</span>
<span class="n">S1</span><span class="p">(</span><span class="n">config</span><span class="o">-</span><span class="n">vlan</span><span class="p">)</span><span class="c1"># vlan 20</span>
<span class="n">S1</span><span class="p">(</span><span class="n">config</span><span class="o">-</span><span class="n">vlan</span><span class="p">)</span><span class="c1"># name Faculty</span>
<span class="n">S1</span><span class="p">(</span><span class="n">config</span><span class="o">-</span><span class="n">vlan</span><span class="p">)</span><span class="c1"># vlan 99</span>
<span class="n">S1</span><span class="p">(</span><span class="n">config</span><span class="o">-</span><span class="n">vlan</span><span class="p">)</span><span class="c1"># name Management</span>
<span class="n">S1</span><span class="p">(</span><span class="n">config</span><span class="o">-</span><span class="n">vlan</span><span class="p">)</span><span class="c1"># end</span>
</pre></div>
</div>
<p>Assign VLANs to the interfaces</p>
<div class="code highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">S1</span><span class="p">(</span><span class="n">config</span><span class="p">)</span><span class="c1"># interface f0/6</span>
<span class="n">S1</span><span class="p">(</span><span class="n">config</span><span class="o">-</span><span class="k">if</span><span class="p">)</span><span class="c1"># switchport mode access</span>
<span class="n">S1</span><span class="p">(</span><span class="n">config</span><span class="o">-</span><span class="k">if</span><span class="p">)</span><span class="c1"># switchport access vlan 10</span>

<span class="n">Move</span> <span class="n">the</span> <span class="n">switch</span> <span class="n">IP</span> <span class="n">address</span> <span class="n">VLAN</span> <span class="mf">99.</span>

<span class="n">S1</span><span class="p">(</span><span class="n">config</span><span class="p">)</span><span class="c1"># interface vlan 1</span>
<span class="n">S1</span><span class="p">(</span><span class="n">config</span><span class="o">-</span><span class="k">if</span><span class="p">)</span><span class="c1"># no ip address</span>
<span class="n">S1</span><span class="p">(</span><span class="n">config</span><span class="o">-</span><span class="k">if</span><span class="p">)</span><span class="c1"># interface vlan 99</span>
<span class="n">S1</span><span class="p">(</span><span class="n">config</span><span class="o">-</span><span class="k">if</span><span class="p">)</span><span class="c1"># ip address 192.168.1.11 255.255.255.0</span>
<span class="n">S1</span><span class="p">(</span><span class="n">config</span><span class="o">-</span><span class="k">if</span><span class="p">)</span><span class="c1"># end</span>
</pre></div>
</div>
<p>Assign a VLAN to multiple interfaces</p>
<div class="code highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">S1</span><span class="p">(</span><span class="n">config</span><span class="p">)</span><span class="c1"># interface range f0/11-24</span>
<span class="n">S1</span><span class="p">(</span><span class="n">config</span><span class="o">-</span><span class="k">if</span><span class="o">-</span><span class="nb">range</span><span class="p">)</span><span class="c1"># switchport mode access</span>
<span class="n">S1</span><span class="p">(</span><span class="n">config</span><span class="o">-</span><span class="k">if</span><span class="o">-</span><span class="nb">range</span><span class="p">)</span><span class="c1"># switchport access vlan 10</span>
<span class="n">S1</span><span class="p">(</span><span class="n">config</span><span class="o">-</span><span class="k">if</span><span class="o">-</span><span class="nb">range</span><span class="p">)</span><span class="c1"># end</span>

<span class="n">Use</span> <span class="n">the</span> <span class="n">no</span> <span class="n">switchport</span> <span class="n">access</span> <span class="n">vlan</span> <span class="n">command</span> <span class="n">to</span> <span class="n">remove</span> <span class="n">the</span> <span class="n">VLAN</span> <span class="mi">10</span> <span class="n">assignment</span> <span class="n">to</span> <span class="n">F0</span><span class="o">/</span><span class="mi">24</span>

<span class="n">S1</span><span class="p">(</span><span class="n">config</span><span class="p">)</span><span class="c1"># interface f0/24</span>
<span class="n">S1</span><span class="p">(</span><span class="n">config</span><span class="o">-</span><span class="k">if</span><span class="p">)</span><span class="c1"># no switchport access vlan</span>
<span class="n">S1</span><span class="p">(</span><span class="n">config</span><span class="o">-</span><span class="k">if</span><span class="p">)</span><span class="c1"># end</span>

<span class="n">Add</span> <span class="n">VLAN</span> <span class="mi">30</span> <span class="n">to</span> <span class="n">interface</span> <span class="n">F0</span><span class="o">/</span><span class="mi">24</span> <span class="n">without</span> <span class="n">issuing</span> <span class="n">the</span> <span class="n">VLAN</span> <span class="n">command</span><span class="o">.</span>

<span class="n">S1</span><span class="p">(</span><span class="n">config</span><span class="p">)</span><span class="c1"># interface f0/24</span>
<span class="n">S1</span><span class="p">(</span><span class="n">config</span><span class="o">-</span><span class="k">if</span><span class="p">)</span><span class="c1"># switchport access vlan 30</span>
<span class="o">%</span> <span class="n">Access</span> <span class="n">VLAN</span> <span class="n">does</span> <span class="ow">not</span> <span class="n">exist</span><span class="o">.</span> <span class="n">Creating</span> <span class="n">vlan</span> <span class="mi">30</span>

<span class="n">Use</span> <span class="n">the</span> <span class="n">no</span> <span class="n">vlan</span> <span class="mi">30</span> <span class="n">command</span> <span class="n">to</span> <span class="n">remove</span> <span class="n">VLAN</span> <span class="mi">30</span> <span class="kn">from</span> <span class="nn">the</span> <span class="n">VLAN</span> <span class="n">database</span><span class="o">.</span>

<span class="n">S1</span><span class="p">(</span><span class="n">config</span><span class="p">)</span><span class="c1"># no vlan 30</span>
<span class="n">S1</span><span class="p">(</span><span class="n">config</span><span class="p">)</span><span class="c1"># end</span>

<span class="n">S1</span><span class="p">(</span><span class="n">config</span><span class="p">)</span><span class="c1"># interface Fa0/24</span>
<span class="n">S1</span><span class="p">(</span><span class="n">config</span><span class="o">-</span><span class="k">if</span><span class="p">)</span><span class="c1"># no switchport access vlan</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Current switch technology no longer requires that the vlan command be issued to add a VLAN to the database. By assigning an unknown VLAN to a port, the VLAN adds to the VLAN database.</p>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Before removing a VLAN from the database, it is recommended that you reassign all the ports assigned to that VLAN</p>
</div>
<p>Configuring Trunks</p>
<p>use the Dynamic Trunking Protocol (DTP) to allow it to negotiate the trunk mode. After this has been accomplished and verified, you will disable DTP on interface F0/1 and manually configure it as a trunk.</p>
<div class="code highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Set</span> <span class="n">F0</span><span class="o">/</span><span class="mi">1</span> <span class="n">on</span> <span class="n">S1</span> <span class="n">to</span> <span class="n">negotiate</span> <span class="n">trunk</span> <span class="n">mode</span>

<span class="n">S1</span><span class="p">(</span><span class="n">config</span><span class="p">)</span><span class="c1"># interface f0/1</span>
<span class="n">S1</span><span class="p">(</span><span class="n">config</span><span class="o">-</span><span class="k">if</span><span class="p">)</span><span class="c1"># switchport mode dynamic desirable</span>

<span class="n">Mar</span>  <span class="mi">1</span> <span class="mi">05</span><span class="p">:</span><span class="mi">07</span><span class="p">:</span><span class="mf">28.746</span><span class="p">:</span> <span class="o">%</span><span class="n">LINEPROTO</span><span class="o">-</span><span class="mi">5</span><span class="o">-</span><span class="n">UPDOWN</span><span class="p">:</span> <span class="n">Line</span> <span class="n">protocol</span> <span class="n">on</span> <span class="n">Interface</span> <span class="n">Vlan1</span><span class="p">,</span> <span class="n">changed</span>
<span class="n">state</span> <span class="n">to</span> <span class="n">down</span>
<span class="n">Mar</span>  <span class="mi">1</span> <span class="mi">05</span><span class="p">:</span><span class="mi">07</span><span class="p">:</span><span class="mf">29.744</span><span class="p">:</span> <span class="o">%</span><span class="n">LINEPROTO</span><span class="o">-</span><span class="mi">5</span><span class="o">-</span><span class="n">UPDOWN</span><span class="p">:</span> <span class="n">Line</span> <span class="n">protocol</span> <span class="n">on</span> <span class="n">Interface</span> <span class="n">FastEthernet0</span><span class="o">/</span><span class="mi">1</span><span class="p">,</span>
<span class="n">changed</span> <span class="n">state</span> <span class="n">to</span> <span class="n">down</span>
<span class="n">S1</span><span class="p">(</span><span class="n">config</span><span class="o">-</span><span class="k">if</span><span class="p">)</span><span class="c1">#</span>
<span class="n">Mar</span>  <span class="mi">1</span> <span class="mi">05</span><span class="p">:</span><span class="mi">07</span><span class="p">:</span><span class="mf">32.772</span><span class="p">:</span> <span class="o">%</span><span class="n">LINEPROTO</span><span class="o">-</span><span class="mi">5</span><span class="o">-</span><span class="n">UPDOWN</span><span class="p">:</span> <span class="n">Line</span> <span class="n">protocol</span> <span class="n">on</span> <span class="n">Interface</span> <span class="n">FastEthernet0</span><span class="o">/</span><span class="mi">1</span><span class="p">,</span>
<span class="n">changed</span> <span class="n">state</span> <span class="n">to</span> <span class="n">up</span>
<span class="n">S1</span><span class="p">(</span><span class="n">config</span><span class="o">-</span><span class="k">if</span><span class="p">)</span><span class="c1">#</span>
<span class="o">**</span><span class="n">Mar</span>  <span class="mi">1</span> <span class="mi">05</span><span class="p">:</span><span class="mi">08</span><span class="p">:</span><span class="mf">01.789</span><span class="p">:</span> <span class="o">%</span><span class="n">LINEPROTO</span><span class="o">-</span><span class="mi">5</span><span class="o">-</span><span class="n">UPDOWN</span><span class="p">:</span> <span class="n">Line</span> <span class="n">protocol</span> <span class="n">on</span> <span class="n">Interface</span> <span class="n">Vlan99</span><span class="p">,</span> <span class="n">changed</span>
<span class="n">state</span> <span class="n">to</span> <span class="n">up</span><span class="o">**</span>
<span class="n">Mar</span>  <span class="mi">1</span> <span class="mi">05</span><span class="p">:</span><span class="mi">08</span><span class="p">:</span><span class="mf">01.797</span><span class="p">:</span> <span class="o">%</span><span class="n">LINEPROTO</span><span class="o">-</span><span class="mi">5</span><span class="o">-</span><span class="n">UPDOWN</span><span class="p">:</span> <span class="n">Line</span> <span class="n">protocol</span> <span class="n">on</span> <span class="n">Interface</span> <span class="n">Vlan1</span><span class="p">,</span> <span class="n">changed</span>
<span class="n">state</span> <span class="n">to</span> <span class="n">up</span>
<span class="n">You</span> <span class="n">should</span> <span class="n">also</span> <span class="n">receive</span> <span class="n">link</span> <span class="n">status</span> <span class="n">messages</span> <span class="n">on</span> <span class="n">S2</span><span class="o">.</span>
<span class="n">S2</span><span class="c1">#</span>
<span class="n">Mar</span>  <span class="mi">1</span> <span class="mi">05</span><span class="p">:</span><span class="mi">07</span><span class="p">:</span><span class="mf">29.794</span><span class="p">:</span> <span class="o">%</span><span class="n">LINEPROTO</span><span class="o">-</span><span class="mi">5</span><span class="o">-</span><span class="n">UPDOWN</span><span class="p">:</span> <span class="n">Line</span> <span class="n">protocol</span> <span class="n">on</span> <span class="n">Interface</span> <span class="n">FastEthernet0</span><span class="o">/</span><span class="mi">1</span><span class="p">,</span>
<span class="n">changed</span> <span class="n">state</span> <span class="n">to</span> <span class="n">down</span>
<span class="n">S2</span><span class="c1">#</span>
<span class="n">Mar</span>  <span class="mi">1</span> <span class="mi">05</span><span class="p">:</span><span class="mi">07</span><span class="p">:</span><span class="mf">32.823</span><span class="p">:</span> <span class="o">%</span><span class="n">LINEPROTO</span><span class="o">-</span><span class="mi">5</span><span class="o">-</span><span class="n">UPDOWN</span><span class="p">:</span> <span class="n">Line</span> <span class="n">protocol</span> <span class="n">on</span> <span class="n">Interface</span> <span class="n">FastEthernet0</span><span class="o">/</span><span class="mi">1</span><span class="p">,</span>
<span class="n">changed</span> <span class="n">state</span> <span class="n">to</span> <span class="n">up</span>
<span class="n">S2</span><span class="c1">#</span>
<span class="n">Mar</span>  <span class="mi">1</span> <span class="mi">05</span><span class="p">:</span><span class="mi">08</span><span class="p">:</span><span class="mf">01.839</span><span class="p">:</span> <span class="o">%</span><span class="n">LINEPROTO</span><span class="o">-</span><span class="mi">5</span><span class="o">-</span><span class="n">UPDOWN</span><span class="p">:</span> <span class="n">Line</span> <span class="n">protocol</span> <span class="n">on</span> <span class="n">Interface</span> <span class="n">Vlan99</span><span class="p">,</span> <span class="n">changed</span>
<span class="n">state</span> <span class="n">to</span> <span class="n">up</span>
<span class="n">Mar</span>  <span class="mi">1</span> <span class="mi">05</span><span class="p">:</span><span class="mi">08</span><span class="p">:</span><span class="mf">01.850</span><span class="p">:</span> <span class="o">%</span><span class="n">LINEPROTO</span><span class="o">-</span><span class="mi">5</span><span class="o">-</span><span class="n">UPDOWN</span><span class="p">:</span> <span class="n">Line</span> <span class="n">protocol</span> <span class="n">on</span> <span class="n">Interface</span> <span class="n">Vlan1</span><span class="p">,</span> <span class="n">changed</span>
<span class="n">state</span> <span class="n">to</span> <span class="n">up</span>

<span class="n">on</span> <span class="n">S1</span> <span class="ow">and</span> <span class="n">S2</span><span class="o">.</span> <span class="n">Interface</span> <span class="n">F0</span><span class="o">/</span><span class="mi">1</span> <span class="ow">is</span> <span class="n">no</span> <span class="n">longer</span> <span class="n">assigned</span> <span class="n">to</span> <span class="n">VLAN</span> <span class="mf">1.</span>
<span class="n">Trunked</span> <span class="n">interfaces</span> <span class="n">are</span> <span class="ow">not</span> <span class="n">listed</span> <span class="ow">in</span> <span class="n">the</span> <span class="n">VLAN</span> <span class="n">table</span>

<span class="n">S1</span><span class="c1"># show vlan brief</span>
<span class="n">VLAN</span> <span class="n">Name</span>                             <span class="n">Status</span>    <span class="n">Ports</span>
<span class="o">----</span> <span class="o">--------------------------------</span> <span class="o">---------</span> <span class="o">-------------------------------</span>
<span class="mi">1</span>    <span class="n">default</span>                          <span class="n">active</span>    <span class="n">Fa0</span><span class="o">/</span><span class="mi">2</span><span class="p">,</span> <span class="n">Fa0</span><span class="o">/</span><span class="mi">3</span><span class="p">,</span> <span class="n">Fa0</span><span class="o">/</span><span class="mi">4</span><span class="p">,</span> <span class="n">Fa0</span><span class="o">/</span><span class="mi">5</span>


<span class="n">S1</span><span class="c1"># show interfaces trunk</span>
<span class="n">Port</span>        <span class="n">Mode</span>             <span class="n">Encapsulation</span>  <span class="n">Status</span>        <span class="n">Native</span> <span class="n">vlan</span>
<span class="n">Fa0</span><span class="o">/</span><span class="mi">1</span>       <span class="n">desirable</span>        <span class="mf">802.1</span><span class="n">q</span>         <span class="n">trunking</span>      <span class="mi">1</span>

<span class="n">Port</span>        <span class="n">Vlans</span> <span class="n">allowed</span> <span class="n">on</span> <span class="n">trunk</span>
<span class="n">Fa0</span><span class="o">/</span><span class="mi">1</span>       <span class="mi">1</span><span class="o">-</span><span class="mi">4094</span>

<span class="n">Port</span>        <span class="n">Vlans</span> <span class="n">allowed</span> <span class="ow">and</span> <span class="n">active</span> <span class="ow">in</span> <span class="n">management</span> <span class="n">domain</span>
<span class="n">Fa0</span><span class="o">/</span><span class="mi">1</span>       <span class="mi">1</span><span class="p">,</span><span class="mi">10</span><span class="p">,</span><span class="mi">20</span><span class="p">,</span><span class="mi">99</span>

<span class="n">Port</span>        <span class="n">Vlans</span> <span class="ow">in</span> <span class="n">spanning</span> <span class="n">tree</span> <span class="n">forwarding</span> <span class="n">state</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">pruned</span>
<span class="n">Fa0</span><span class="o">/</span><span class="mi">1</span>       <span class="mi">1</span><span class="p">,</span><span class="mi">10</span><span class="p">,</span><span class="mi">20</span><span class="p">,</span><span class="mi">99</span>

<span class="n">S2</span><span class="c1"># show interfaces trunk</span>
<span class="n">Port</span>        <span class="n">Mode</span>             <span class="n">Encapsulation</span>  <span class="n">Status</span>        <span class="n">Native</span> <span class="n">vlan</span>
<span class="n">Fa0</span><span class="o">/</span><span class="mi">1</span>       <span class="n">auto</span>             <span class="mf">802.1</span><span class="n">q</span>         <span class="n">trunking</span>      <span class="mi">1</span>
<span class="n">Port</span>        <span class="n">Vlans</span> <span class="n">allowed</span> <span class="n">on</span> <span class="n">trunk</span>
<span class="n">Fa0</span><span class="o">/</span><span class="mi">1</span>       <span class="mi">1</span><span class="o">-</span><span class="mi">4094</span>
<span class="n">Port</span>        <span class="n">Vlans</span> <span class="n">allowed</span> <span class="ow">and</span> <span class="n">active</span> <span class="ow">in</span> <span class="n">management</span> <span class="n">domain</span>
<span class="n">Fa0</span><span class="o">/</span><span class="mi">1</span>       <span class="mi">1</span><span class="p">,</span><span class="mi">10</span><span class="p">,</span><span class="mi">20</span><span class="p">,</span><span class="mi">99</span>
<span class="n">Port</span>        <span class="n">Vlans</span> <span class="ow">in</span> <span class="n">spanning</span> <span class="n">tree</span> <span class="n">forwarding</span> <span class="n">state</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">pruned</span>
<span class="n">Fa0</span><span class="o">/</span><span class="mi">1</span>       <span class="mi">1</span><span class="p">,</span><span class="mi">10</span><span class="p">,</span><span class="mi">20</span><span class="p">,</span><span class="mi">99</span>
</pre></div>
</div>
<div class="code highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Change</span> <span class="n">the</span> <span class="n">switchport</span> <span class="n">mode</span> <span class="n">on</span> <span class="n">interface</span> <span class="n">F0</span><span class="o">/</span><span class="mi">1</span> <span class="n">to</span> <span class="n">force</span> <span class="n">trunking</span><span class="o">.</span><span class="n">Make</span> <span class="n">sure</span> <span class="n">to</span> <span class="n">do</span> <span class="n">this</span> <span class="n">on</span> <span class="n">both</span> <span class="n">switches</span><span class="o">.</span>

<span class="n">S1</span><span class="p">(</span><span class="n">config</span><span class="p">)</span><span class="c1"># interface f0/1</span>
<span class="n">S1</span><span class="p">(</span><span class="n">config</span><span class="o">-</span><span class="k">if</span><span class="p">)</span><span class="c1"># switchport mode trunk</span>

<span class="n">Issue</span> <span class="n">the</span> <span class="n">show</span> <span class="n">interfaces</span> <span class="n">trunk</span> <span class="n">command</span> <span class="n">to</span> <span class="n">view</span> <span class="n">the</span> <span class="n">trunk</span> <span class="n">mode</span><span class="o">.</span> <span class="n">Notice</span> <span class="n">that</span> <span class="n">the</span> <span class="n">mode</span> <span class="n">changed</span> <span class="kn">from</span> <span class="nn">desirable</span> <span class="n">to</span> <span class="n">on</span><span class="o">.</span>

<span class="n">S2</span><span class="c1"># show interfaces trunk</span>
<span class="n">Port</span>        <span class="n">Mode</span>             <span class="n">Encapsulation</span>  <span class="n">Status</span>        <span class="n">Native</span> <span class="n">vlan</span>
<span class="n">Fa0</span><span class="o">/</span><span class="mi">1</span>       <span class="n">on</span>               <span class="mf">802.1</span><span class="n">q</span>         <span class="n">trunking</span>      <span class="mi">99</span>
<span class="n">Port</span>        <span class="n">Vlans</span> <span class="n">allowed</span> <span class="n">on</span> <span class="n">trunk</span>
<span class="n">Fa0</span><span class="o">/</span><span class="mi">1</span>       <span class="mi">1</span><span class="o">-</span><span class="mi">4094</span>
<span class="n">Port</span>        <span class="n">Vlans</span> <span class="n">allowed</span> <span class="ow">and</span> <span class="n">active</span> <span class="ow">in</span> <span class="n">management</span> <span class="n">domain</span>
<span class="n">Fa0</span><span class="o">/</span><span class="mi">1</span>       <span class="mi">1</span><span class="p">,</span><span class="mi">10</span><span class="p">,</span><span class="mi">20</span><span class="p">,</span><span class="mi">99</span>
<span class="n">Port</span>        <span class="n">Vlans</span> <span class="ow">in</span> <span class="n">spanning</span> <span class="n">tree</span> <span class="n">forwarding</span> <span class="n">state</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">pruned</span>
<span class="n">Fa0</span><span class="o">/</span><span class="mi">1</span>       <span class="mi">1</span><span class="p">,</span><span class="mi">10</span><span class="p">,</span><span class="mi">20</span><span class="p">,</span><span class="mi">99</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">By default, all VLANs are allowed on a trunk. The switchport trunk command allows you to control what VLANs have access to the trunk</p>
</div>
<p>Deleting the vlan</p>
<div class="code highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">S1</span><span class="c1"># show flash</span>
<span class="n">S1</span><span class="c1"># delete vlan.dat</span>
</pre></div>
</div>
</div>
<div class="section" id="troubleshooting-vlans">
<h2>Troubleshooting VLANS<a class="headerlink" href="#troubleshooting-vlans" title="Permalink to this headline">¶</a></h2>
<div class="section" id="ip-address-issue-vlan">
<h3>IP Address issue VLAN<a class="headerlink" href="#ip-address-issue-vlan" title="Permalink to this headline">¶</a></h3>
<p>Each VLAN must correspond to a unique IP subnet. If two devices in the same VLAN have different subnet addresses, they cannot communicate.</p>
</div>
<div class="section" id="missing-vlan">
<h3>Missing VLAN<a class="headerlink" href="#missing-vlan" title="Permalink to this headline">¶</a></h3>
<img alt="../../../_images/missing_vlan.png" src="../../../_images/missing_vlan.png" />
<p>Use the show vlan command to check whether the port belongs to the expected VLAN. If the port is assigned to the wrong VLAN, use the switchport access vlan command to correct the VLAN membership. Use the show mac address-table command to check which addresses were learned on a particular port of the switch, and to which VLAN that port is assigned, as show in Figure 2.</p>
<div class="code highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">S1</span><span class="c1">#show mac address-table</span>
          <span class="n">Mac</span> <span class="n">Address</span> <span class="n">Table</span>
<span class="o">-------------------------------------------</span>

<span class="n">Vlan</span>    <span class="n">Mac</span> <span class="n">Address</span>       <span class="n">Type</span>        <span class="n">Ports</span>
<span class="o">----</span>    <span class="o">-----------</span>       <span class="o">--------</span>    <span class="o">-----</span>

   <span class="mi">1</span>    <span class="mi">000</span><span class="n">a</span><span class="o">.</span><span class="n">f333</span><span class="o">.</span><span class="n">b702</span>    <span class="n">DYNAMIC</span>     <span class="n">Gig0</span><span class="o">/</span><span class="mi">2</span>
   <span class="mi">1</span>    <span class="mi">00</span><span class="n">d0</span><span class="o">.</span><span class="mf">5828.2501</span>    <span class="n">DYNAMIC</span>     <span class="n">Gig0</span><span class="o">/</span><span class="mi">1</span>
  <span class="mi">10</span>    <span class="mi">00</span><span class="n">d0</span><span class="o">.</span><span class="mf">5828.2501</span>    <span class="n">DYNAMIC</span>     <span class="n">Gig0</span><span class="o">/</span><span class="mi">1</span>
  <span class="mi">20</span>    <span class="mi">00</span><span class="n">d0</span><span class="o">.</span><span class="mf">5828.2501</span>    <span class="n">DYNAMIC</span>     <span class="n">Gig0</span><span class="o">/</span><span class="mi">1</span>
  <span class="mi">30</span>    <span class="mi">00</span><span class="n">d0</span><span class="o">.</span><span class="mf">5828.2501</span>    <span class="n">DYNAMIC</span>     <span class="n">Gig0</span><span class="o">/</span><span class="mi">1</span>
  <span class="mi">56</span>    <span class="mi">000</span><span class="n">a</span><span class="o">.</span><span class="n">f333</span><span class="o">.</span><span class="n">b702</span>    <span class="n">DYNAMIC</span>     <span class="n">Gig0</span><span class="o">/</span><span class="mi">2</span>
  <span class="mi">56</span>    <span class="mi">00</span><span class="n">d0</span><span class="o">.</span><span class="mf">5828.2501</span>    <span class="n">DYNAMIC</span>     <span class="n">Gig0</span><span class="o">/</span><span class="mi">1</span>
</pre></div>
</div>
<img alt="../../../_images/missing_vlan.png" src="../../../_images/missing_vlan.png" />
<p>If the VLAN to which the port is assigned is deleted, the port becomes inactive. The ports of a deleted VLAN will not be listed in the output of the show vlan command. Use the show interfaces switchport command to verify the inactive VLAN is assigned to the port</p>
<ul class="simple">
<li>show vlan</li>
<li>switchport access vlan</li>
<li>show mac address-table</li>
<li>show interfaces switchport</li>
<li>switchport access vlan</li>
<li>show interface f0/1 switchport</li>
<li>no switchport access vlan vlan-id</li>
</ul>
</div>
</div>
<div class="section" id="troubleshooting-trunks">
<h2>Troubleshooting Trunks<a class="headerlink" href="#troubleshooting-trunks" title="Permalink to this headline">¶</a></h2>
<p>most important command <code class="docutils literal notranslate"><span class="pre">show</span> <span class="pre">interfaces</span> <span class="pre">trunk</span></code></p>
<img alt="../../../_images/troubleshooting_trunks1.png" src="../../../_images/troubleshooting_trunks1.png" />
<img alt="../../../_images/troubleshooting_trunks2.png" src="../../../_images/troubleshooting_trunks2.png" />
<ul class="simple">
<li>Native VLAN mismatches - Trunk ports are configured with different native VLANs. This configuration error generates console notifications, and can cause inter-VLAN routing issues, among other problems. This poses a security risk.</li>
<li>Trunk mode mismatches - One trunk port is configured in a mode that is not compatible for trunking on the corresponding peer port. This configuration error causes the trunk link to stop working. Be sure both sides of the trunk are configured with the switchport mode trunk command. Other trunk configuration commands are beyond the scope of this course.</li>
<li>Allowed VLANs on trunks - The list of allowed VLANs on a trunk has not been updated with the current VLAN trunking requirements. In this situation, unexpected traffic (or no traffic) is being sent over the trunk.</li>
</ul>
<img alt="../../../_images/common_problems_trunks.png" src="../../../_images/common_problems_trunks.png" />
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">start troubleshooting by examining the trunks for a <strong>native VLAN mismatch</strong>. If that is not the cause, check for <strong>trunk mode mismatches</strong>, and finally check for the <strong>allowed VLAN list on the trunk</strong>.</p>
</div>
<p>Mismatched Port Modes</p>
<img alt="../../../_images/mismatched_port_modes.png" src="../../../_images/mismatched_port_modes.png" />
<p>fixed:</p>
<img alt="../../../_images/mismatched_port_modes_fixed.png" src="../../../_images/mismatched_port_modes_fixed.png" />
<p>fix incorrect vlan list with</p>
<p>e.g. <code class="docutils literal notranslate"><span class="pre">switchport</span> <span class="pre">trunk</span> <span class="pre">allowed</span> <span class="pre">vlan</span> <span class="pre">10,20,99</span></code></p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">make sure trunk port is in trunk mode not in access mode!</p>
</div>
<div class="code highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">S2</span><span class="p">(</span><span class="n">config</span><span class="o">-</span><span class="k">if</span><span class="p">)</span><span class="c1">#switchport mode trunk</span>

<span class="n">S2</span><span class="p">(</span><span class="n">config</span><span class="o">-</span><span class="k">if</span><span class="p">)</span><span class="c1">#</span>
<span class="o">%</span><span class="n">LINEPROTO</span><span class="o">-</span><span class="mi">5</span><span class="o">-</span><span class="n">UPDOWN</span><span class="p">:</span> <span class="n">Line</span> <span class="n">protocol</span> <span class="n">on</span> <span class="n">Interface</span> <span class="n">GigabitEthernet0</span><span class="o">/</span><span class="mi">1</span><span class="p">,</span> <span class="n">changed</span> <span class="n">state</span> <span class="n">to</span> <span class="n">down</span>
<span class="o">%</span><span class="n">LINEPROTO</span><span class="o">-</span><span class="mi">5</span><span class="o">-</span><span class="n">UPDOWN</span><span class="p">:</span> <span class="n">Line</span> <span class="n">protocol</span> <span class="n">on</span> <span class="n">Interface</span> <span class="n">GigabitEthernet0</span><span class="o">/</span><span class="mi">1</span><span class="p">,</span> <span class="n">changed</span> <span class="n">state</span> <span class="n">to</span> <span class="n">up</span>
</pre></div>
</div>
<div class="section" id="troubleshooting-vlans-2">
<h3>Troubleshooting Vlans 2<a class="headerlink" href="#troubleshooting-vlans-2" title="Permalink to this headline">¶</a></h3>
<p>Packet Tracer – Troubleshooting a VLAN Implementation Scenario 2
6.2.3.8
Addressing Table</p>
<table border="1" class="docutils">
<colgroup>
<col width="12%" />
<col width="17%" />
<col width="23%" />
<col width="23%" />
<col width="26%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Device</th>
<th class="head">Interface</th>
<th class="head">IPv4 Address</th>
<th class="head">Subnet Mask</th>
<th class="head">Default Gateway</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>S1</td>
<td>VLAN 56</td>
<td>192.168.56.11</td>
<td>255.255.255.0</td>
<td>N/A</td>
</tr>
<tr class="row-odd"><td>S2</td>
<td>VLAN 56</td>
<td>192.168.56.12</td>
<td>255.255.255.0</td>
<td>N/A</td>
</tr>
<tr class="row-even"><td>S3</td>
<td>VLAN 56</td>
<td>192.168.56.13</td>
<td>255.255.255.0</td>
<td>N/A</td>
</tr>
<tr class="row-odd"><td>PC1</td>
<td>NIC</td>
<td>192.168.10.21</td>
<td>255.255.255.0</td>
<td>192.168.10.1</td>
</tr>
<tr class="row-even"><td>PC2</td>
<td>NIC</td>
<td>192.168.20.22</td>
<td>255.255.255.0</td>
<td>192.168.20.1</td>
</tr>
<tr class="row-odd"><td>PC3</td>
<td>NIC</td>
<td>192.168.30.23</td>
<td>255.255.255.0</td>
<td>192.168.30.1</td>
</tr>
<tr class="row-even"><td>PC4</td>
<td>NIC</td>
<td>192.168.10.24</td>
<td>255.255.255.0</td>
<td>192.168.10.1</td>
</tr>
<tr class="row-odd"><td>PC5</td>
<td>NIC</td>
<td>192.168.20.25</td>
<td>255.255.255.0</td>
<td>192.168.20.1</td>
</tr>
<tr class="row-even"><td>PC6</td>
<td>NIC</td>
<td>192.168.30.26</td>
<td>255.255.255.0</td>
<td>192.168.30.1</td>
</tr>
</tbody>
</table>
<p>VLAN and Port Assignments</p>
<table border="1" class="docutils">
<colgroup>
<col width="25%" />
<col width="48%" />
<col width="28%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Ports</th>
<th class="head">VLAN Number - Name</th>
<th class="head">Network</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>F0/1 – F0/5</td>
<td>VLAN 56 – Management&amp;Native</td>
<td>192.168.56.0/24</td>
</tr>
<tr class="row-odd"><td>F0/6 – F0/10</td>
<td>VLAN 30 – Guest(Default)</td>
<td>192.168.30.0/24</td>
</tr>
<tr class="row-even"><td>F0/11 – F0/17</td>
<td>VLAN 10 – Faculty/Staff</td>
<td>192.168.10.0/24</td>
</tr>
<tr class="row-odd"><td>F0/18 – F0/24</td>
<td>VLAN 20 – Students</td>
<td>192.168.20.0/24</td>
</tr>
</tbody>
</table>
<img alt="../../../_images/troubleshooting_vlans2.png" src="../../../_images/troubleshooting_vlans2.png" />
<p>Switch 1</p>
<div class="code highlight-default notranslate"><div class="highlight"><pre><span></span>interface GigabitEthernet0/1
 switchport trunk native vlan 56
 switchport trunk allowed vlan 10,20,30,56
 switchport mode trunk
!
interface GigabitEthernet0/2
 switchport trunk native vlan 56
 switchport trunk allowed vlan 10,20,30,56
 switchport mode trunk
!
interface Vlan1
 no ip address
 shutdown
!
interface Vlan56
 mac-address 00d0.bc45.1b01
 ip address 192.168.56.11 255.255.255.0

S1#show vlan brief

VLAN Name                             Status    Ports
---- -------------------------------- --------- -------------------------------
1    default                          active    Fa0/1, Fa0/2, Fa0/3, Fa0/4
                                                Fa0/5, Fa0/6, Fa0/7, Fa0/8
                                                Fa0/9, Fa0/10, Fa0/11, Fa0/12
                                                Fa0/13, Fa0/14, Fa0/15, Fa0/16
                                                Fa0/17, Fa0/18, Fa0/19, Fa0/20
                                                Fa0/21, Fa0/22, Fa0/23, Fa0/24
10   Faculty/Staff                    active
20   Students                         active
30   Guest(Default)                   active
56   Management&amp;Native                active
1002 fddi-default                     active
1003 token-ring-default               active
1004 fddinet-default                  active
1005 trnet-default                    active
S1#show interfac
S1#show interfaces trunk
Port        Mode         Encapsulation  Status        Native vlan
Gig0/1      on           802.1q         trunking      56
Gig0/2      on           802.1q         trunking      56

Port        Vlans allowed on trunk
Gig0/1      10,20,30,56
Gig0/2      10,20,30,56

Port        Vlans allowed and active in management domain
Gig0/1      10,20,30,56
Gig0/2      10,20,30,56

Port        Vlans in spanning tree forwarding state and not pruned
Gig0/1      10,20,30,56
Gig0/2      10,20,30,56
</pre></div>
</div>
<p>Switch 2 &amp; 3</p>
<div class="code highlight-default notranslate"><div class="highlight"><pre><span></span>spanning-tree mode pvst
spanning-tree extend system-id
!
interface FastEthernet0/1
 switchport access vlan 56
 switchport mode access
!
interface FastEthernet0/2
 switchport access vlan 56
 switchport mode access
!
interface FastEthernet0/3
 switchport access vlan 56
 switchport mode access
!
interface FastEthernet0/4
 switchport access vlan 56
 switchport mode access
!
interface FastEthernet0/5
 switchport access vlan 56
 switchport mode access
!
interface FastEthernet0/6
 switchport access vlan 30
 switchport mode access
!
interface FastEthernet0/7
 switchport access vlan 30
 switchport mode access
!
interface FastEthernet0/8
 switchport access vlan 30
 switchport mode access
!
interface FastEthernet0/9
 switchport access vlan 30
 switchport mode access
!
interface FastEthernet0/10
 switchport access vlan 30
 switchport mode access
!
interface FastEthernet0/11
 switchport access vlan 10
 switchport mode access
!
interface FastEthernet0/12
 switchport access vlan 10
 switchport mode access
!
interface FastEthernet0/13
 switchport access vlan 10
 switchport mode access
!
interface FastEthernet0/14
 switchport access vlan 10
 switchport mode access
!
interface FastEthernet0/15
 switchport access vlan 10
 switchport mode access
!
interface FastEthernet0/16
 switchport access vlan 10
 switchport mode access
!
interface FastEthernet0/17
 switchport access vlan 10
 switchport mode access
!
interface FastEthernet0/18
 switchport access vlan 20
 switchport mode access
!
interface FastEthernet0/19
 switchport access vlan 20
 switchport mode access
!
interface FastEthernet0/20
 switchport access vlan 20
 switchport mode access
!
interface FastEthernet0/21
 switchport access vlan 20
 switchport mode access
!
interface FastEthernet0/22
 switchport access vlan 20
 switchport mode access
!
interface FastEthernet0/23
 switchport access vlan 20
 switchport mode access
!
interface FastEthernet0/24
 switchport access vlan 20
 switchport mode access
!
interface GigabitEthernet0/1
 switchport trunk native vlan 56
 switchport trunk allowed vlan 10,20,30,56
 switchport mode trunk
!
interface GigabitEthernet0/2
 switchport trunk native vlan 56
 switchport trunk allowed vlan 10,20,30,56
 switchport mode trunk
!
interface Vlan1
 no ip address
 shutdown
!
interface Vlan56
 mac-address 0002.1737.2201
 ip address 192.168.56.12 255.255.255.0

S2#show vlan

VLAN Name                             Status    Ports
---- -------------------------------- --------- -------------------------------
1    default                          active    Gig0/2
10   Faculty/Staff                    active    Fa0/11, Fa0/12, Fa0/13, Fa0/14
                                                Fa0/15, Fa0/16, Fa0/17
20   Students                         active    Fa0/18, Fa0/19, Fa0/20, Fa0/21
                                                Fa0/22, Fa0/23, Fa0/24
30   Guest(Default)                   active    Fa0/6, Fa0/7, Fa0/8, Fa0/9
                                                Fa0/10
56   Management&amp;Native                active    Fa0/1, Fa0/2, Fa0/3, Fa0/4
                                                Fa0/5
1002 fddi-default                     act/unsup
1003 token-ring-default               act/unsup
1004 fddinet-default                  act/unsup
1005 trnet-default                    act/unsup

VLAN Type  SAID       MTU   Parent RingNo BridgeNo Stp  BrdgMode Trans1 Trans2
---- ----- ---------- ----- ------ ------ -------- ---- -------- ------ ------
1    enet  100001     1500  -      -      -        -    -        0      0
10   enet  100010     1500  -      -      -        -    -        0      0
20   enet  100020     1500  -      -      -        -    -        0      0
30   enet  100030     1500  -      -      -        -    -        0      0
56   enet  100056     1500  -      -      -        -    -        0      0
1002 fddi  101002     1500  -      -      -        -    -        0      0
1003 tr    101003     1500  -      -      -        -    -        0      0
1004 fdnet 101004     1500  -      -      -        ieee -        0      0
1005 trnet 101005     1500  -      -      -        ibm  -        0      0

VLAN Type  SAID       MTU   Parent RingNo BridgeNo Stp  BrdgMode Trans1 Trans2
---- ----- ---------- ----- ------ ------ -------- ---- -------- ------ ------

Remote SPAN VLANs
------------------------------------------------------------------------------

Primary Secondary Type              Ports
------- --------- ----------------- ------------------------------------------

S2#show interfaces trunk
Port        Mode         Encapsulation  Status        Native vlan
Gig0/1      on           802.1q         trunking      56

Port        Vlans allowed on trunk
Gig0/1      10,20,30,56

Port        Vlans allowed and active in management domain
Gig0/1      10,20,30,56

Port        Vlans in spannin
</pre></div>
</div>
</div>
</div>
<div class="section" id="troubleshooting-vlan-trunk-bullet-points">
<h2>Troubleshooting vlan/trunk bullet points<a class="headerlink" href="#troubleshooting-vlan-trunk-bullet-points" title="Permalink to this headline">¶</a></h2>
<ul>
<li><p class="first">make sure management vlan has an ip address</p>
<div class="code highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">S2</span><span class="p">(</span><span class="n">config</span><span class="p">)</span><span class="c1">#interface vlan 56</span>
<span class="n">S2</span><span class="p">(</span><span class="n">config</span><span class="o">-</span><span class="k">if</span><span class="p">)</span><span class="c1">#ip address 192.168.56.12 255.255.255.0</span>
<span class="n">S2</span><span class="p">(</span><span class="n">config</span><span class="o">-</span><span class="k">if</span><span class="p">)</span><span class="c1">#no shutdown</span>
</pre></div>
</div>
</li>
<li><p class="first">check if trunks are configured correctly with</p>
<div class="code highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">S2</span><span class="c1">#show interfaces trunk</span>
<span class="o">------</span>      <span class="o">----</span>         <span class="o">------------</span>   <span class="o">------</span>        <span class="o">-----------</span>
<span class="n">Port</span>        <span class="n">Mode</span>         <span class="n">Encapsulation</span>  <span class="n">Status</span>        <span class="n">Native</span> <span class="n">vlan</span>
<span class="o">------</span>      <span class="o">----</span>         <span class="o">------------</span>   <span class="o">------</span>        <span class="o">-----------</span>
<span class="n">Gig0</span><span class="o">/</span><span class="mi">1</span>      <span class="n">on</span>           <span class="mf">802.1</span><span class="n">q</span>         <span class="n">trunking</span>      <span class="mi">56</span>

<span class="n">Port</span>        <span class="n">Vlans</span> <span class="n">allowed</span> <span class="n">on</span> <span class="n">trunk</span>
<span class="n">Gig0</span><span class="o">/</span><span class="mi">1</span>      <span class="mi">10</span><span class="p">,</span><span class="mi">20</span><span class="p">,</span><span class="mi">30</span><span class="p">,</span><span class="mi">56</span>

<span class="n">Port</span>        <span class="n">Vlans</span> <span class="n">allowed</span> <span class="ow">and</span> <span class="n">active</span> <span class="ow">in</span> <span class="n">management</span> <span class="n">domain</span>
<span class="n">Gig0</span><span class="o">/</span><span class="mi">1</span>      <span class="mi">10</span><span class="p">,</span><span class="mi">20</span><span class="p">,</span><span class="mi">30</span><span class="p">,</span><span class="mi">56</span>

<span class="n">Port</span>        <span class="n">Vlans</span> <span class="ow">in</span> <span class="n">spanning</span> <span class="n">tree</span> <span class="n">forwarding</span> <span class="n">state</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">pruned</span>
<span class="n">Gig0</span><span class="o">/</span><span class="mi">1</span>      <span class="mi">10</span><span class="p">,</span><span class="mi">20</span><span class="p">,</span><span class="mi">30</span><span class="p">,</span><span class="mi">56</span>
</pre></div>
</div>
</li>
<li><p class="first">set native vlan on trunk ports <code class="docutils literal notranslate"><span class="pre">switchport</span> <span class="pre">trunk</span> <span class="pre">native</span> <span class="pre">vlan</span> <span class="pre">56</span></code></p>
</li>
<li><p class="first">set to access ports and set their native vlan</p>
<div class="code highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">S2</span><span class="p">(</span><span class="n">config</span><span class="o">-</span><span class="k">if</span><span class="p">)</span><span class="c1">#interface range fastEthernet 0/1-24</span>
<span class="n">S2</span><span class="p">(</span><span class="n">config</span><span class="o">-</span><span class="k">if</span><span class="o">-</span><span class="nb">range</span><span class="p">)</span><span class="c1">#switchport mode access</span>
<span class="n">S2</span><span class="p">(</span><span class="n">config</span><span class="o">-</span><span class="k">if</span><span class="o">-</span><span class="nb">range</span><span class="p">)</span><span class="c1">#switchport native vlan 56</span>
<span class="n">S2</span><span class="p">(</span><span class="n">config</span><span class="o">-</span><span class="k">if</span><span class="o">-</span><span class="nb">range</span><span class="p">)</span><span class="c1">#no shutdown</span>
</pre></div>
</div>
</li>
<li><p class="first">set port as a trunk <code class="docutils literal notranslate"><span class="pre">switchport</span> <span class="pre">mode</span> <span class="pre">trunk</span></code></p>
</li>
<li><p class="first">set allowed vlans, including native <code class="docutils literal notranslate"><span class="pre">switchport</span> <span class="pre">trunk</span> <span class="pre">allowed</span> <span class="pre">vlan</span> <span class="pre">10,20,30,56</span></code></p>
</li>
<li><p class="first">configure access layer switch access ports with correct vlan</p>
<div class="code highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">S2</span><span class="p">(</span><span class="n">config</span><span class="p">)</span><span class="c1">#interface range fa0/6 - 10</span>
<span class="n">S2</span><span class="p">(</span><span class="n">config</span><span class="o">-</span><span class="k">if</span><span class="o">-</span><span class="nb">range</span><span class="p">)</span><span class="c1">#switchport access vlan 30</span>
<span class="n">S2</span><span class="p">(</span><span class="n">config</span><span class="o">-</span><span class="k">if</span><span class="o">-</span><span class="nb">range</span><span class="p">)</span><span class="c1">#interface range fa0/11 - 17</span>
<span class="n">S2</span><span class="p">(</span><span class="n">config</span><span class="o">-</span><span class="k">if</span><span class="o">-</span><span class="nb">range</span><span class="p">)</span><span class="c1">#switchport access vlan 10</span>
<span class="n">S2</span><span class="p">(</span><span class="n">config</span><span class="o">-</span><span class="k">if</span><span class="o">-</span><span class="nb">range</span><span class="p">)</span><span class="c1">#interface range fa0/18 - 24</span>
<span class="n">S2</span><span class="p">(</span><span class="n">config</span><span class="o">-</span><span class="k">if</span><span class="o">-</span><span class="nb">range</span><span class="p">)</span><span class="c1">#switchport access vlan 20</span>
</pre></div>
</div>
</li>
<li><p class="first">check if vlans are all assigned to the correct interface and vlan is active with <code class="docutils literal notranslate"><span class="pre">show</span> <span class="pre">vlan</span> <span class="pre">brief</span> <span class="pre">|</span> <span class="pre">id</span> <span class="pre">|</span> <span class="pre">name</span></code> command</p>
<div class="code highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">S2</span><span class="p">(</span><span class="n">config</span><span class="o">-</span><span class="k">if</span><span class="o">-</span><span class="nb">range</span><span class="p">)</span><span class="c1">#do show vlan brief</span>

<span class="n">VLAN</span> <span class="n">Name</span>                             <span class="n">Status</span>    <span class="n">Ports</span>
<span class="o">----</span> <span class="o">--------------------------------</span> <span class="o">---------</span> <span class="o">-------------------------------</span>
<span class="mi">1</span>    <span class="n">default</span>                          <span class="n">active</span>    <span class="n">Gig0</span><span class="o">/</span><span class="mi">2</span>
<span class="mi">10</span>   <span class="n">Faculty</span><span class="o">/</span><span class="n">Staff</span>                    <span class="n">active</span>    <span class="n">Fa0</span><span class="o">/</span><span class="mi">11</span><span class="p">,</span> <span class="n">Fa0</span><span class="o">/</span><span class="mi">12</span><span class="p">,</span> <span class="n">Fa0</span><span class="o">/</span><span class="mi">13</span><span class="p">,</span> <span class="n">Fa0</span><span class="o">/</span><span class="mi">14</span>
                                                <span class="n">Fa0</span><span class="o">/</span><span class="mi">15</span><span class="p">,</span> <span class="n">Fa0</span><span class="o">/</span><span class="mi">16</span><span class="p">,</span> <span class="n">Fa0</span><span class="o">/</span><span class="mi">17</span>
<span class="mi">20</span>   <span class="n">Students</span>                         <span class="n">active</span>    <span class="n">Fa0</span><span class="o">/</span><span class="mi">18</span><span class="p">,</span> <span class="n">Fa0</span><span class="o">/</span><span class="mi">19</span><span class="p">,</span> <span class="n">Fa0</span><span class="o">/</span><span class="mi">20</span><span class="p">,</span> <span class="n">Fa0</span><span class="o">/</span><span class="mi">21</span>
                                                <span class="n">Fa0</span><span class="o">/</span><span class="mi">22</span><span class="p">,</span> <span class="n">Fa0</span><span class="o">/</span><span class="mi">23</span><span class="p">,</span> <span class="n">Fa0</span><span class="o">/</span><span class="mi">24</span>
<span class="mi">30</span>   <span class="n">Guest</span><span class="p">(</span><span class="n">Default</span><span class="p">)</span>                   <span class="n">active</span>    <span class="n">Fa0</span><span class="o">/</span><span class="mi">6</span><span class="p">,</span> <span class="n">Fa0</span><span class="o">/</span><span class="mi">7</span><span class="p">,</span> <span class="n">Fa0</span><span class="o">/</span><span class="mi">8</span><span class="p">,</span> <span class="n">Fa0</span><span class="o">/</span><span class="mi">9</span>
                                                <span class="n">Fa0</span><span class="o">/</span><span class="mi">10</span>
<span class="mi">56</span>   <span class="n">Management</span><span class="o">&amp;</span><span class="n">Native</span>                <span class="n">active</span>    <span class="n">Fa0</span><span class="o">/</span><span class="mi">1</span><span class="p">,</span> <span class="n">Fa0</span><span class="o">/</span><span class="mi">2</span><span class="p">,</span> <span class="n">Fa0</span><span class="o">/</span><span class="mi">3</span><span class="p">,</span> <span class="n">Fa0</span><span class="o">/</span><span class="mi">4</span>
                                                <span class="n">Fa0</span><span class="o">/</span><span class="mi">5</span>
<span class="c1"># or check per vlan id or vlan name</span>
<span class="c1"># #################################</span>
<span class="n">S2</span><span class="c1">#show vlan id 56</span>
<span class="o">----</span> <span class="o">--------------------------------</span> <span class="o">---------</span> <span class="o">-------------------------------</span>
<span class="n">VLAN</span> <span class="n">Name</span>                             <span class="n">Status</span>    <span class="n">Ports</span>
<span class="o">----</span> <span class="o">--------------------------------</span> <span class="o">---------</span> <span class="o">-------------------------------</span>
<span class="mi">56</span>   <span class="n">Management</span><span class="o">&amp;</span><span class="n">Native</span>                <span class="n">active</span>    <span class="n">Fa0</span><span class="o">/</span><span class="mi">1</span><span class="p">,</span> <span class="n">Fa0</span><span class="o">/</span><span class="mi">2</span><span class="p">,</span> <span class="n">Fa0</span><span class="o">/</span><span class="mi">3</span><span class="p">,</span> <span class="n">Fa0</span><span class="o">/</span><span class="mi">4</span>
                                                <span class="n">Fa0</span><span class="o">/</span><span class="mi">5</span>

<span class="n">VLAN</span> <span class="n">Type</span>  <span class="n">SAID</span>       <span class="n">MTU</span>   <span class="n">Parent</span> <span class="n">RingNo</span> <span class="n">BridgeNo</span> <span class="n">Stp</span>  <span class="n">BrdgMode</span> <span class="n">Trans1</span> <span class="n">Trans2</span>
<span class="o">----</span> <span class="o">-----</span> <span class="o">----------</span> <span class="o">-----</span> <span class="o">------</span> <span class="o">------</span> <span class="o">--------</span> <span class="o">----</span> <span class="o">--------</span> <span class="o">------</span> <span class="o">------</span>
<span class="mi">56</span>   <span class="n">enet</span>  <span class="mi">100056</span>     <span class="mi">1500</span>  <span class="o">-</span>      <span class="o">-</span>      <span class="o">-</span>        <span class="o">-</span>    <span class="o">-</span>        <span class="mi">0</span>      <span class="mi">0</span>
</pre></div>
</div>
</li>
<li><p class="first">enable a vlan <code class="docutils literal notranslate"><span class="pre">interface</span> <span class="pre">vlan</span> <span class="pre">20</span></code></p>
</li>
</ul>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">You must hardcode <code class="docutils literal notranslate"><span class="pre">switchport</span> <span class="pre">mode</span> <span class="pre">access</span></code> on the ports that are not a trunk. This disables the Dynamic Trunking Protocol, so that’s 1 chance less of accidently creating a trunk. doublecheck via <code class="docutils literal notranslate"><span class="pre">show</span> <span class="pre">interfaces</span> <span class="pre">switchport</span></code> you’ll see negotiation is off.</p>
</div>
<div class="code highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">S1</span><span class="p">(</span><span class="n">config</span><span class="o">-</span><span class="k">if</span><span class="o">-</span><span class="nb">range</span><span class="p">)</span><span class="c1">#do show interface switchport</span>
<span class="n">Name</span><span class="p">:</span> <span class="n">Fa0</span><span class="o">/</span><span class="mi">1</span>
<span class="n">Switchport</span><span class="p">:</span> <span class="n">Enabled</span>
<span class="n">Administrative</span> <span class="n">Mode</span><span class="p">:</span> <span class="n">static</span> <span class="n">access</span>
<span class="n">Operational</span> <span class="n">Mode</span><span class="p">:</span> <span class="n">down</span>
<span class="n">Administrative</span> <span class="n">Trunking</span> <span class="n">Encapsulation</span><span class="p">:</span> <span class="n">dot1q</span>
<span class="n">Operational</span> <span class="n">Trunking</span> <span class="n">Encapsulation</span><span class="p">:</span> <span class="n">native</span>
<span class="o">**</span><span class="n">Negotiation</span> <span class="n">of</span> <span class="n">Trunking</span><span class="p">:</span> <span class="n">Off</span><span class="o">**</span>
<span class="n">Access</span> <span class="n">Mode</span> <span class="n">VLAN</span><span class="p">:</span> <span class="mi">56</span> <span class="p">(</span><span class="n">VLAN0056</span><span class="p">)</span>
<span class="n">Trunking</span> <span class="n">Native</span> <span class="n">Mode</span> <span class="n">VLAN</span><span class="p">:</span> <span class="mi">1</span> <span class="p">(</span><span class="n">default</span><span class="p">)</span>
<span class="n">Voice</span> <span class="n">VLAN</span><span class="p">:</span> <span class="n">none</span>
<span class="n">Administrative</span> <span class="n">private</span><span class="o">-</span><span class="n">vlan</span> <span class="n">host</span><span class="o">-</span><span class="n">association</span><span class="p">:</span> <span class="n">none</span>
<span class="n">Administrative</span> <span class="n">private</span><span class="o">-</span><span class="n">vlan</span> <span class="n">mapping</span><span class="p">:</span> <span class="n">none</span>
<span class="n">Administrative</span> <span class="n">private</span><span class="o">-</span><span class="n">vlan</span> <span class="n">trunk</span> <span class="n">native</span> <span class="n">VLAN</span><span class="p">:</span> <span class="n">none</span>
<span class="n">Administrative</span> <span class="n">private</span><span class="o">-</span><span class="n">vlan</span> <span class="n">trunk</span> <span class="n">encapsulation</span><span class="p">:</span> <span class="n">dot1q</span>
<span class="n">Administrative</span> <span class="n">private</span><span class="o">-</span><span class="n">vlan</span> <span class="n">trunk</span> <span class="n">normal</span> <span class="n">VLANs</span><span class="p">:</span> <span class="n">none</span>
<span class="n">Administrative</span> <span class="n">private</span><span class="o">-</span><span class="n">vlan</span> <span class="n">trunk</span> <span class="n">private</span> <span class="n">VLANs</span><span class="p">:</span> <span class="n">none</span>
<span class="n">Operational</span> <span class="n">private</span><span class="o">-</span><span class="n">vlan</span><span class="p">:</span> <span class="n">none</span>
<span class="n">Trunking</span> <span class="n">VLANs</span> <span class="n">Enabled</span><span class="p">:</span> <span class="n">All</span>
<span class="n">Pruning</span> <span class="n">VLANs</span> <span class="n">Enabled</span><span class="p">:</span> <span class="mi">2</span><span class="o">-</span><span class="mi">1001</span>
<span class="n">Capture</span> <span class="n">Mode</span> <span class="n">Disabled</span>
<span class="n">Capture</span> <span class="n">VLANs</span> <span class="n">Allowed</span><span class="p">:</span> <span class="n">ALL</span>
<span class="n">Protected</span><span class="p">:</span> <span class="n">false</span>
<span class="n">Unknown</span> <span class="n">unicast</span> <span class="n">blocked</span><span class="p">:</span> <span class="n">disabled</span>
<span class="n">Unknown</span> <span class="n">multicast</span> <span class="n">blocked</span><span class="p">:</span> <span class="n">disabled</span>
<span class="n">Appliance</span> <span class="n">trust</span><span class="p">:</span> <span class="n">none</span>
</pre></div>
</div>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">Watch out for unnamed vlans! Easily overlooked :)</p>
</div>
<div class="code highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">S1</span><span class="p">(</span><span class="n">config</span><span class="p">)</span><span class="c1">#do show vlan</span>

<span class="n">VLAN</span> <span class="n">Name</span>                             <span class="n">Status</span>    <span class="n">Ports</span>
<span class="o">----</span> <span class="o">--------------------------------</span> <span class="o">---------</span> <span class="o">-------------------------------</span>
<span class="mi">1</span>    <span class="n">default</span>                          <span class="n">active</span>
<span class="mi">10</span>   <span class="n">VLAN0010</span>                         <span class="n">active</span>    <span class="n">Fa0</span><span class="o">/</span><span class="mi">11</span><span class="p">,</span> <span class="n">Fa0</span><span class="o">/</span><span class="mi">12</span><span class="p">,</span> <span class="n">Fa0</span><span class="o">/</span><span class="mi">13</span><span class="p">,</span> <span class="n">Fa0</span><span class="o">/</span><span class="mi">14</span>
                                                <span class="n">Fa0</span><span class="o">/</span><span class="mi">15</span><span class="p">,</span> <span class="n">Fa0</span><span class="o">/</span><span class="mi">16</span><span class="p">,</span> <span class="n">Fa0</span><span class="o">/</span><span class="mi">17</span>
<span class="mi">20</span>   <span class="n">VLAN0020</span>                         <span class="n">active</span>    <span class="n">Fa0</span><span class="o">/</span><span class="mi">18</span><span class="p">,</span> <span class="n">Fa0</span><span class="o">/</span><span class="mi">19</span><span class="p">,</span> <span class="n">Fa0</span><span class="o">/</span><span class="mi">20</span><span class="p">,</span> <span class="n">Fa0</span><span class="o">/</span><span class="mi">21</span>
                                                <span class="n">Fa0</span><span class="o">/</span><span class="mi">22</span><span class="p">,</span> <span class="n">Fa0</span><span class="o">/</span><span class="mi">23</span><span class="p">,</span> <span class="n">Fa0</span><span class="o">/</span><span class="mi">24</span>
<span class="mi">30</span>   <span class="n">VLAN0030</span>                         <span class="n">active</span>    <span class="n">Fa0</span><span class="o">/</span><span class="mi">6</span><span class="p">,</span> <span class="n">Fa0</span><span class="o">/</span><span class="mi">7</span><span class="p">,</span> <span class="n">Fa0</span><span class="o">/</span><span class="mi">8</span><span class="p">,</span> <span class="n">Fa0</span><span class="o">/</span><span class="mi">9</span>
                                                <span class="n">Fa0</span><span class="o">/</span><span class="mi">10</span>
<span class="mi">56</span>   <span class="n">VLAN0056</span>                         <span class="n">active</span>    <span class="n">Fa0</span><span class="o">/</span><span class="mi">1</span><span class="p">,</span> <span class="n">Fa0</span><span class="o">/</span><span class="mi">2</span><span class="p">,</span> <span class="n">Fa0</span><span class="o">/</span><span class="mi">3</span><span class="p">,</span> <span class="n">Fa0</span><span class="o">/</span><span class="mi">4</span>
                                                <span class="n">Fa0</span><span class="o">/</span><span class="mi">5</span>
<span class="mi">1002</span> <span class="n">fddi</span><span class="o">-</span><span class="n">default</span>                     <span class="n">act</span><span class="o">/</span><span class="n">unsup</span>
<span class="mi">1003</span> <span class="n">token</span><span class="o">-</span><span class="n">ring</span><span class="o">-</span><span class="n">default</span>               <span class="n">act</span><span class="o">/</span><span class="n">unsup</span>
<span class="mi">1004</span> <span class="n">fddinet</span><span class="o">-</span><span class="n">default</span>                  <span class="n">act</span><span class="o">/</span><span class="n">unsup</span>
<span class="mi">1005</span> <span class="n">trnet</span><span class="o">-</span><span class="n">default</span>                    <span class="n">act</span><span class="o">/</span><span class="n">unsup</span>

<span class="n">S2</span><span class="p">(</span><span class="n">config</span><span class="o">-</span><span class="k">if</span><span class="p">)</span><span class="c1">#do show vlan</span>

<span class="n">VLAN</span> <span class="n">Name</span>                             <span class="n">Status</span>    <span class="n">Ports</span>
<span class="o">----</span> <span class="o">--------------------------------</span> <span class="o">---------</span> <span class="o">-------------------------------</span>
<span class="mi">1</span>    <span class="n">default</span>                          <span class="n">active</span>    <span class="n">Gig0</span><span class="o">/</span><span class="mi">2</span>
<span class="mi">10</span>   <span class="n">Faculty</span><span class="o">/</span><span class="n">Staff</span>                    <span class="n">active</span>    <span class="n">Fa0</span><span class="o">/</span><span class="mi">11</span><span class="p">,</span> <span class="n">Fa0</span><span class="o">/</span><span class="mi">12</span><span class="p">,</span> <span class="n">Fa0</span><span class="o">/</span><span class="mi">13</span><span class="p">,</span> <span class="n">Fa0</span><span class="o">/</span><span class="mi">14</span>
                                                <span class="n">Fa0</span><span class="o">/</span><span class="mi">15</span><span class="p">,</span> <span class="n">Fa0</span><span class="o">/</span><span class="mi">16</span><span class="p">,</span> <span class="n">Fa0</span><span class="o">/</span><span class="mi">17</span>
<span class="mi">20</span>   <span class="n">Students</span>                         <span class="n">active</span>    <span class="n">Fa0</span><span class="o">/</span><span class="mi">18</span><span class="p">,</span> <span class="n">Fa0</span><span class="o">/</span><span class="mi">19</span><span class="p">,</span> <span class="n">Fa0</span><span class="o">/</span><span class="mi">20</span><span class="p">,</span> <span class="n">Fa0</span><span class="o">/</span><span class="mi">21</span>
                                                <span class="n">Fa0</span><span class="o">/</span><span class="mi">22</span><span class="p">,</span> <span class="n">Fa0</span><span class="o">/</span><span class="mi">23</span><span class="p">,</span> <span class="n">Fa0</span><span class="o">/</span><span class="mi">24</span>
<span class="mi">30</span>   <span class="n">Guest</span><span class="p">(</span><span class="n">Default</span><span class="p">)</span>                   <span class="n">active</span>    <span class="n">Fa0</span><span class="o">/</span><span class="mi">6</span><span class="p">,</span> <span class="n">Fa0</span><span class="o">/</span><span class="mi">7</span><span class="p">,</span> <span class="n">Fa0</span><span class="o">/</span><span class="mi">8</span><span class="p">,</span> <span class="n">Fa0</span><span class="o">/</span><span class="mi">9</span>
                                                <span class="n">Fa0</span><span class="o">/</span><span class="mi">10</span>
<span class="mi">56</span>   <span class="n">Management</span><span class="o">&amp;</span><span class="n">Native</span>                <span class="n">active</span>    <span class="n">Fa0</span><span class="o">/</span><span class="mi">1</span><span class="p">,</span> <span class="n">Fa0</span><span class="o">/</span><span class="mi">2</span><span class="p">,</span> <span class="n">Fa0</span><span class="o">/</span><span class="mi">3</span><span class="p">,</span> <span class="n">Fa0</span><span class="o">/</span><span class="mi">4</span>
                                                <span class="n">Fa0</span><span class="o">/</span><span class="mi">5</span>

<span class="n">solution</span>
<span class="c1">#########</span>
<span class="n">S1</span><span class="p">(</span><span class="n">config</span><span class="p">)</span><span class="c1">#vlan 10</span>
<span class="n">S1</span><span class="p">(</span><span class="n">config</span><span class="o">-</span><span class="n">vlan</span><span class="p">)</span><span class="c1">#name Faculty/Staff</span>
<span class="n">S1</span><span class="p">(</span><span class="n">config</span><span class="o">-</span><span class="n">vlan</span><span class="p">)</span><span class="c1">#vlan 20</span>
<span class="n">S1</span><span class="p">(</span><span class="n">config</span><span class="o">-</span><span class="n">vlan</span><span class="p">)</span><span class="c1">#name Students</span>
<span class="n">S1</span><span class="p">(</span><span class="n">config</span><span class="o">-</span><span class="n">vlan</span><span class="p">)</span><span class="c1">#vlan 30</span>
<span class="n">S1</span><span class="p">(</span><span class="n">config</span><span class="o">-</span><span class="n">vlan</span><span class="p">)</span><span class="c1">#name Guest(Default)</span>
<span class="n">S1</span><span class="p">(</span><span class="n">config</span><span class="o">-</span><span class="n">vlan</span><span class="p">)</span><span class="c1">#vlan 56</span>
<span class="n">S1</span><span class="p">(</span><span class="n">config</span><span class="o">-</span><span class="n">vlan</span><span class="p">)</span><span class="c1">#name Management&amp;Native</span>
</pre></div>
</div>
</div>
<div class="section" id="vlan-command-summary-table">
<h2>VLAN Command Summary Table<a class="headerlink" href="#vlan-command-summary-table" title="Permalink to this headline">¶</a></h2>
<table border="1" class="docutils">
<colgroup>
<col width="29%" />
<col width="71%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Command</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>vtp mode [server - client - transparent]</td>
<td>In global configuration mode, this command sets the operational VTP mode for the switch.</td>
</tr>
<tr class="row-odd"><td>&#160;</td>
<td>The default is server.</td>
</tr>
<tr class="row-even"><td>vtp domain name</td>
<td>In global configuration mode, this command assigns a VTP domain name,</td>
</tr>
<tr class="row-odd"><td>&#160;</td>
<td>which allows the switch to send VTP advertisements out trunk links.</td>
</tr>
<tr class="row-even"><td>&#160;</td>
<td>The default is NULL, which would allow a switch to join the first domain it received an update from.</td>
</tr>
<tr class="row-odd"><td>show vtp status</td>
<td>Displays VTP status information including configuration revision number, domain name, and switch mode.</td>
</tr>
<tr class="row-even"><td>switchport mode [trunk-access-dynamic</td>
<td>In interface configuration mode, this configures the behavior of the interface.</td>
</tr>
<tr class="row-odd"><td>[desirable-auto-nonegotiate]]</td>
<td>Trunk mode will force frame tagging. Dynamic mode can become a trunk if  it negotiates</td>
</tr>
<tr class="row-even"><td>&#160;</td>
<td>with the other side of the link. Access mode is a nontrunk port.</td>
</tr>
<tr class="row-odd"><td>switchport trunk encapsulation dot1q</td>
<td>Used in interface configuration mode to specify a trunking protocol. For some switches,</td>
</tr>
<tr class="row-even"><td>&#160;</td>
<td>before you can set an interface to trunk mode, you must first specify the encapsulation.</td>
</tr>
<tr class="row-odd"><td>show interface [type module/port] trunk</td>
<td>Displays trunking information about the active or specified trunk links on the switch.</td>
</tr>
<tr class="row-even"><td>show interface [type mod/port] switchport</td>
<td>Displays Layer 2 configuration and operational parameters of the switch.</td>
</tr>
<tr class="row-odd"><td>&#160;</td>
<td>This includes VLAN membership and trunking status.</td>
</tr>
<tr class="row-even"><td>vlan number</td>
<td>In global configuration mode, this command defines a VLAN</td>
</tr>
<tr class="row-odd"><td>&#160;</td>
<td>and puts the switch into VLAN configuration mode. In VLAN configuration mode,</td>
</tr>
<tr class="row-even"><td>&#160;</td>
<td>commands such as name can be used to further define the VLAN.</td>
</tr>
<tr class="row-odd"><td>show vlan [id vlan#]</td>
<td>Displays VLAN information. The id option allows you to specify a particular VLAN.</td>
</tr>
<tr class="row-even"><td>switchport access vlan [1-4096 / dynamic]</td>
<td>In interface configuration mode, this command assigns an access port to a VLAN</td>
</tr>
<tr class="row-odd"><td>&#160;</td>
<td>or makes it a dynamic port.</td>
</tr>
<tr class="row-even"><td>show vlan brief</td>
<td>Displays a brief table of the VLANs, including the port membership for each VLAN.</td>
</tr>
<tr class="row-odd"><td>show spanning-tree [vlan number]</td>
<td>Displays Spanning Tree information for the switch or a VLAN if the vlan option is used.</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="inter-vlan-routing">
<h2>Inter-VLAN Routing<a class="headerlink" href="#inter-vlan-routing" title="Permalink to this headline">¶</a></h2>
<img alt="../../../_images/what_is_intervlan_routing.png" src="../../../_images/what_is_intervlan_routing.png" />
<p>A VLAN is a broadcast domain, so computers on separate VLANs are unable to communicate without the intervention of a routing device. Layer 2 switches have very limited IPv4 and IPv6 functionality and cannot perform the dynamic routing function of routers. While Layer 2 switches are gaining more IP functionality, such as the ability to perform static routing, this is insufficient to handle these large number of VLANs.</p>
<p>Any device that supports Layer 3 routing, such as a router or a multilayer switch, can be used to perform the necessary routing functionality. Regardless of the device used, the process of forwarding network traffic from one VLAN to another VLAN using routing is known as inter-VLAN routing.</p>
<dl class="docutils">
<dt>There are three options for inter-VLAN routing:</dt>
<dd><ul class="first last simple">
<li><dl class="first docutils">
<dt>Legacy inter-VLAN routing:</dt>
<dd>The switch ports connected to the router are placed in access mode and each physical interface is assigned to a different VLAN. Each router interface can then accept traffic from the VLAN associated with the switch interface that it is connected to, and traffic can be routed to the other VLANs connected to the other interfaces.</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Router-on-a-Stick:</dt>
<dd>The router interface is configured to operate as a trunk link and is connected to a switch port that is configured in trunk mode. The router performs inter-VLAN routing by accepting VLAN-tagged traffic on the trunk interface coming from the adjacent switch, and then, internally routing between the VLANs using subinterfaces. The router then forwards the routed traffic, VLAN-tagged for the destination VLAN, out the same physical interface as it used to receive the traffic</dd>
</dl>
</li>
<li>Layer 3 switching using SVI’s</li>
</ul>
</dd>
</dl>
<div class="section" id="legacy-intervlan-routing">
<h3>legacy intervlan routing<a class="headerlink" href="#legacy-intervlan-routing" title="Permalink to this headline">¶</a></h3>
<img alt="../../../_images/legacy_intervlan_routing.png" src="../../../_images/legacy_intervlan_routing.png" />
<p>Router R1 has a separate interface configured for each of the VLANs.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">This method of inter-VLAN routing is not efficient and is generally no longer implemented in switched networks. It is shown in this course for explanation purposes only.</p>
</div>
<p>Devices use their default gateway as the Layer 2 destination for all traffic that must leave the local subnet. The default gateway is the route that the device uses when it has no other explicitly defined route to the destination network. The IPv4 address of the router interface on the local subnet acts as the default gateway for the sending device.</p>
<p>When the source device has determined that the packet must travel through the local router interface on the connected VLAN, the source device sends out an ARP request to determine the MAC address of the local router interface. When the router sends its ARP reply back to the source device, the source device can use the MAC address to finish framing the packet before it sends it out on the network as unicast traffic.</p>
<p>Because the Ethernet frame has the destination MAC address of the router interface, the switch knows exactly which switch port to forward the unicast traffic out of to reach the router interface for that VLAN. When the frame arrives at the router, the router removes the source and destination MAC address information to examine the destination IPv4 address of the packet. The router compares the destination address to entries in its routing table to determine where it needs to forward the data to reach its final destination. If the router determines that the destination network is a locally connected network, as is the case with inter-VLAN routing, the router sends an ARP request out the interface that is physically connected to the destination VLAN. The destination device responds back to the router with its MAC address, which the router then uses to frame the packet. The router then sends the unicast traffic to the switch, which forwards it out the port where the destination device is connected.</p>
<div class="section" id="lab-configuration">
<h4>Lab configuration<a class="headerlink" href="#lab-configuration" title="Permalink to this headline">¶</a></h4>
<img alt="../../../_images/configure_legacy_intervlanning.png" src="../../../_images/configure_legacy_intervlanning.png" />
<table border="1" class="docutils">
<colgroup>
<col width="12%" />
<col width="18%" />
<col width="22%" />
<col width="22%" />
<col width="26%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Device</th>
<th class="head">Interface</th>
<th class="head">IP Address</th>
<th class="head">Subnet Mask</th>
<th class="head">Default Gateway,</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>R1</td>
<td>G0/0</td>
<td>192.168.20.1</td>
<td>255.255.255.0</td>
<td>N/A</td>
</tr>
<tr class="row-odd"><td>G0/1</td>
<td>192.168.10</td>
<td>.1</td>
<td>255.255.255.0</td>
<td>N/A</td>
</tr>
<tr class="row-even"><td>S1</td>
<td>VLAN 10</td>
<td>192.168.10.11</td>
<td>255.255.255.0</td>
<td>192.168.10.1</td>
</tr>
<tr class="row-odd"><td>S2</td>
<td>VLAN 10</td>
<td>192.168.10.12</td>
<td>255.255.255.0</td>
<td>192.168.10.1</td>
</tr>
<tr class="row-even"><td>PC-A</td>
<td>NIC</td>
<td>192.168.10.3</td>
<td>255.255.255.0</td>
<td>192.168.10.1</td>
</tr>
<tr class="row-odd"><td>PC-B</td>
<td>NIC</td>
<td>192.168.20.3</td>
<td>255.255.255.0</td>
<td>192.168.20.1</td>
</tr>
</tbody>
</table>
<ul class="simple">
<li><strong>of the switch</strong></li>
</ul>
<div class="code highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">S1</span><span class="p">(</span><span class="n">config</span><span class="p">)</span><span class="c1"># vlan 10</span>
<span class="n">S1</span><span class="p">(</span><span class="n">config</span><span class="o">-</span><span class="n">vlan</span><span class="p">)</span><span class="c1"># name students</span>
<span class="n">S1</span><span class="p">(</span><span class="n">config</span><span class="o">-</span><span class="n">vlan</span><span class="p">)</span><span class="c1"># vlan 30</span>
<span class="n">S1</span><span class="p">(</span><span class="n">config</span><span class="o">-</span><span class="n">vlan</span><span class="p">)</span><span class="c1"># name lolcats</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Use the vlan vlan_id global configuration mode command to create VLANs. In this example, VLANs 10 and 30 were created on switch S1.</p>
</div>
<div class="code highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">S1</span><span class="p">(</span><span class="n">config</span><span class="p">)</span><span class="c1"># interface f0/11</span>
<span class="n">S1</span><span class="p">(</span><span class="n">config</span><span class="o">-</span><span class="k">if</span><span class="p">)</span><span class="c1"># switchport access vlan 10</span>
<span class="n">S1</span><span class="p">(</span><span class="n">config</span><span class="o">-</span><span class="k">if</span><span class="p">)</span><span class="c1"># interface f0/4</span>
<span class="n">S1</span><span class="p">(</span><span class="n">config</span><span class="o">-</span><span class="k">if</span><span class="p">)</span><span class="c1"># switchport access vlan 10</span>
<span class="n">S1</span><span class="p">(</span><span class="n">config</span><span class="o">-</span><span class="k">if</span><span class="p">)</span><span class="c1"># interface f0/6</span>
<span class="n">S1</span><span class="p">(</span><span class="n">config</span><span class="o">-</span><span class="k">if</span><span class="p">)</span><span class="c1"># switchport access vlan 30</span>
<span class="n">S1</span><span class="p">(</span><span class="n">config</span><span class="o">-</span><span class="k">if</span><span class="p">)</span><span class="c1"># interface f0/5</span>
<span class="n">S1</span><span class="p">(</span><span class="n">config</span><span class="o">-</span><span class="k">if</span><span class="p">)</span><span class="c1"># switchport access vlan 30</span>
<span class="n">S1</span><span class="p">(</span><span class="n">config</span><span class="o">-</span><span class="k">if</span><span class="p">)</span><span class="c1"># exit</span>
<span class="n">S1</span><span class="p">(</span><span class="n">config</span><span class="p">)</span><span class="c1"># ip default-gateway 172.17.10.1</span>
<span class="n">S1</span><span class="p">(</span><span class="n">config</span><span class="p">)</span><span class="c1"># exit</span>
<span class="n">S1</span><span class="c1"># copy running-config startup-config</span>
</pre></div>
</div>
<ul class="simple">
<li><strong>of the router</strong></li>
</ul>
<div class="code highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">R1</span><span class="p">(</span><span class="n">config</span><span class="p">)</span><span class="c1"># interface g0/0</span>
<span class="n">R1</span><span class="p">(</span><span class="n">config</span><span class="o">-</span><span class="k">if</span><span class="p">)</span><span class="c1"># ip address 172.17.10.1 255.255.255.0</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="router-on-a-stick-intervlan-routing">
<h3>router-on-a-stick intervlan routing<a class="headerlink" href="#router-on-a-stick-intervlan-routing" title="Permalink to this headline">¶</a></h3>
<img alt="../../../_images/router_on_a_stick_intervlanning.png" src="../../../_images/router_on_a_stick_intervlanning.png" />
<p>Subinterfaces are configured for different subnets corresponding to their VLAN assignment to facilitate logical routing. After a routing decision is made based on the destination VLAN, the data frames are VLAN-tagged and sent back out the physical interface.</p>
<ol class="arabic simple">
<li>PC1 on VLAN 10 is communicating with PC3 on VLAN 30 through router R1 using a single, physical router interface.</li>
<li>PC1 sends its unicast traffic to switch S2.</li>
<li>Switch S2 then tags the unicast traffic as originating on VLAN 10 and forwards the unicast traffic out its trunk link to switch S1.</li>
<li>Switch S1 forwards the tagged traffic out the other trunk interface on port F0/3 to the interface on router R1.</li>
<li>Router R1 accepts the tagged unicast traffic on VLAN 10 and routes it to VLAN 30 using its configured subinterfaces.</li>
<li>The unicast traffic is tagged with VLAN 30 as it is sent out the router interface to switch S1.</li>
<li>Switch S1 forwards the tagged unicast traffic out the other trunk link to switch S2.</li>
<li>Switch S2 removes the VLAN tag of the unicast frame and forwards the frame out to PC3 on port F0/23.</li>
</ol>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The router-on-a-stick method of inter-VLAN routing does not scale beyond 50 VLANs.</p>
</div>
</div>
<div class="section" id="multilayer-switch-intervlanning">
<h3>multilayer switch intervlanning<a class="headerlink" href="#multilayer-switch-intervlanning" title="Permalink to this headline">¶</a></h3>
<img alt="../../../_images/multilayer_switch_intervlanning.png" src="../../../_images/multilayer_switch_intervlanning.png" />
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">outside the scope of course for now..</p>
</div>
</div>
</div>
<div class="section" id="inter-vlan-routing-challenge">
<h2>Inter-VLAN Routing Challenge<a class="headerlink" href="#inter-vlan-routing-challenge" title="Permalink to this headline">¶</a></h2>
<p>Packet Tracer – Inter-VLAN Routing Challenge|Topology|
Addressing Table</p>
<table border="1" class="docutils">
<colgroup>
<col width="12%" />
<col width="16%" />
<col width="21%" />
<col width="25%" />
<col width="25%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Device</th>
<th class="head">Interface</th>
<th class="head">IP Address</th>
<th class="head">Subnet Mask</th>
<th class="head">Default Gateway</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>&#160;</td>
<td>G0/0</td>
<td>172.17.25.2</td>
<td>255.255.255.252</td>
<td>N/A</td>
</tr>
<tr class="row-odd"><td>&#160;</td>
<td>G0/1.10</td>
<td>172.17.10.1</td>
<td>255.255.255.0</td>
<td>N/A</td>
</tr>
<tr class="row-even"><td>&#160;</td>
<td>G0/1.20</td>
<td>172.17.20.1</td>
<td>255.255.255.0</td>
<td>N/A</td>
</tr>
<tr class="row-odd"><td>R1</td>
<td>G0/1.30</td>
<td>172.17.30.1</td>
<td>255.255.255.0</td>
<td>N/A</td>
</tr>
<tr class="row-even"><td>&#160;</td>
<td>G0/1.88</td>
<td>172.17.88.1</td>
<td>255.255.255.0</td>
<td>N/A</td>
</tr>
<tr class="row-odd"><td>&#160;</td>
<td>G0/1.99</td>
<td>172.17.99.1</td>
<td>255.255.255.0</td>
<td>N/A</td>
</tr>
<tr class="row-even"><td>S1</td>
<td>VLAN 99</td>
<td>172.17.99.10</td>
<td>255.255.255.0</td>
<td>172.17.99.1</td>
</tr>
<tr class="row-odd"><td>PC1</td>
<td>NIC</td>
<td>172.17.10.21</td>
<td>255.255.255.0</td>
<td>172.17.10.1</td>
</tr>
<tr class="row-even"><td>PC2</td>
<td>NIC</td>
<td>172.17.20.22</td>
<td>255.255.255.0</td>
<td>172.17.20.1</td>
</tr>
<tr class="row-odd"><td>PC3</td>
<td>NIC</td>
<td>172.17.30.23</td>
<td>255.255.255.0</td>
<td>172.17.30.1</td>
</tr>
</tbody>
</table>
<p>VLAN and Port Assignments Table</p>
<table border="1" class="docutils">
<colgroup>
<col width="16%" />
<col width="5%" />
<col width="43%" />
<col width="5%" />
<col width="30%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">VLAN</th>
<th class="head">&#160;</th>
<th class="head">Name</th>
<th class="head">&#160;</th>
<th class="head">Interface</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>10</td>
<td>&#160;</td>
<td>Faculty/Staff</td>
<td>&#160;</td>
<td>Fa0/11-17</td>
</tr>
<tr class="row-odd"><td>20</td>
<td>&#160;</td>
<td>Students</td>
<td>&#160;</td>
<td>Fa0/18-24</td>
</tr>
<tr class="row-even"><td>30</td>
<td>&#160;</td>
<td>Guest(Default)</td>
<td>&#160;</td>
<td>Fa0/6-10</td>
</tr>
<tr class="row-odd"><td>88</td>
<td>&#160;</td>
<td>Native</td>
<td>&#160;</td>
<td>G0/1</td>
</tr>
<tr class="row-even"><td>99</td>
<td>&#160;</td>
<td>Management</td>
<td>&#160;</td>
<td>VLAN 99</td>
</tr>
</tbody>
</table>
<ul class="simple">
<li>Assign IP addressing to R1 and S1 based on the Addressing Table.</li>
<li>Create, name and assign VLANs on S1 based on the VLAN and Port Assignments Table. Ports should be in access mode.</li>
<li>Configure S1 to trunk, allow only the VLANs in the VLAN and Port Assignments Table.</li>
<li>Configure the default gateway on S1.</li>
<li>All ports not assigned to a VLAN should be disabled.</li>
<li>Configure inter-VLAN routing on R1 based on the Addressing Table.</li>
<li>Verify connectivity. R1, S1, and all PCs should be able to ping each other and the cisco.pka server.</li>
</ul>
<ul>
<li><p class="first">configuration for the switch:</p>
<div class="code highlight-default notranslate"><div class="highlight"><pre><span></span>hostname S1
!
!
spanning-tree mode pvst
spanning-tree extend system-id
!
interface FastEthernet0/1
 switchport mode access
!
interface FastEthernet0/2
 switchport mode access
!
interface FastEthernet0/3
 switchport mode access
!
interface FastEthernet0/4
 switchport mode access
!
interface FastEthernet0/5
 switchport mode access
!
interface FastEthernet0/6
 switchport access vlan 30
 switchport mode access
!
interface FastEthernet0/7
 switchport access vlan 30
 switchport mode access
!
interface FastEthernet0/8
 switchport access vlan 30
 switchport mode access
!
interface FastEthernet0/9
 switchport access vlan 30
 switchport mode access
!
interface FastEthernet0/10
 switchport access vlan 30
 switchport mode access
!
interface FastEthernet0/11
 switchport access vlan 10
 switchport mode access
!
interface FastEthernet0/12
 switchport access vlan 10
 switchport mode access
!
interface FastEthernet0/13
 switchport access vlan 10
 switchport mode access
!
interface FastEthernet0/14
 switchport access vlan 10
 switchport mode access
!
interface FastEthernet0/15
 switchport access vlan 10
 switchport mode access
!
interface FastEthernet0/16
 switchport access vlan 10
 switchport mode access
!
interface FastEthernet0/17
 switchport access vlan 10
 switchport mode access
!
interface FastEthernet0/18
 switchport access vlan 20
 switchport mode access
!
interface FastEthernet0/19
 switchport access vlan 20
 switchport mode access
!
interface FastEthernet0/20
 switchport access vlan 20
 switchport mode access
!
interface FastEthernet0/21
 switchport access vlan 20
 switchport mode access
!
interface FastEthernet0/22
 switchport access vlan 20
 switchport mode access
!
interface FastEthernet0/23
 switchport access vlan 20
 switchport mode access
!
interface FastEthernet0/24
 switchport access vlan 20
 switchport mode access
!
interface GigabitEthernet0/1
 switchport trunk native vlan 88
 switchport trunk allowed vlan 10,20,30,88,99
 switchport mode trunk
!
interface GigabitEthernet0/2
!
interface Vlan1
 no ip address
 shutdown
!
interface Vlan99
 mac-address 0030.f236.9801
 ip address 172.17.99.10 255.255.255.0
!
ip default-gateway 172.17.99.1
</pre></div>
</div>
</li>
<li><p class="first">show vlan &amp; trunks:</p>
<div class="code highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">S1</span><span class="c1">#show vlan brief</span>

<span class="n">VLAN</span> <span class="n">Name</span>                             <span class="n">Status</span>    <span class="n">Ports</span>
<span class="o">----</span> <span class="o">--------------------------------</span> <span class="o">---------</span> <span class="o">-------------------------------</span>
<span class="mi">1</span>    <span class="n">default</span>                          <span class="n">active</span>    <span class="n">Fa0</span><span class="o">/</span><span class="mi">1</span><span class="p">,</span> <span class="n">Fa0</span><span class="o">/</span><span class="mi">2</span><span class="p">,</span> <span class="n">Fa0</span><span class="o">/</span><span class="mi">3</span><span class="p">,</span> <span class="n">Fa0</span><span class="o">/</span><span class="mi">4</span>
                                                <span class="n">Fa0</span><span class="o">/</span><span class="mi">5</span><span class="p">,</span> <span class="n">Gig0</span><span class="o">/</span><span class="mi">2</span>
<span class="mi">10</span>   <span class="n">Faculty</span><span class="o">/</span><span class="n">Staff</span>                    <span class="n">active</span>    <span class="n">Fa0</span><span class="o">/</span><span class="mi">11</span><span class="p">,</span> <span class="n">Fa0</span><span class="o">/</span><span class="mi">12</span><span class="p">,</span> <span class="n">Fa0</span><span class="o">/</span><span class="mi">13</span><span class="p">,</span> <span class="n">Fa0</span><span class="o">/</span><span class="mi">14</span>
                                                <span class="n">Fa0</span><span class="o">/</span><span class="mi">15</span><span class="p">,</span> <span class="n">Fa0</span><span class="o">/</span><span class="mi">16</span><span class="p">,</span> <span class="n">Fa0</span><span class="o">/</span><span class="mi">17</span>
<span class="mi">20</span>   <span class="n">Students</span>                         <span class="n">active</span>    <span class="n">Fa0</span><span class="o">/</span><span class="mi">18</span><span class="p">,</span> <span class="n">Fa0</span><span class="o">/</span><span class="mi">19</span><span class="p">,</span> <span class="n">Fa0</span><span class="o">/</span><span class="mi">20</span><span class="p">,</span> <span class="n">Fa0</span><span class="o">/</span><span class="mi">21</span>
                                                <span class="n">Fa0</span><span class="o">/</span><span class="mi">22</span><span class="p">,</span> <span class="n">Fa0</span><span class="o">/</span><span class="mi">23</span><span class="p">,</span> <span class="n">Fa0</span><span class="o">/</span><span class="mi">24</span>
<span class="mi">30</span>   <span class="n">Guest</span><span class="p">(</span><span class="n">Default</span><span class="p">)</span>                   <span class="n">active</span>    <span class="n">Fa0</span><span class="o">/</span><span class="mi">6</span><span class="p">,</span> <span class="n">Fa0</span><span class="o">/</span><span class="mi">7</span><span class="p">,</span> <span class="n">Fa0</span><span class="o">/</span><span class="mi">8</span><span class="p">,</span> <span class="n">Fa0</span><span class="o">/</span><span class="mi">9</span>
                                                <span class="n">Fa0</span><span class="o">/</span><span class="mi">10</span>
<span class="mi">88</span>   <span class="n">Native</span>                           <span class="n">active</span>
<span class="mi">99</span>   <span class="n">Management</span>                       <span class="n">active</span>
<span class="mi">1002</span> <span class="n">fddi</span><span class="o">-</span><span class="n">default</span>                     <span class="n">active</span>
<span class="mi">1003</span> <span class="n">token</span><span class="o">-</span><span class="n">ring</span><span class="o">-</span><span class="n">default</span>               <span class="n">active</span>
<span class="mi">1004</span> <span class="n">fddinet</span><span class="o">-</span><span class="n">default</span>                  <span class="n">active</span>
<span class="mi">1005</span> <span class="n">trnet</span><span class="o">-</span><span class="n">default</span>                    <span class="n">active</span>
<span class="n">S1</span><span class="c1">#</span>
<span class="n">S1</span><span class="c1">#</span>
<span class="n">S1</span><span class="c1">#</span>
<span class="n">S1</span><span class="c1">#</span>
<span class="n">S1</span><span class="c1">#show interfaces trunk</span>
<span class="n">Port</span>        <span class="n">Mode</span>         <span class="n">Encapsulation</span>  <span class="n">Status</span>        <span class="n">Native</span> <span class="n">vlan</span>
<span class="n">Gig0</span><span class="o">/</span><span class="mi">1</span>      <span class="n">on</span>           <span class="mf">802.1</span><span class="n">q</span>         <span class="n">trunking</span>      <span class="mi">88</span>

<span class="n">Port</span>        <span class="n">Vlans</span> <span class="n">allowed</span> <span class="n">on</span> <span class="n">trunk</span>
<span class="n">Gig0</span><span class="o">/</span><span class="mi">1</span>      <span class="mi">10</span><span class="p">,</span><span class="mi">20</span><span class="p">,</span><span class="mi">30</span><span class="p">,</span><span class="mi">88</span><span class="p">,</span><span class="mi">99</span>

<span class="n">Port</span>        <span class="n">Vlans</span> <span class="n">allowed</span> <span class="ow">and</span> <span class="n">active</span> <span class="ow">in</span> <span class="n">management</span> <span class="n">domain</span>
<span class="n">Gig0</span><span class="o">/</span><span class="mi">1</span>      <span class="mi">10</span><span class="p">,</span><span class="mi">20</span><span class="p">,</span><span class="mi">30</span><span class="p">,</span><span class="mi">88</span><span class="p">,</span><span class="mi">99</span>

<span class="n">Port</span>        <span class="n">Vlans</span> <span class="ow">in</span> <span class="n">spanning</span> <span class="n">tree</span> <span class="n">forwarding</span> <span class="n">state</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">pruned</span>
<span class="n">Gig0</span><span class="o">/</span><span class="mi">1</span>      <span class="mi">10</span><span class="p">,</span><span class="mi">20</span><span class="p">,</span><span class="mi">30</span><span class="p">,</span><span class="mi">88</span><span class="p">,</span><span class="mi">99</span>
</pre></div>
</div>
</li>
<li><p class="first">configuration for the router:</p>
<div class="code highlight-default notranslate"><div class="highlight"><pre><span></span>hostname R1
!
!
ip cef
no ipv6 cef
!
!
spanning-tree mode pvst
!
interface GigabitEthernet0/0
 ip address 172.17.25.2 255.255.255.252
 duplex auto
 speed auto
!
interface GigabitEthernet0/1
 no ip address
 duplex auto
 speed auto
!
interface GigabitEthernet0/1.10
 encapsulation dot1Q 10
 ip address 172.17.10.1 255.255.255.0
!
interface GigabitEthernet0/1.20
 encapsulation dot1Q 20
 ip address 172.17.20.1 255.255.255.0
!
interface GigabitEthernet0/1.30
 encapsulation dot1Q 30
 ip address 172.17.30.1 255.255.255.0
!
interface GigabitEthernet0/1.88
 encapsulation dot1Q 88 native
 ip address 172.17.88.1 255.255.255.0
!
interface GigabitEthernet0/1.99
 encapsulation dot1Q 99
 ip address 172.17.99.1 255.255.255.0
!
interface Vlan1
 no ip address
 shutdown
!
ip classless
ip route 0.0.0.0 0.0.0.0 GigabitEthernet0/0
!
ip flow-export version 9
!
</pre></div>
</div>
</li>
<li><p class="first">show ip route:</p>
<div class="code highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">R1</span><span class="c1">#show ip route</span>
<span class="n">Codes</span><span class="p">:</span> <span class="n">L</span> <span class="o">-</span> <span class="n">local</span><span class="p">,</span> <span class="n">C</span> <span class="o">-</span> <span class="n">connected</span><span class="p">,</span> <span class="n">S</span> <span class="o">-</span> <span class="n">static</span><span class="p">,</span> <span class="n">R</span> <span class="o">-</span> <span class="n">RIP</span><span class="p">,</span> <span class="n">M</span> <span class="o">-</span> <span class="n">mobile</span><span class="p">,</span> <span class="n">B</span> <span class="o">-</span> <span class="n">BGP</span>
       <span class="n">D</span> <span class="o">-</span> <span class="n">EIGRP</span><span class="p">,</span> <span class="n">EX</span> <span class="o">-</span> <span class="n">EIGRP</span> <span class="n">external</span><span class="p">,</span> <span class="n">O</span> <span class="o">-</span> <span class="n">OSPF</span><span class="p">,</span> <span class="n">IA</span> <span class="o">-</span> <span class="n">OSPF</span> <span class="n">inter</span> <span class="n">area</span>
       <span class="n">N1</span> <span class="o">-</span> <span class="n">OSPF</span> <span class="n">NSSA</span> <span class="n">external</span> <span class="nb">type</span> <span class="mi">1</span><span class="p">,</span> <span class="n">N2</span> <span class="o">-</span> <span class="n">OSPF</span> <span class="n">NSSA</span> <span class="n">external</span> <span class="nb">type</span> <span class="mi">2</span>
       <span class="n">E1</span> <span class="o">-</span> <span class="n">OSPF</span> <span class="n">external</span> <span class="nb">type</span> <span class="mi">1</span><span class="p">,</span> <span class="n">E2</span> <span class="o">-</span> <span class="n">OSPF</span> <span class="n">external</span> <span class="nb">type</span> <span class="mi">2</span><span class="p">,</span> <span class="n">E</span> <span class="o">-</span> <span class="n">EGP</span>
       <span class="n">i</span> <span class="o">-</span> <span class="n">IS</span><span class="o">-</span><span class="n">IS</span><span class="p">,</span> <span class="n">L1</span> <span class="o">-</span> <span class="n">IS</span><span class="o">-</span><span class="n">IS</span> <span class="n">level</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="n">L2</span> <span class="o">-</span> <span class="n">IS</span><span class="o">-</span><span class="n">IS</span> <span class="n">level</span><span class="o">-</span><span class="mi">2</span><span class="p">,</span> <span class="n">ia</span> <span class="o">-</span> <span class="n">IS</span><span class="o">-</span><span class="n">IS</span> <span class="n">inter</span> <span class="n">area</span>
       <span class="o">*</span> <span class="o">-</span> <span class="n">candidate</span> <span class="n">default</span><span class="p">,</span> <span class="n">U</span> <span class="o">-</span> <span class="n">per</span><span class="o">-</span><span class="n">user</span> <span class="n">static</span> <span class="n">route</span><span class="p">,</span> <span class="n">o</span> <span class="o">-</span> <span class="n">ODR</span>
       <span class="n">P</span> <span class="o">-</span> <span class="n">periodic</span> <span class="n">downloaded</span> <span class="n">static</span> <span class="n">route</span>

<span class="n">Gateway</span> <span class="n">of</span> <span class="n">last</span> <span class="n">resort</span> <span class="ow">is</span> <span class="mf">0.0</span><span class="o">.</span><span class="mf">0.0</span> <span class="n">to</span> <span class="n">network</span> <span class="mf">0.0</span><span class="o">.</span><span class="mf">0.0</span>

     <span class="mf">172.17</span><span class="o">.</span><span class="mf">0.0</span><span class="o">/</span><span class="mi">16</span> <span class="ow">is</span> <span class="n">variably</span> <span class="n">subnetted</span><span class="p">,</span> <span class="mi">12</span> <span class="n">subnets</span><span class="p">,</span> <span class="mi">3</span> <span class="n">masks</span>
<span class="n">C</span>       <span class="mf">172.17</span><span class="o">.</span><span class="mf">10.0</span><span class="o">/</span><span class="mi">24</span> <span class="ow">is</span> <span class="n">directly</span> <span class="n">connected</span><span class="p">,</span> <span class="n">GigabitEthernet0</span><span class="o">/</span><span class="mf">1.10</span>
<span class="n">L</span>       <span class="mf">172.17</span><span class="o">.</span><span class="mf">10.1</span><span class="o">/</span><span class="mi">32</span> <span class="ow">is</span> <span class="n">directly</span> <span class="n">connected</span><span class="p">,</span> <span class="n">GigabitEthernet0</span><span class="o">/</span><span class="mf">1.10</span>
<span class="n">C</span>       <span class="mf">172.17</span><span class="o">.</span><span class="mf">20.0</span><span class="o">/</span><span class="mi">24</span> <span class="ow">is</span> <span class="n">directly</span> <span class="n">connected</span><span class="p">,</span> <span class="n">GigabitEthernet0</span><span class="o">/</span><span class="mf">1.20</span>
<span class="n">L</span>       <span class="mf">172.17</span><span class="o">.</span><span class="mf">20.1</span><span class="o">/</span><span class="mi">32</span> <span class="ow">is</span> <span class="n">directly</span> <span class="n">connected</span><span class="p">,</span> <span class="n">GigabitEthernet0</span><span class="o">/</span><span class="mf">1.20</span>
<span class="n">C</span>       <span class="mf">172.17</span><span class="o">.</span><span class="mf">25.0</span><span class="o">/</span><span class="mi">30</span> <span class="ow">is</span> <span class="n">directly</span> <span class="n">connected</span><span class="p">,</span> <span class="n">GigabitEthernet0</span><span class="o">/</span><span class="mi">0</span>
<span class="n">L</span>       <span class="mf">172.17</span><span class="o">.</span><span class="mf">25.2</span><span class="o">/</span><span class="mi">32</span> <span class="ow">is</span> <span class="n">directly</span> <span class="n">connected</span><span class="p">,</span> <span class="n">GigabitEthernet0</span><span class="o">/</span><span class="mi">0</span>
<span class="n">C</span>       <span class="mf">172.17</span><span class="o">.</span><span class="mf">30.0</span><span class="o">/</span><span class="mi">24</span> <span class="ow">is</span> <span class="n">directly</span> <span class="n">connected</span><span class="p">,</span> <span class="n">GigabitEthernet0</span><span class="o">/</span><span class="mf">1.30</span>
<span class="n">L</span>       <span class="mf">172.17</span><span class="o">.</span><span class="mf">30.1</span><span class="o">/</span><span class="mi">32</span> <span class="ow">is</span> <span class="n">directly</span> <span class="n">connected</span><span class="p">,</span> <span class="n">GigabitEthernet0</span><span class="o">/</span><span class="mf">1.30</span>
<span class="n">C</span>       <span class="mf">172.17</span><span class="o">.</span><span class="mf">88.0</span><span class="o">/</span><span class="mi">24</span> <span class="ow">is</span> <span class="n">directly</span> <span class="n">connected</span><span class="p">,</span> <span class="n">GigabitEthernet0</span><span class="o">/</span><span class="mf">1.88</span>
<span class="n">L</span>       <span class="mf">172.17</span><span class="o">.</span><span class="mf">88.1</span><span class="o">/</span><span class="mi">32</span> <span class="ow">is</span> <span class="n">directly</span> <span class="n">connected</span><span class="p">,</span> <span class="n">GigabitEthernet0</span><span class="o">/</span><span class="mf">1.88</span>
<span class="n">C</span>       <span class="mf">172.17</span><span class="o">.</span><span class="mf">99.0</span><span class="o">/</span><span class="mi">24</span> <span class="ow">is</span> <span class="n">directly</span> <span class="n">connected</span><span class="p">,</span> <span class="n">GigabitEthernet0</span><span class="o">/</span><span class="mf">1.99</span>
<span class="n">L</span>       <span class="mf">172.17</span><span class="o">.</span><span class="mf">99.1</span><span class="o">/</span><span class="mi">32</span> <span class="ow">is</span> <span class="n">directly</span> <span class="n">connected</span><span class="p">,</span> <span class="n">GigabitEthernet0</span><span class="o">/</span><span class="mf">1.99</span>
<span class="n">S</span><span class="o">*</span>   <span class="mf">0.0</span><span class="o">.</span><span class="mf">0.0</span><span class="o">/</span><span class="mi">0</span> <span class="ow">is</span> <span class="n">directly</span> <span class="n">connected</span><span class="p">,</span> <span class="n">GigabitEthernet0</span><span class="o">/</span><span class="mi">0</span>
</pre></div>
</div>
</li>
</ul>
</div>
<div class="section" id="skills-integration-challenge">
<h2>Skills integration challenge<a class="headerlink" href="#skills-integration-challenge" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>Addressing Table</li>
</ul>
<img alt="../../../_images/ch6_skills_integration_challenge.png" src="../../../_images/ch6_skills_integration_challenge.png" />
<table border="1" class="docutils">
<colgroup>
<col width="11%" />
<col width="15%" />
<col width="20%" />
<col width="21%" />
<col width="24%" />
<col width="8%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Device</th>
<th class="head">Interface</th>
<th class="head">IP Address</th>
<th class="head">Subnet Mask</th>
<th class="head">Default Gateway</th>
<th class="head">VLAN</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>&#160;</td>
<td>S0/0/0</td>
<td>172.31.1.2</td>
<td>255.255.255.0</td>
<td>N/A</td>
<td>N/A</td>
</tr>
<tr class="row-odd"><td>&#160;</td>
<td>G0/0.10</td>
<td>172.31.10.1</td>
<td>255.255.255.0</td>
<td>N/A</td>
<td>10</td>
</tr>
<tr class="row-even"><td>&#160;</td>
<td>G0/0.20</td>
<td>172.31.20.1</td>
<td>255.255.255.0</td>
<td>N/A</td>
<td>20</td>
</tr>
<tr class="row-odd"><td>R1</td>
<td>G0/0.30</td>
<td>172.31.30.1</td>
<td>255.255.255.0</td>
<td>N/A</td>
<td>30</td>
</tr>
<tr class="row-even"><td>&#160;</td>
<td>G0/0.88</td>
<td>172.31.88.1</td>
<td>255.255.255.0</td>
<td>N/A</td>
<td>88</td>
</tr>
<tr class="row-odd"><td>&#160;</td>
<td>G0/0.99</td>
<td>172.31.99.1</td>
<td>255.255.255.0</td>
<td>N/A</td>
<td>99</td>
</tr>
<tr class="row-even"><td>S1</td>
<td>VLAN 88</td>
<td>172.31.88.33</td>
<td>255.255.255.0</td>
<td>172.31.88.1</td>
<td>88</td>
</tr>
<tr class="row-odd"><td>PC-A</td>
<td>NIC</td>
<td>172.31.10.21</td>
<td>255.255.255.0</td>
<td>172.31.10.1</td>
<td>10</td>
</tr>
<tr class="row-even"><td>PC-B</td>
<td>NIC</td>
<td>172.31.20.22</td>
<td>255.255.255.0</td>
<td>172.31.20.1</td>
<td>20</td>
</tr>
<tr class="row-odd"><td>PC-C</td>
<td>NIC</td>
<td>172.31.30.23</td>
<td>255.255.255.0</td>
<td>172.31.30.1</td>
<td>30</td>
</tr>
<tr class="row-even"><td>PC-D</td>
<td>NIC</td>
<td>172.31.88.24</td>
<td>255.255.255.0</td>
<td>172.31.88.1</td>
<td>88</td>
</tr>
</tbody>
</table>
<ul class="simple">
<li>VLAN Table</li>
</ul>
<table border="1" class="docutils">
<colgroup>
<col width="20%" />
<col width="40%" />
<col width="40%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">VLAN</th>
<th class="head">Name</th>
<th class="head">Interfaces</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>10</td>
<td>Sales</td>
<td>F0/11-15</td>
</tr>
<tr class="row-odd"><td>20</td>
<td>Production</td>
<td>F0/16-20</td>
</tr>
<tr class="row-even"><td>0</td>
<td>Marketing</td>
<td>F0/5-10</td>
</tr>
<tr class="row-odd"><td>88</td>
<td>Management</td>
<td>F0/21-24</td>
</tr>
<tr class="row-even"><td>99</td>
<td>Native</td>
<td>G0/1</td>
</tr>
</tbody>
</table>
<ul class="simple">
<li>Scenario</li>
</ul>
<p>In this activity, you will demonstrate and reinforce your ability to configure routers for inter-VLAN communication and configure static routes to reach destinations outside of your network. Among the skills you will demonstrate are configuring inter-VLAN routing, static and default routes.</p>
<p>Requirements</p>
<p>· Configure inter-VLAN routing on R1 based on the Addressing Table.
· Configure trunking on S1.
· Configure four directly attached static route on HQ to each VLANs 10, 20, 30 and 88.
· Configure directly attached static routes on HQ to reach Outside Host:</p>
<blockquote>
<div>· Configure the primary path through the Serial 0/1/0 interface.
· Configure the backup route through the Serial 0/1/1 interface with a 10 AD.</div></blockquote>
<p>· Configure a directly attached default route on R1.
· Verify connectivity by making sure all the PCs can ping Outside Host.</p>
<ul>
<li><p class="first">router solution:</p>
<div class="code highlight-default notranslate"><div class="highlight"><pre><span></span>R1(config)#interface G0/0.10
R1(config-subif)#ip address 172.31.10.1 255.255.255.0

% Configuring IP routing on a LAN subinterface is only allowed if that
subinterface is already configured as part of an IEEE 802.10, IEEE 802.1Q,
or ISL vLAN.

R1(config-subif)#encapsulation dot1Q 10
R1(config-subif)#ip address 172.31.10.1 255.255.255.0
R1(config-subif)#interface G0/0.20
R1(config-subif)#encapsulation dot1Q 20
R1(config-subif)#ip address 172.31.20.1 255.255.255.0
R1(config-subif)#interface G0/0.30
R1(config-subif)#encapsulation dot1Q 30
R1(config-subif)#ip address 172.31.30.1 255.255.255.0
R1(config-subif)#interface G0/0.88
R1(config-subif)#encapsulation dot1Q 88
R1(config-subif)#ip address 172.31.88.1 255.255.255.0
R1(config-subif)#interface G0/0.99
R1(config-subif)#encapsulation dot1Q 99 native
R1(config-subif)#ip address 172.31.99.1 255.255.255.0
R1(config-subif)#do show ip int brief
Interface              IP-Address      OK? Method Status                Protocol
GigabitEthernet0/0     unassigned      YES unset  administratively down down
GigabitEthernet0/0.10  172.31.10.1     YES manual administratively down down
GigabitEthernet0/0.20  172.31.20.1     YES manual administratively down down
GigabitEthernet0/0.30  172.31.30.1     YES manual administratively down down
GigabitEthernet0/0.88  172.31.88.1     YES manual administratively down down
GigabitEthernet0/0.99  172.31.99.1     YES manual administratively down down
GigabitEthernet0/1     unassigned      YES unset  administratively down down
Serial0/0/0            172.31.1.2      YES manual up                    up
Serial0/0/1            unassigned      YES unset  administratively down down
Vlan1                  unassigned      YES unset  administratively down down
R1(config-subif)#exit
R1(config)#interface G0/0
R1(config-if)#no shutdown
R1(config-if)#
%LINK-5-CHANGED: Interface GigabitEthernet0/0, changed state to up
%LINEPROTO-5-UPDOWN: Line protocol on Interface GigabitEthernet0/0, changed state to up

%LINK-5-CHANGED: Interface GigabitEthernet0/0.10, changed state to up
%LINEPROTO-5-UPDOWN: Line protocol on Interface GigabitEthernet0/0.10, changed state to up

%LINK-5-CHANGED: Interface GigabitEthernet0/0.20, changed state to up
%LINEPROTO-5-UPDOWN: Line protocol on Interface GigabitEthernet0/0.20, changed state to up

%LINK-5-CHANGED: Interface GigabitEthernet0/0.30, changed state to up
%LINEPROTO-5-UPDOWN: Line protocol on Interface GigabitEthernet0/0.30, changed state to up

%LINK-5-CHANGED: Interface GigabitEthernet0/0.88, changed state to up
%LINEPROTO-5-UPDOWN: Line protocol on Interface GigabitEthernet0/0.88, changed state to up

%LINK-5-CHANGED: Interface GigabitEthernet0/0.99, changed state to up
%LINEPROTO-5-UPDOWN: Line protocol on Interface GigabitEthernet0/0.99, changed state to up

R1(config-if)#do show ip route
Codes: L - local, C - connected, S - static, R - RIP, M - mobile, B - BGP
       D - EIGRP, EX - EIGRP external, O - OSPF, IA - OSPF inter area
       N1 - OSPF NSSA external type 1, N2 - OSPF NSSA external type 2
       E1 - OSPF external type 1, E2 - OSPF external type 2, E - EGP
       i - IS-IS, L1 - IS-IS level-1, L2 - IS-IS level-2, ia - IS-IS inter area
       * - candidate default, U - per-user static route, o - ODR
       P - periodic downloaded static route

Gateway of last resort is not set

     172.31.0.0/16 is variably subnetted, 12 subnets, 2 masks
C       172.31.1.0/24 is directly connected, Serial0/0/0
L       172.31.1.2/32 is directly connected, Serial0/0/0
C       172.31.10.0/24 is directly connected, GigabitEthernet0/0.10
L       172.31.10.1/32 is directly connected, GigabitEthernet0/0.10
C       172.31.20.0/24 is directly connected, GigabitEthernet0/0.20
L       172.31.20.1/32 is directly connected, GigabitEthernet0/0.20
C       172.31.30.0/24 is directly connected, GigabitEthernet0/0.30
L       172.31.30.1/32 is directly connected, GigabitEthernet0/0.30
C       172.31.88.0/24 is directly connected, GigabitEthernet0/0.88
L       172.31.88.1/32 is directly connected, GigabitEthernet0/0.88
C       172.31.99.0/24 is directly connected, GigabitEthernet0/0.99
L       172.31.99.1/32 is directly connected, GigabitEthernet0/0.99

add directly attached default route
-----------------------------------
R1(config)#ip route 0.0.0.0 0.0.0.0 S0/0/0
%Default route without gateway, if not a point-to-point interface, may impact performance
R1(config)#copy run start
</pre></div>
</div>
</li>
<li><p class="first">Switch Solution:</p>
<div class="code highlight-default notranslate"><div class="highlight"><pre><span></span>S1&gt;enable
S1#show vlan brief

VLAN Name                             Status    Ports
---- -------------------------------- --------- -------------------------------
1    default                          active    Fa0/1, Fa0/2, Fa0/3, Fa0/4
                                                Gig0/1, Gig0/2
10   Sales                            active    Fa0/11, Fa0/12, Fa0/13, Fa0/14
                                                Fa0/15
20   Production                       active    Fa0/16, Fa0/17, Fa0/18, Fa0/19
                                                Fa0/20
30   Marketing                        active    Fa0/5, Fa0/6, Fa0/7, Fa0/8
                                                Fa0/9, Fa0/10
88   Management                       active    Fa0/21, Fa0/22, Fa0/23, Fa0/24
99   Native                           active
1002 fddi-default                     active
1003 token-ring-default               active
1004 fddinet-default                  active
1005 trnet-default                    active
S1#conf t
S1(config)#interface GigabitEthernet 0/1
S1(config-if)#switchport mode trunk
S1(config-if)#
%LINEPROTO-5-UPDOWN: Line protocol on Interface GigabitEthernet0/1, changed state to down
%LINEPROTO-5-UPDOWN: Line protocol on Interface GigabitEthernet0/1, changed state to up
S1(config-if)#switchport trunk native vlan 99
S1(config-if)#switchport trunk allowed vlan 10,20,30,88,99
S1(config-if)#no shutdown
S1(config-if)#exit
S1(config)#interface vlan 88
S1(config-if)#ip address 172.31.88.33 255.255.255.0
S1(config-if)#do show ip int brief
Interface              IP-Address      OK? Method Status                Protocol
FastEthernet0/1        unassigned      YES manual down                  down
FastEthernet0/2        unassigned      YES manual down                  down
FastEthernet0/3        unassigned      YES manual down                  down
FastEthernet0/4        unassigned      YES manual down                  down
FastEthernet0/5        unassigned      YES manual down                  down
FastEthernet0/6        unassigned      YES manual down                  down
FastEthernet0/7        unassigned      YES manual down                  down
FastEthernet0/8        unassigned      YES manual up                    up
FastEthernet0/9        unassigned      YES manual down                  down
FastEthernet0/10       unassigned      YES manual down                  down
FastEthernet0/11       unassigned      YES manual up                    up
FastEthernet0/12       unassigned      YES manual down                  down
FastEthernet0/13       unassigned      YES manual down                  down
FastEthernet0/14       unassigned      YES manual down                  down
FastEthernet0/15       unassigned      YES manual down                  down
FastEthernet0/16       unassigned      YES manual up                    up
FastEthernet0/17       unassigned      YES manual down                  down
FastEthernet0/18       unassigned      YES manual down                  down
FastEthernet0/19       unassigned      YES manual down                  down
FastEthernet0/20       unassigned      YES manual down                  down
FastEthernet0/21       unassigned      YES manual down                  down
FastEthernet0/22       unassigned      YES manual down                  down
FastEthernet0/23       unassigned      YES manual down                  down
FastEthernet0/24       unassigned      YES manual up                    up
GigabitEthernet0/1     unassigned      YES manual up                    up
GigabitEthernet0/2     unassigned      YES manual down                  down
Vlan1                  unassigned      YES manual administratively down down
Vlan88                 172.31.88.33    YES manual up                    up
S1(config-if)#do show vlan brief

VLAN Name                             Status    Ports
---- -------------------------------- --------- -------------------------------
1    default                          active    Fa0/1, Fa0/2, Fa0/3, Fa0/4
                                                Gig0/2
10   Sales                            active    Fa0/11, Fa0/12, Fa0/13, Fa0/14
                                                Fa0/15
20   Production                       active    Fa0/16, Fa0/17, Fa0/18, Fa0/19
                                                Fa0/20
30   Marketing                        active    Fa0/5, Fa0/6, Fa0/7, Fa0/8
                                                Fa0/9, Fa0/10
88   Management                       active    Fa0/21, Fa0/22, Fa0/23, Fa0/24
99   Native                           active
1002 fddi-default                     active
1003 token-ring-default               active
1004 fddinet-default                  active
1005 trnet-default                    active
S1(config-if)# exit
S1(config)#interface Gig0/1
S1(config-if)#switchport mode trunk
S1(config-if)#switchport trunk native vlan 99
S1(config-if)#switchport trunk allowed vlan 10,20,30,88,99
S1(config-if)#exit
S1(config)#do show vlan brief

VLAN Name                             Status    Ports
---- -------------------------------- --------- -------------------------------
1    default                          active    Fa0/1, Fa0/2, Fa0/3, Fa0/4
                                                Gig0/2
10   Sales                            active    Fa0/11, Fa0/12, Fa0/13, Fa0/14
                                                Fa0/15
20   Production                       active    Fa0/16, Fa0/17, Fa0/18, Fa0/19
                                                Fa0/20
30   Marketing                        active    Fa0/5, Fa0/6, Fa0/7, Fa0/8
                                                Fa0/9, Fa0/10
88   Management                       active    Fa0/21, Fa0/22, Fa0/23, Fa0/24
99   Native                           active
S1(config)#do show interfaces trunk
Port        Mode         Encapsulation  Status        Native vlan
Gig0/1      on           802.1q         trunking      99

Port        Vlans allowed on trunk
Gig0/1      10,20,30,88,99

Port        Vlans allowed and active in management domain
Gig0/1      10,20,30,88,99

Port        Vlans in spanning tree forwarding state and not pruned
Gig0/1      10,20,30,88,99
</pre></div>
</div>
</li>
<li><p class="first">Router HQ Solution:</p>
<blockquote>
<div><div class="code highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">directly</span> <span class="n">attached</span> <span class="n">static</span> <span class="n">routes</span> <span class="n">to</span> <span class="n">each</span> <span class="n">VLAN</span>
<span class="o">--------------------------------------------</span>
<span class="n">HQ</span><span class="p">(</span><span class="n">config</span><span class="p">)</span><span class="c1">#ip route 172.31.10.0 255.255.255.0 Serial0/0/0</span>
<span class="o">%</span><span class="n">Default</span> <span class="n">route</span> <span class="n">without</span> <span class="n">gateway</span><span class="p">,</span> <span class="k">if</span> <span class="ow">not</span> <span class="n">a</span> <span class="n">point</span><span class="o">-</span><span class="n">to</span><span class="o">-</span><span class="n">point</span> <span class="n">interface</span><span class="p">,</span> <span class="n">may</span> <span class="n">impact</span> <span class="n">performance</span>
<span class="n">HQ</span><span class="p">(</span><span class="n">config</span><span class="p">)</span><span class="c1">#ip route 172.31.20.0 255.255.255.0 Serial0/0/0</span>
<span class="o">%</span><span class="n">Default</span> <span class="n">route</span> <span class="n">without</span> <span class="n">gateway</span><span class="p">,</span> <span class="k">if</span> <span class="ow">not</span> <span class="n">a</span> <span class="n">point</span><span class="o">-</span><span class="n">to</span><span class="o">-</span><span class="n">point</span> <span class="n">interface</span><span class="p">,</span> <span class="n">may</span> <span class="n">impact</span> <span class="n">performance</span>
<span class="n">HQ</span><span class="p">(</span><span class="n">config</span><span class="p">)</span><span class="c1">#ip route 172.31.30.0 255.255.255.0 Serial0/0/0</span>
<span class="o">%</span><span class="n">Default</span> <span class="n">route</span> <span class="n">without</span> <span class="n">gateway</span><span class="p">,</span> <span class="k">if</span> <span class="ow">not</span> <span class="n">a</span> <span class="n">point</span><span class="o">-</span><span class="n">to</span><span class="o">-</span><span class="n">point</span> <span class="n">interface</span><span class="p">,</span> <span class="n">may</span> <span class="n">impact</span> <span class="n">performance</span>
<span class="n">HQ</span><span class="p">(</span><span class="n">config</span><span class="p">)</span><span class="c1">#ip route 172.31.88.0 255.255.255.0 Serial0/0/0</span>
<span class="o">%</span><span class="n">Default</span> <span class="n">route</span> <span class="n">without</span> <span class="n">gateway</span><span class="p">,</span> <span class="k">if</span> <span class="ow">not</span> <span class="n">a</span> <span class="n">point</span><span class="o">-</span><span class="n">to</span><span class="o">-</span><span class="n">point</span> <span class="n">interface</span><span class="p">,</span> <span class="n">may</span> <span class="n">impact</span> <span class="n">performance</span>

<span class="n">primary</span> <span class="o">&amp;</span> <span class="n">backup</span> <span class="n">static</span> <span class="n">route</span> <span class="n">to</span> <span class="n">reach</span> <span class="n">Outside</span> <span class="n">Host</span>
<span class="o">---------------------------------------------------</span>
<span class="n">HQ</span><span class="p">(</span><span class="n">config</span><span class="p">)</span><span class="c1">#ip route 209.165.200.0 255.255.255.224 Serial0/1/0</span>
<span class="o">%</span><span class="n">Default</span> <span class="n">route</span> <span class="n">without</span> <span class="n">gateway</span><span class="p">,</span> <span class="k">if</span> <span class="ow">not</span> <span class="n">a</span> <span class="n">point</span><span class="o">-</span><span class="n">to</span><span class="o">-</span><span class="n">point</span> <span class="n">interface</span><span class="p">,</span> <span class="n">may</span> <span class="n">impact</span> <span class="n">performance</span>
<span class="n">HQ</span><span class="p">(</span><span class="n">config</span><span class="p">)</span><span class="c1">#ip route 209.165.200.0 255.255.255.224 Serial0/1/1 10</span>
<span class="n">HQ</span><span class="p">(</span><span class="n">config</span><span class="p">)</span><span class="c1">#</span>
</pre></div>
</div>
</div></blockquote>
</li>
</ul>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">To place a switch into its factory default condition with 1 default VLAN, use the commands <code class="docutils literal notranslate"><span class="pre">delete</span> <span class="pre">flash:vlan.dat</span></code> and <code class="docutils literal notranslate"><span class="pre">erase</span> <span class="pre">startup-config</span></code>.</p>
</div>
</div>
<div class="section" id="qna-chapter-6">
<h2>QnA Chapter 6<a class="headerlink" href="#qna-chapter-6" title="Permalink to this headline">¶</a></h2>
<p>1 to 1005 = normal range vlans
1006 to 4094 = extended range vlans
.. note:: a VLAN containing user generated traffic is a <strong>data vlan</strong>
.. note:: a VLAN that contains all the unused switch ports on a device is a <strong>black hole VLAN</strong></p>
<p>to prohibit vlan on the trunk interface:<code class="docutils literal notranslate"><span class="pre">switchport</span> <span class="pre">trunk</span> <span class="pre">allowed</span> <span class="pre">vlan</span> <span class="pre">remove</span> <span class="pre">10</span></code></p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">If the VLAN that is associated with a port is deleted, the port becomes inactive and cannot communicate with the network any more. To verify that a port is in an inactive state, use the show interfaces switchport command.</p>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">in a router-on-a-stick configuration, the router isn’t making any decision on what vlan’s are allowed to communicatewith eachother, it just forwards it to the subinterface looking at the destination address. Its then the switch that will decide if the vlan is allowed to pass on the trunk.</p>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="acl.html" class="btn btn-neutral float-right" title="ACLs" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="switchConfiguration.html" class="btn btn-neutral" title="Switch Configuration" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2018, patrick.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../../../',
            VERSION:'a',
            LANGUAGE:'None',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="../../../_static/jquery.js"></script>
      <script type="text/javascript" src="../../../_static/underscore.js"></script>
      <script type="text/javascript" src="../../../_static/doctools.js"></script>
      <script type="text/javascript" src="../../../_static/js/custom.js"></script>

  

  
  
    <script type="text/javascript" src="../../../_static/js/theme.js"></script>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>