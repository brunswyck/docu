

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>CCNA &mdash; debian &amp; networking 20170824 documentation</title>
  

  
  
  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  

  

  
        <link rel="index" title="Index"
              href="genindex.html"/>
        <link rel="search" title="Search" href="search.html"/>
    <link rel="top" title="debian &amp; networking 20170824 documentation" href="index.html"/>
        <link rel="next" title="BASH" href="commands.html"/>
        <link rel="prev" title="Welcome to REPLACE’s documentation!" href="index.html"/> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="index.html" class="icon icon-home"> debian & networking
          

          
          </a>

          
            
            
              <div class="version">
                201708
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">CCNA</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#networking-fundamentals">Networking Fundamentals</a></li>
<li class="toctree-l2"><a class="reference internal" href="#routing-and-switching-fundamentals">Routing and Switching Fundamentals</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#chapter-1-routing-concepts">Chapter 1 Routing Concepts</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#basic-concepts">basic concepts</a></li>
<li class="toctree-l4"><a class="reference internal" href="#router-s-3-packet-forwarding-mechanisms">Router’s 3 packet-forwarding mechanisms</a></li>
<li class="toctree-l4"><a class="reference internal" href="#loopback-interfaces">Loopback interfaces</a></li>
<li class="toctree-l4"><a class="reference internal" href="#configure-loopback-interface">configure loopback interface</a></li>
<li class="toctree-l4"><a class="reference internal" href="#filtering-parameters">Filtering parameters</a></li>
<li class="toctree-l4"><a class="reference internal" href="#history-commands">History commands</a></li>
<li class="toctree-l4"><a class="reference internal" href="#show-command-examples">Show command examples</a></li>
<li class="toctree-l4"><a class="reference internal" href="#arp-neighbor-advertisement-sollicitation">ARP - Neighbor Advertisement/Sollicitation</a></li>
<li class="toctree-l4"><a class="reference internal" href="#mac-addresses-on-serial-interfaces">MAC addresses on Serial Interfaces</a></li>
<li class="toctree-l4"><a class="reference internal" href="#packet-forwarding-decision-process">Packet Forwarding Decision Process</a></li>
<li class="toctree-l4"><a class="reference internal" href="#routing-best-path-selection">Routing BEST PATH selection</a></li>
<li class="toctree-l4"><a class="reference internal" href="#administrative-distance">ADMINISTRATIVE DISTANCE</a></li>
<li class="toctree-l4"><a class="reference internal" href="#changing-administrative-distance">Changing Administrative Distance</a></li>
<li class="toctree-l4"><a class="reference internal" href="#example-of-changing-ad-for-rip">example of changing AD for rip</a></li>
<li class="toctree-l4"><a class="reference internal" href="#other-applications-of-a-d">Other applications of A.D.</a></li>
<li class="toctree-l4"><a class="reference internal" href="#directly-connected-n-remote-network-routes">Directly Connected n Remote Network Routes</a></li>
<li class="toctree-l4"><a class="reference internal" href="#the-ip-routing-process">The IP routing process</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#chapter-2-static-routes">Chapter 2 Static Routes</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#ipv4-syntax">ipv4 syntax</a></li>
<li class="toctree-l4"><a class="reference internal" href="#combination-of-exit-interface-and-next-hop">combination of exit interface and next hop</a></li>
<li class="toctree-l4"><a class="reference internal" href="#when-to-use-static-routes">When to Use Static Routes</a></li>
<li class="toctree-l4"><a class="reference internal" href="#default-static-route">Default static route</a></li>
<li class="toctree-l4"><a class="reference internal" href="#summary-static-route">Summary static route</a></li>
<li class="toctree-l4"><a class="reference internal" href="#floating-static-route">Floating static route</a></li>
<li class="toctree-l4"><a class="reference internal" href="#fully-specified-static-route">Fully Specified Static Route</a></li>
<li class="toctree-l4"><a class="reference internal" href="#ipv6-static-routing">ipv6 static routing</a></li>
<li class="toctree-l4"><a class="reference internal" href="#ipv6-default-static-route">ipv6 default static route</a></li>
<li class="toctree-l4"><a class="reference internal" href="#verify-a-default-static-route">verify a default static route</a></li>
<li class="toctree-l4"><a class="reference internal" href="#troubleshooting-a-missing-route">Troubleshooting a missing route</a></li>
<li class="toctree-l4"><a class="reference internal" href="#solve-a-connectivity-problem">Solve a connectivity problem</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#chapter-3-dynamic-routing">Chapter 3 Dynamic Routing</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#dynamic-routing-protocols-components">Dynamic Routing Protocols Components</a></li>
<li class="toctree-l4"><a class="reference internal" href="#static-routing-uses">Static Routing Uses</a></li>
<li class="toctree-l4"><a class="reference internal" href="#dynamic-routing-uses">Dynamic Routing Uses</a></li>
<li class="toctree-l4"><a class="reference internal" href="#ripv2">RIPv2</a></li>
<li class="toctree-l4"><a class="reference internal" href="#enable-disable">enable/disable</a></li>
<li class="toctree-l4"><a class="reference internal" href="#disable-auto-summarization">disable auto summarization</a></li>
<li class="toctree-l4"><a class="reference internal" href="#configure-passive-interfaces">configure passive interfaces</a></li>
<li class="toctree-l4"><a class="reference internal" href="#propagate-a-default-route">propagate a default route</a></li>
<li class="toctree-l4"><a class="reference internal" href="#exercise-example">exercise example</a></li>
<li class="toctree-l4"><a class="reference internal" href="#remote-networks-in-routing-table">Remote Networks in Routing table</a></li>
<li class="toctree-l4"><a class="reference internal" href="#routing-table-terms">Routing table terms</a></li>
<li class="toctree-l4"><a class="reference internal" href="#route-lookup-process">Route lookup process</a></li>
<li class="toctree-l4"><a class="reference internal" href="#ipv6-routing-table-entries">IPv6 Routing Table Entries</a></li>
<li class="toctree-l4"><a class="reference internal" href="#qna">QnA</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#chapter-4-switched-networks">Chapter 4 switched networks</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#elements-of-a-converged-network">elements of a converged network</a></li>
<li class="toctree-l4"><a class="reference internal" href="#hierarchy-in-the-borderless-switched-network">Hierarchy in the Borderless Switched Network</a></li>
<li class="toctree-l4"><a class="reference internal" href="#access-layer">Access Layer</a></li>
<li class="toctree-l4"><a class="reference internal" href="#distribution-layer">Distribution Layer</a></li>
<li class="toctree-l4"><a class="reference internal" href="#core-layer">Core Layer</a></li>
<li class="toctree-l4"><a class="reference internal" href="#considerations-switch">considerations switch</a></li>
<li class="toctree-l4"><a class="reference internal" href="#store-n-forward-switching">store n forward switching</a></li>
<li class="toctree-l4"><a class="reference internal" href="#cut-through-switching">Cut-Through Switching</a></li>
<li class="toctree-l4"><a class="reference internal" href="#collision-domains">Collision domains</a></li>
<li class="toctree-l4"><a class="reference internal" href="#qna-ch4">QnA Ch4</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#chapter-5-switch-configuration">Chapter 5 Switch Configuration</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#configure-boot-environment-variable">Configure BOOT Environment variable</a></li>
<li class="toctree-l4"><a class="reference internal" href="#switch-boot-sequence">Switch boot sequence</a></li>
<li class="toctree-l4"><a class="reference internal" href="#recover-from-system-crash">Recover from System Crash</a></li>
<li class="toctree-l4"><a class="reference internal" href="#configure-sw-management-ipv4">Configure Sw management ipv4</a></li>
<li class="toctree-l4"><a class="reference internal" href="#setup-a-static-mac-address">Setup a static MAC address</a></li>
<li class="toctree-l4"><a class="reference internal" href="#duplex-communication">Duplex communication</a></li>
<li class="toctree-l4"><a class="reference internal" href="#speed-auto-mdix">Speed/auto-MDIX</a></li>
<li class="toctree-l4"><a class="reference internal" href="#verify-interface-status">Verify interface status</a></li>
<li class="toctree-l4"><a class="reference internal" href="#ssh-switch-setup">SSH Switch Setup</a></li>
<li class="toctree-l4"><a class="reference internal" href="#disable-unused-ports">Disable unused ports</a></li>
<li class="toctree-l4"><a class="reference internal" href="#port-security">Port Security</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#chapter-6-vlans">Chapter 6 VLANS</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#vlan-benefits">VLAN Benefits</a></li>
<li class="toctree-l4"><a class="reference internal" href="#vlan-types">VLAN Types</a></li>
<li class="toctree-l4"><a class="reference internal" href="#voice-vlans">Voice VLANs</a></li>
<li class="toctree-l4"><a class="reference internal" href="#vlan-trunks">VLAN Trunks</a></li>
<li class="toctree-l4"><a class="reference internal" href="#q-frame">802.1Q Frame</a></li>
<li class="toctree-l4"><a class="reference internal" href="#native-vlans-802-1q-tagging">Native VLANS &amp; 802.1Q Tagging</a></li>
<li class="toctree-l4"><a class="reference internal" href="#voice-vlan-tagging">Voice VLAN Tagging</a></li>
<li class="toctree-l4"><a class="reference internal" href="#q-tagging">802.1Q tagging</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="commands.html">BASH</a></li>
<li class="toctree-l1"><a class="reference internal" href="git.html">GIT</a></li>
<li class="toctree-l1"><a class="reference internal" href="rest.html">reStructuredText Primer</a></li>
<li class="toctree-l1"><a class="reference internal" href="vim.html">VIM</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">debian & networking</a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>CCNA</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/cisco.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="ccna">
<h1>CCNA<a class="headerlink" href="#ccna" title="Permalink to this headline">¶</a></h1>
<div class="section" id="networking-fundamentals">
<h2>Networking Fundamentals<a class="headerlink" href="#networking-fundamentals" title="Permalink to this headline">¶</a></h2>
<p>Add fundamentals content here</p>
</div>
<div class="section" id="routing-and-switching-fundamentals">
<h2>Routing and Switching Fundamentals<a class="headerlink" href="#routing-and-switching-fundamentals" title="Permalink to this headline">¶</a></h2>
<div class="section" id="chapter-1-routing-concepts">
<h3>Chapter 1 Routing Concepts<a class="headerlink" href="#chapter-1-routing-concepts" title="Permalink to this headline">¶</a></h3>
<div class="section" id="basic-concepts">
<h4>basic concepts<a class="headerlink" href="#basic-concepts" title="Permalink to this headline">¶</a></h4>
<blockquote>
<div><dl class="docutils">
<dt>RAM</dt>
<dd>Running IOS
Running config file
IP routing tables, ARP tables, CDP info
Packet buffer</dd>
<dt>ROM</dt>
<dd>Bootup instructions (System Bootstrap)
Basic diagnostic software (POST)
Limited IOS in case router cannot load full featured IOS(ROMMON)</dd>
<dt>NVRAM</dt>
<dd>Startup config file</dd>
<dt>FLASH</dt>
<dd>IOS</dd>
</dl>
<p>view their size via:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">show</span> <span class="n">version</span>
</pre></div>
</div>
<p>bootup process lookup for ios</p>
<blockquote>
<div><ul class="simple">
<li>flash memory</li>
<li>TFTP server</li>
<li>ROM</li>
</ul>
</div></blockquote>
<p>to change this order, change configuration register</p>
</div></blockquote>
</div>
<div class="section" id="router-s-3-packet-forwarding-mechanisms">
<h4>Router’s 3 packet-forwarding mechanisms<a class="headerlink" href="#router-s-3-packet-forwarding-mechanisms" title="Permalink to this headline">¶</a></h4>
<blockquote>
<div><dl class="docutils">
<dt>Process Switching</dt>
<dd>An older packet forwarding mechanism still available for Cisco routers. When a packet arrives on an interface, it is forwarded to the control plane where the CPU matches the destination address with an entry in its routing table, and then determines the exit interface and forwards the packet. It is important to understand that the router does this for every packet, even if the destination is the same for a stream of packets. This process-switching mechanism is very slow and rarely implemented in modern networks.</dd>
<dt>Fast switching</dt>
<dd>This is a common packet forwarding mechanism which uses a fast-switching cache to store next-hop information. When a packet arrives on an interface, it is forwarded to the control plane where the CPU searches for a match in the fast-switching cache. If it is not there, it is process-switched and forwarded to the exit interface. The flow information for the packet is also stored in the fast-switching cache. If another packet going to the same destination arrives on an interface, the next-hop information in the cache is re-used without CPU intervention.</dd>
<dt>Cisco Express Forwarding (CEF)</dt>
<dd>CEF is the most recent and preferred Cisco IOS packet-forwarding mechanism. Like fast switching, CEF builds a Forwarding Information Base (FIB), and an adjacency table. However, the table entries are not packet-triggered like fast switching but change-triggered such as when something changes in the network topology. Therefore, when a network has converged, the FIB and adjacency tables contain all the information a router would have to consider when forwarding a packet. The FIB contains pre-computed reverse lookups, next hop information for routes including the interface and Layer 2 information. Cisco Express Forwarding is the fastest forwarding mechanism and the preferred choice on Cisco routers.</dd>
</dl>
</div></blockquote>
</div>
<div class="section" id="loopback-interfaces">
<h4>Loopback interfaces<a class="headerlink" href="#loopback-interfaces" title="Permalink to this headline">¶</a></h4>
<blockquote>
<div>Multiple loopback interfaces can be enabled on a router. The IPv4 address for each loopback interface must be unique and unused by any other interface.</div></blockquote>
</div>
<div class="section" id="configure-loopback-interface">
<h4>configure loopback interface<a class="headerlink" href="#configure-loopback-interface" title="Permalink to this headline">¶</a></h4>
<div class="code highlight-default"><div class="highlight"><pre><span></span><span class="n">Router</span><span class="p">(</span><span class="n">config</span><span class="p">)</span><span class="c1"># interface loopback 0</span>
<span class="n">Router</span><span class="p">(</span><span class="n">config</span><span class="o">-</span><span class="k">if</span><span class="p">)</span><span class="c1"># ip address 10.0.0.1 255.255.255.0</span>
<span class="n">Router</span><span class="p">(</span><span class="n">config</span><span class="o">-</span><span class="k">if</span><span class="p">)</span><span class="c1"># exit</span>
</pre></div>
</div>
</div>
<div class="section" id="filtering-parameters">
<h4>Filtering parameters<a class="headerlink" href="#filtering-parameters" title="Permalink to this headline">¶</a></h4>
<p>Used after the pipe are:</p>
<dl class="docutils">
<dt>section</dt>
<dd>Shows entire section that starts with the filtering expression
.. highlight::
R1# show running-config | section line vty</dd>
<dt>include</dt>
<dd>Includes all output lines that match the filtering expression
.. highlight::
R1# show ip interface brief | include up</dd>
<dt>exclude</dt>
<dd>Excludes all output lines that match the filtering expression
.. highlight::
R1# show ip interface brief | exclude unassigned</dd>
<dt>begin</dt>
<dd>hows all the output lines from a certain point, starting with the line that matches the filtering expression
.. highlight::
R1# show ip route | begin Gateway
R1# show running-config | begin line</dd>
</dl>
</div>
<div class="section" id="history-commands">
<h4>History commands<a class="headerlink" href="#history-commands" title="Permalink to this headline">¶</a></h4>
<dl class="docutils">
<dt>set/show history</dt>
<dd><div class="code first last highlight-default"><div class="highlight"><pre><span></span><span class="n">R1</span><span class="c1"># terminal history size 200</span>
<span class="n">R1</span><span class="c1"># show history</span>
</pre></div>
</div>
</dd>
</dl>
</div>
<div class="section" id="show-command-examples">
<h4>Show command examples<a class="headerlink" href="#show-command-examples" title="Permalink to this headline">¶</a></h4>
<dl class="docutils">
<dt>show interfaces</dt>
<dd><div class="code first last highlight-default"><div class="highlight"><pre><span></span><span class="n">TA</span><span class="p">(</span><span class="n">config</span><span class="p">)</span><span class="c1">#do show interfaces</span>
<span class="n">GigabitEthernet0</span><span class="o">/</span><span class="mi">0</span> <span class="ow">is</span> <span class="n">up</span><span class="p">,</span> <span class="n">line</span> <span class="n">protocol</span> <span class="ow">is</span> <span class="n">up</span> <span class="p">(</span><span class="n">connected</span><span class="p">)</span>
<span class="n">OB</span> <span class="n">Hardware</span> <span class="ow">is</span> <span class="n">CN</span> <span class="n">Gigabit</span> <span class="n">Ethernet</span><span class="p">,</span> <span class="n">address</span> <span class="ow">is</span> <span class="mf">0004.9</span><span class="n">ae8</span><span class="o">.</span><span class="n">b901</span> <span class="p">(</span><span class="n">bia</span> <span class="mf">0004.9</span><span class="n">ae8</span><span class="o">.</span><span class="n">b901</span><span class="p">)</span>
<span class="n">Description</span><span class="p">:</span> <span class="n">Link</span> <span class="n">RTA</span> <span class="n">G0</span><span class="o">/</span><span class="mi">0</span> <span class="n">to</span> <span class="n">SW1</span> <span class="n">G0</span><span class="o">/</span><span class="mi">1</span>
<span class="n">Internet</span> <span class="n">address</span> <span class="ow">is</span> <span class="mf">10.10</span><span class="o">.</span><span class="mf">10.1</span><span class="o">/</span><span class="mi">24</span>
<span class="n">MTU</span> <span class="mi">1500</span> <span class="nb">bytes</span><span class="p">,</span> <span class="n">BW</span> <span class="mi">1000000</span> <span class="n">Kbit</span><span class="p">,</span> <span class="n">DLY</span> <span class="mi">10</span> <span class="n">usec</span><span class="p">,</span>
   <span class="n">reliability</span> <span class="mi">255</span><span class="o">/</span><span class="mi">255</span><span class="p">,</span> <span class="n">txload</span> <span class="mi">1</span><span class="o">/</span><span class="mi">255</span><span class="p">,</span> <span class="n">rxload</span> <span class="mi">1</span><span class="o">/</span><span class="mi">255</span>
<span class="n">Encapsulation</span> <span class="n">ARPA</span><span class="p">,</span> <span class="n">loopback</span> <span class="ow">not</span> <span class="nb">set</span>
<span class="n">Keepalive</span> <span class="nb">set</span> <span class="p">(</span><span class="mi">10</span> <span class="n">sec</span><span class="p">)</span>
<span class="n">Full</span><span class="o">-</span><span class="n">duplex</span><span class="p">,</span> <span class="mi">100</span><span class="n">Mb</span><span class="o">/</span><span class="n">s</span><span class="p">,</span> <span class="n">media</span> <span class="nb">type</span> <span class="ow">is</span> <span class="n">RJ45</span>
<span class="n">output</span> <span class="n">flow</span><span class="o">-</span><span class="n">control</span> <span class="ow">is</span> <span class="n">unsupported</span><span class="p">,</span> <span class="nb">input</span> <span class="n">flow</span><span class="o">-</span><span class="n">control</span> <span class="ow">is</span> <span class="n">unsupported</span>
<span class="n">ARP</span> <span class="nb">type</span><span class="p">:</span> <span class="n">ARPA</span><span class="p">,</span> <span class="n">ARP</span> <span class="n">Timeout</span> <span class="mi">04</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="p">,</span>
<span class="n">Last</span> <span class="nb">input</span> <span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">08</span><span class="p">,</span> <span class="n">output</span> <span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">05</span><span class="p">,</span> <span class="n">output</span> <span class="n">hang</span> <span class="n">never</span>
<span class="n">Last</span> <span class="n">clearing</span> <span class="n">of</span> <span class="s2">&quot;show interface&quot;</span> <span class="n">counters</span> <span class="n">never</span>
<span class="n">Input</span> <span class="n">queue</span><span class="p">:</span> <span class="mi">0</span><span class="o">/</span><span class="mi">75</span><span class="o">/</span><span class="mi">0</span> <span class="p">(</span><span class="n">size</span><span class="o">/</span><span class="nb">max</span><span class="o">/</span><span class="n">drops</span><span class="p">);</span> <span class="n">Total</span> <span class="n">output</span> <span class="n">drops</span><span class="p">:</span> <span class="mi">0</span>
<span class="n">Queueing</span> <span class="n">strategy</span><span class="p">:</span> <span class="n">fifo</span>
<span class="n">Output</span> <span class="n">queue</span> <span class="p">:</span><span class="mi">0</span><span class="o">/</span><span class="mi">40</span> <span class="p">(</span><span class="n">size</span><span class="o">/</span><span class="nb">max</span><span class="p">)</span>
<span class="mi">5</span> <span class="n">minute</span> <span class="nb">input</span> <span class="n">rate</span> <span class="mi">0</span> <span class="n">bits</span><span class="o">/</span><span class="n">sec</span><span class="p">,</span> <span class="mi">0</span> <span class="n">packets</span><span class="o">/</span><span class="n">sec</span>
<span class="mi">5</span> <span class="n">minute</span> <span class="n">output</span> <span class="n">rate</span> <span class="mi">0</span> <span class="n">bits</span><span class="o">/</span><span class="n">sec</span><span class="p">,</span> <span class="mi">0</span> <span class="n">packets</span><span class="o">/</span><span class="n">sec</span>
   <span class="mi">0</span> <span class="n">packets</span> <span class="nb">input</span><span class="p">,</span> <span class="mi">0</span> <span class="nb">bytes</span><span class="p">,</span> <span class="mi">0</span> <span class="n">no</span> <span class="n">buffer</span>
   <span class="n">Received</span> <span class="mi">0</span> <span class="n">broadcasts</span><span class="p">,</span> <span class="mi">0</span> <span class="n">runts</span><span class="p">,</span> <span class="mi">0</span> <span class="n">giants</span><span class="p">,</span> <span class="mi">0</span> <span class="n">throttles</span>
   <span class="mi">0</span> <span class="nb">input</span> <span class="n">errors</span><span class="p">,</span> <span class="mi">0</span> <span class="n">CRC</span><span class="p">,</span> <span class="mi">0</span> <span class="n">frame</span><span class="p">,</span> <span class="mi">0</span> <span class="n">overrun</span><span class="p">,</span> <span class="mi">0</span> <span class="n">ignored</span><span class="p">,</span> <span class="mi">0</span> <span class="n">abort</span>
   <span class="mi">0</span> <span class="n">watchdog</span><span class="p">,</span> <span class="mi">1017</span> <span class="n">multicast</span><span class="p">,</span> <span class="mi">0</span> <span class="n">pause</span> <span class="nb">input</span>
   <span class="mi">0</span> <span class="nb">input</span> <span class="n">packets</span> <span class="k">with</span> <span class="n">dribble</span> <span class="n">condition</span> <span class="n">detected</span>
   <span class="mi">0</span> <span class="n">packets</span> <span class="n">output</span><span class="p">,</span> <span class="mi">0</span> <span class="nb">bytes</span><span class="p">,</span> <span class="mi">0</span> <span class="n">underruns</span>
   <span class="mi">0</span> <span class="n">output</span> <span class="n">errors</span><span class="p">,</span> <span class="mi">0</span> <span class="n">collisions</span><span class="p">,</span> <span class="mi">2</span> <span class="n">interface</span> <span class="n">resets</span>
   <span class="mi">0</span> <span class="n">unknown</span> <span class="n">protocol</span> <span class="n">drops</span>
   <span class="mi">0</span> <span class="n">babbles</span><span class="p">,</span> <span class="mi">0</span> <span class="n">late</span> <span class="n">collision</span><span class="p">,</span> <span class="mi">0</span> <span class="n">deferred</span>
   <span class="mi">0</span> <span class="n">lost</span> <span class="n">carrier</span><span class="p">,</span> <span class="mi">0</span> <span class="n">no</span> <span class="n">carrier</span>
   <span class="mi">0</span> <span class="n">output</span> <span class="n">buffer</span> <span class="n">failures</span><span class="p">,</span> <span class="mi">0</span> <span class="n">output</span> <span class="n">buffers</span> <span class="n">swapped</span> <span class="n">out</span>
</pre></div>
</div>
</dd>
<dt>show ip interface</dt>
<dd><div class="code first last highlight-default"><div class="highlight"><pre><span></span><span class="n">SW1</span><span class="c1">#show ip interface</span>
<span class="n">Vlan1</span> <span class="ow">is</span> <span class="n">up</span><span class="p">,</span> <span class="n">line</span> <span class="n">protocol</span> <span class="ow">is</span> <span class="n">up</span>
  <span class="n">Internet</span> <span class="n">address</span> <span class="ow">is</span> <span class="mf">10.10</span><span class="o">.</span><span class="mf">10.2</span><span class="o">/</span><span class="mi">24</span>
  <span class="n">Broadcast</span> <span class="n">address</span> <span class="ow">is</span> <span class="mf">255.255</span><span class="o">.</span><span class="mf">255.255</span>
  <span class="n">Address</span> <span class="n">determined</span> <span class="n">by</span> <span class="n">setup</span> <span class="n">command</span>
  <span class="n">MTU</span> <span class="ow">is</span> <span class="mi">1500</span> <span class="nb">bytes</span>
  <span class="n">Helper</span> <span class="n">address</span> <span class="ow">is</span> <span class="ow">not</span> <span class="nb">set</span>
  <span class="n">Directed</span> <span class="n">broadcast</span> <span class="n">forwarding</span> <span class="ow">is</span> <span class="n">disabled</span>
  <span class="n">Outgoing</span> <span class="n">access</span> <span class="nb">list</span> <span class="ow">is</span> <span class="ow">not</span> <span class="nb">set</span>
  <span class="n">Inbound</span>  <span class="n">access</span> <span class="nb">list</span> <span class="ow">is</span> <span class="ow">not</span> <span class="nb">set</span>
  <span class="n">Proxy</span> <span class="n">ARP</span> <span class="ow">is</span> <span class="n">enabled</span>
  <span class="n">Local</span> <span class="n">Proxy</span> <span class="n">ARP</span> <span class="ow">is</span> <span class="n">disabled</span>
  <span class="n">Security</span> <span class="n">level</span> <span class="ow">is</span> <span class="n">default</span>
  <span class="n">Split</span> <span class="n">horizon</span> <span class="ow">is</span> <span class="n">enabled</span>
  <span class="n">ICMP</span> <span class="n">redirects</span> <span class="n">are</span> <span class="n">always</span> <span class="n">sent</span>
  <span class="n">ICMP</span> <span class="n">unreachables</span> <span class="n">are</span> <span class="n">always</span> <span class="n">sent</span>
  <span class="n">ICMP</span> <span class="n">mask</span> <span class="n">replies</span> <span class="n">are</span> <span class="n">never</span> <span class="n">sent</span>
  <span class="n">IP</span> <span class="n">fast</span> <span class="n">switching</span> <span class="ow">is</span> <span class="n">disabled</span>
  <span class="n">IP</span> <span class="n">fast</span> <span class="n">switching</span> <span class="n">on</span> <span class="n">the</span> <span class="n">same</span> <span class="n">interface</span> <span class="ow">is</span> <span class="n">disabled</span>
  <span class="n">IP</span> <span class="n">Null</span> <span class="n">turbo</span> <span class="n">vector</span>
  <span class="n">IP</span> <span class="n">multicast</span> <span class="n">fast</span> <span class="n">switching</span> <span class="ow">is</span> <span class="n">disabled</span>
  <span class="n">IP</span> <span class="n">multicast</span> <span class="n">distributed</span> <span class="n">fast</span> <span class="n">switching</span> <span class="ow">is</span> <span class="n">disabled</span>
  <span class="n">IP</span> <span class="n">route</span><span class="o">-</span><span class="n">cache</span> <span class="n">flags</span> <span class="n">are</span> <span class="kc">None</span>
  <span class="n">Router</span> <span class="n">Discovery</span> <span class="ow">is</span> <span class="n">disabled</span>
  <span class="n">IP</span> <span class="n">output</span> <span class="n">packet</span> <span class="n">accounting</span> <span class="ow">is</span> <span class="n">disabled</span>
  <span class="n">IP</span> <span class="n">access</span> <span class="n">violation</span> <span class="n">accounting</span> <span class="ow">is</span> <span class="n">disabled</span>
  <span class="n">TCP</span><span class="o">/</span><span class="n">IP</span> <span class="n">header</span> <span class="n">compression</span> <span class="ow">is</span> <span class="n">disabled</span>
  <span class="n">RTP</span><span class="o">/</span><span class="n">IP</span> <span class="n">header</span> <span class="n">compression</span> <span class="ow">is</span> <span class="n">disabled</span>
  <span class="n">Probe</span> <span class="n">proxy</span> <span class="n">name</span> <span class="n">replies</span> <span class="n">are</span> <span class="n">disabled</span>
  <span class="n">Policy</span> <span class="n">routing</span> <span class="ow">is</span> <span class="n">disabled</span>
  <span class="n">Network</span> <span class="n">address</span> <span class="n">translation</span> <span class="ow">is</span> <span class="n">disable</span>
  <span class="n">WCCP</span> <span class="n">Redirect</span> <span class="n">outbound</span> <span class="ow">is</span> <span class="n">disabled</span>
  <span class="n">WCCP</span> <span class="n">Redirect</span> <span class="n">inbound</span> <span class="ow">is</span> <span class="n">disabled</span>
  <span class="n">WCCP</span> <span class="n">Redirect</span> <span class="n">exclude</span> <span class="ow">is</span> <span class="n">disabled</span>
  <span class="n">BGP</span> <span class="n">Policy</span> <span class="n">Mapping</span> <span class="ow">is</span> <span class="n">disabled</span>
</pre></div>
</div>
</dd>
<dt>show ip int brief</dt>
<dd><div class="code first last highlight-default"><div class="highlight"><pre><span></span>RTA(config)#do show ip int brief
 Interface              IP-Address      OK? Method Status                Protocol
 GigabitEthernet0/0     10.10.10.1      YES manual up                    up
 GigabitEthernet0/1     10.10.20.1      YES manual up                    up
 Vlan1                  unassigned      YES unset  administratively down down
</pre></div>
</div>
</dd>
<dt>show ip interface</dt>
<dd><div class="code first last highlight-default"><div class="highlight"><pre><span></span><span class="n">RTA</span><span class="p">(</span><span class="n">config</span><span class="p">)</span><span class="c1">#do show ip interface</span>
 <span class="n">GigabitEthernet0</span><span class="o">/</span><span class="mi">0</span> <span class="ow">is</span> <span class="n">up</span><span class="p">,</span> <span class="n">line</span> <span class="n">protocol</span> <span class="ow">is</span> <span class="n">up</span> <span class="p">(</span><span class="n">connected</span><span class="p">)</span>
   <span class="n">Internet</span> <span class="n">address</span> <span class="ow">is</span> <span class="mf">10.10</span><span class="o">.</span><span class="mf">10.1</span><span class="o">/</span><span class="mi">24</span>
   <span class="n">Broadcast</span> <span class="n">address</span> <span class="ow">is</span> <span class="mf">255.255</span><span class="o">.</span><span class="mf">255.255</span>
   <span class="n">Address</span> <span class="n">determined</span> <span class="n">by</span> <span class="n">setup</span> <span class="n">command</span>
   <span class="n">MTU</span> <span class="ow">is</span> <span class="mi">1500</span> <span class="nb">bytes</span>
   <span class="n">Helper</span> <span class="n">address</span> <span class="ow">is</span> <span class="ow">not</span> <span class="nb">set</span>
   <span class="n">Directed</span> <span class="n">broadcast</span> <span class="n">forwarding</span> <span class="ow">is</span> <span class="n">disabled</span>
   <span class="n">Outgoing</span> <span class="n">access</span> <span class="nb">list</span> <span class="ow">is</span> <span class="ow">not</span> <span class="nb">set</span>
   <span class="n">Inbound</span>  <span class="n">access</span> <span class="nb">list</span> <span class="ow">is</span> <span class="ow">not</span> <span class="nb">set</span>
   <span class="n">Proxy</span> <span class="n">ARP</span> <span class="ow">is</span> <span class="n">enabled</span>
   <span class="n">Security</span> <span class="n">level</span> <span class="ow">is</span> <span class="n">default</span>
   <span class="n">Split</span> <span class="n">horizon</span> <span class="ow">is</span> <span class="n">enabled</span>
   <span class="n">ICMP</span> <span class="n">redirects</span> <span class="n">are</span> <span class="n">always</span> <span class="n">sent</span>
   <span class="n">ICMP</span> <span class="n">unreachables</span> <span class="n">are</span> <span class="n">always</span> <span class="n">sent</span>
   <span class="n">ICMP</span> <span class="n">mask</span> <span class="n">replies</span> <span class="n">are</span> <span class="n">never</span> <span class="n">sent</span>
   <span class="n">IP</span> <span class="n">fast</span> <span class="n">switching</span> <span class="ow">is</span> <span class="n">disabled</span>
   <span class="n">IP</span> <span class="n">fast</span> <span class="n">switching</span> <span class="n">on</span> <span class="n">the</span> <span class="n">same</span> <span class="n">interface</span> <span class="ow">is</span> <span class="n">disabled</span>
   <span class="n">IP</span> <span class="n">Flow</span> <span class="n">switching</span> <span class="ow">is</span> <span class="n">disabled</span>
   <span class="n">IP</span> <span class="n">Fast</span> <span class="n">switching</span> <span class="n">turbo</span> <span class="n">vector</span>
   <span class="n">IP</span> <span class="n">multicast</span> <span class="n">fast</span> <span class="n">switching</span> <span class="ow">is</span> <span class="n">disabled</span>
   <span class="n">IP</span> <span class="n">multicast</span> <span class="n">distributed</span> <span class="n">fast</span> <span class="n">switching</span> <span class="ow">is</span> <span class="n">disabled</span>
   <span class="n">Router</span> <span class="n">Discovery</span> <span class="ow">is</span> <span class="n">disabled</span>
   <span class="n">IP</span> <span class="n">output</span> <span class="n">packet</span> <span class="n">accounting</span> <span class="ow">is</span> <span class="n">disabled</span>
   <span class="n">IP</span> <span class="n">access</span> <span class="n">violation</span> <span class="n">accounting</span> <span class="ow">is</span> <span class="n">disabled</span>
   <span class="n">TCP</span><span class="o">/</span><span class="n">IP</span> <span class="n">header</span> <span class="n">compression</span> <span class="ow">is</span> <span class="n">disabled</span>
   <span class="n">RTP</span><span class="o">/</span><span class="n">IP</span> <span class="n">header</span> <span class="n">compression</span> <span class="ow">is</span> <span class="n">disabled</span>
   <span class="n">Probe</span> <span class="n">proxy</span> <span class="n">name</span> <span class="n">replies</span> <span class="n">are</span> <span class="n">disabled</span>
   <span class="n">Policy</span> <span class="n">routing</span> <span class="ow">is</span> <span class="n">disabled</span>
   <span class="n">Network</span> <span class="n">address</span> <span class="n">translation</span> <span class="ow">is</span> <span class="n">disabled</span>
   <span class="n">BGP</span> <span class="n">Policy</span> <span class="n">Mapping</span> <span class="ow">is</span> <span class="n">disabled</span>
   <span class="n">Input</span> <span class="n">features</span><span class="p">:</span> <span class="n">MCI</span> <span class="n">Check</span>
   <span class="n">WCCP</span> <span class="n">Redirect</span> <span class="n">outbound</span> <span class="ow">is</span> <span class="n">disabled</span>
   <span class="n">WCCP</span> <span class="n">Redirect</span> <span class="n">inbound</span> <span class="ow">is</span> <span class="n">disabled</span>
   <span class="n">WCCP</span> <span class="n">Redirect</span> <span class="n">exclude</span> <span class="ow">is</span> <span class="n">disabled</span>
 <span class="n">GigabitEthernet0</span><span class="o">/</span><span class="mi">1</span> <span class="ow">is</span> <span class="n">up</span><span class="p">,</span> <span class="n">line</span> <span class="n">protocol</span> <span class="ow">is</span> <span class="n">up</span> <span class="p">(</span><span class="n">connected</span><span class="p">)</span>
   <span class="n">Internet</span> <span class="n">address</span> <span class="ow">is</span> <span class="mf">10.10</span><span class="o">.</span><span class="mf">20.1</span><span class="o">/</span><span class="mi">24</span>
   <span class="n">Broadcast</span> <span class="n">address</span> <span class="ow">is</span> <span class="mf">255.255</span><span class="o">.</span><span class="mf">255.255</span>
   <span class="n">Address</span> <span class="n">determined</span> <span class="n">by</span> <span class="n">setup</span> <span class="n">command</span>
   <span class="n">MTU</span> <span class="ow">is</span> <span class="mi">1500</span> <span class="nb">bytes</span>
   <span class="n">Helper</span> <span class="n">address</span> <span class="ow">is</span> <span class="ow">not</span> <span class="nb">set</span>
   <span class="n">Directed</span> <span class="n">broadcast</span> <span class="n">forwarding</span> <span class="ow">is</span> <span class="n">disabled</span>
   <span class="n">Outgoing</span> <span class="n">access</span> <span class="nb">list</span> <span class="ow">is</span> <span class="ow">not</span> <span class="nb">set</span>
   <span class="n">Inbound</span>  <span class="n">access</span> <span class="nb">list</span> <span class="ow">is</span> <span class="ow">not</span> <span class="nb">set</span>
   <span class="n">Proxy</span> <span class="n">ARP</span> <span class="ow">is</span> <span class="n">enabled</span>
   <span class="n">Security</span> <span class="n">level</span> <span class="ow">is</span> <span class="n">default</span>
   <span class="n">Split</span> <span class="n">horizon</span> <span class="ow">is</span> <span class="n">enabled</span>
   <span class="n">ICMP</span> <span class="n">redirects</span> <span class="n">are</span> <span class="n">always</span> <span class="n">sent</span>
   <span class="n">ICMP</span> <span class="n">unreachables</span> <span class="n">are</span> <span class="n">always</span> <span class="n">sent</span>
   <span class="n">ICMP</span> <span class="n">mask</span> <span class="n">replies</span> <span class="n">are</span> <span class="n">never</span> <span class="n">sent</span>
   <span class="n">IP</span> <span class="n">fast</span> <span class="n">switching</span> <span class="ow">is</span> <span class="n">disabled</span>
   <span class="n">IP</span> <span class="n">fast</span> <span class="n">switching</span> <span class="n">on</span> <span class="n">the</span> <span class="n">same</span> <span class="n">interface</span> <span class="ow">is</span> <span class="n">disabled</span>
   <span class="n">IP</span> <span class="n">Flow</span> <span class="n">switching</span> <span class="ow">is</span> <span class="n">disabled</span>
   <span class="n">IP</span> <span class="n">Fast</span> <span class="n">switching</span> <span class="n">turbo</span> <span class="n">vector</span>
   <span class="n">IP</span> <span class="n">multicast</span> <span class="n">fast</span> <span class="n">switching</span> <span class="ow">is</span> <span class="n">disabled</span>
   <span class="n">IP</span> <span class="n">multicast</span> <span class="n">distributed</span> <span class="n">fast</span> <span class="n">switching</span> <span class="ow">is</span> <span class="n">disabled</span>
   <span class="n">Router</span> <span class="n">Discovery</span> <span class="ow">is</span> <span class="n">disabled</span>
   <span class="n">IP</span> <span class="n">output</span> <span class="n">packet</span> <span class="n">accounting</span> <span class="ow">is</span> <span class="n">disabled</span>
   <span class="n">IP</span> <span class="n">access</span> <span class="n">violation</span> <span class="n">accounting</span> <span class="ow">is</span> <span class="n">disabled</span>
   <span class="n">TCP</span><span class="o">/</span><span class="n">IP</span> <span class="n">header</span> <span class="n">compression</span> <span class="ow">is</span> <span class="n">disabled</span>
   <span class="n">RTP</span><span class="o">/</span><span class="n">IP</span> <span class="n">header</span> <span class="n">compression</span> <span class="ow">is</span> <span class="n">disabled</span>
   <span class="n">Probe</span> <span class="n">proxy</span> <span class="n">name</span> <span class="n">replies</span> <span class="n">are</span> <span class="n">disabled</span>
   <span class="n">Policy</span> <span class="n">routing</span> <span class="ow">is</span> <span class="n">disabled</span>
   <span class="n">Network</span> <span class="n">address</span> <span class="n">translation</span> <span class="ow">is</span> <span class="n">disabled</span>
   <span class="n">BGP</span> <span class="n">Policy</span> <span class="n">Mapping</span> <span class="ow">is</span> <span class="n">disabled</span>
   <span class="n">Input</span> <span class="n">features</span><span class="p">:</span> <span class="n">MCI</span> <span class="n">Check</span>
   <span class="n">WCCP</span> <span class="n">Redirect</span> <span class="n">outbound</span> <span class="ow">is</span> <span class="n">disabled</span>
   <span class="n">WCCP</span> <span class="n">Redirect</span> <span class="n">inbound</span> <span class="ow">is</span> <span class="n">disabled</span>
   <span class="n">WCCP</span> <span class="n">Redirect</span> <span class="n">exclude</span> <span class="ow">is</span> <span class="n">disabled</span>
 <span class="n">Vlan1</span> <span class="ow">is</span> <span class="n">administratively</span> <span class="n">down</span><span class="p">,</span> <span class="n">line</span> <span class="n">protocol</span> <span class="ow">is</span> <span class="n">down</span>
   <span class="n">Internet</span> <span class="n">protocol</span> <span class="n">processing</span> <span class="n">disabled</span>
</pre></div>
</div>
</dd>
<dt>show ip route</dt>
<dd><div class="code first last highlight-default"><div class="highlight"><pre><span></span><span class="n">RTA</span><span class="p">(</span><span class="n">config</span><span class="p">)</span><span class="c1">#do show ip route</span>
<span class="n">Codes</span><span class="p">:</span> <span class="n">L</span> <span class="o">-</span> <span class="n">local</span><span class="p">,</span> <span class="n">C</span> <span class="o">-</span> <span class="n">connected</span><span class="p">,</span> <span class="n">S</span> <span class="o">-</span> <span class="n">static</span><span class="p">,</span> <span class="n">R</span> <span class="o">-</span> <span class="n">RIP</span><span class="p">,</span> <span class="n">M</span> <span class="o">-</span> <span class="n">mobile</span><span class="p">,</span> <span class="n">B</span> <span class="o">-</span> <span class="n">BGP</span>
       <span class="n">D</span> <span class="o">-</span> <span class="n">EIGRP</span><span class="p">,</span> <span class="n">EX</span> <span class="o">-</span> <span class="n">EIGRP</span> <span class="n">external</span><span class="p">,</span> <span class="n">O</span> <span class="o">-</span> <span class="n">OSPF</span><span class="p">,</span> <span class="n">IA</span> <span class="o">-</span> <span class="n">OSPF</span> <span class="n">inter</span> <span class="n">area</span>
       <span class="n">N1</span> <span class="o">-</span> <span class="n">OSPF</span> <span class="n">NSSA</span> <span class="n">external</span> <span class="nb">type</span> <span class="mi">1</span><span class="p">,</span> <span class="n">N2</span> <span class="o">-</span> <span class="n">OSPF</span> <span class="n">NSSA</span> <span class="n">external</span> <span class="nb">type</span> <span class="mi">2</span>
       <span class="n">E1</span> <span class="o">-</span> <span class="n">OSPF</span> <span class="n">external</span> <span class="nb">type</span> <span class="mi">1</span><span class="p">,</span> <span class="n">E2</span> <span class="o">-</span> <span class="n">OSPF</span> <span class="n">external</span> <span class="nb">type</span> <span class="mi">2</span><span class="p">,</span> <span class="n">E</span> <span class="o">-</span> <span class="n">EGP</span>
       <span class="n">i</span> <span class="o">-</span> <span class="n">IS</span><span class="o">-</span><span class="n">IS</span><span class="p">,</span> <span class="n">L1</span> <span class="o">-</span> <span class="n">IS</span><span class="o">-</span><span class="n">IS</span> <span class="n">level</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="n">L2</span> <span class="o">-</span> <span class="n">IS</span><span class="o">-</span><span class="n">IS</span> <span class="n">level</span><span class="o">-</span><span class="mi">2</span><span class="p">,</span> <span class="n">ia</span> <span class="o">-</span> <span class="n">IS</span><span class="o">-</span><span class="n">IS</span> <span class="n">inter</span> <span class="n">area</span>
       <span class="o">*</span> <span class="o">-</span> <span class="n">candidate</span> <span class="n">default</span><span class="p">,</span> <span class="n">U</span> <span class="o">-</span> <span class="n">per</span><span class="o">-</span><span class="n">user</span> <span class="n">static</span> <span class="n">route</span><span class="p">,</span> <span class="n">o</span> <span class="o">-</span> <span class="n">ODR</span>
       <span class="n">P</span> <span class="o">-</span> <span class="n">periodic</span> <span class="n">downloaded</span> <span class="n">static</span> <span class="n">route</span>
<span class="o">--</span>
<span class="n">Gateway</span> <span class="n">of</span> <span class="n">last</span> <span class="n">resort</span> <span class="ow">is</span> <span class="ow">not</span> <span class="nb">set</span>
<span class="o">--</span>
     <span class="mf">10.0</span><span class="o">.</span><span class="mf">0.0</span><span class="o">/</span><span class="mi">8</span> <span class="ow">is</span> <span class="n">variably</span> <span class="n">subnetted</span><span class="p">,</span> <span class="mi">4</span> <span class="n">subnets</span><span class="p">,</span> <span class="mi">2</span> <span class="n">masks</span>
<span class="n">C</span>       <span class="mf">10.10</span><span class="o">.</span><span class="mf">10.0</span><span class="o">/</span><span class="mi">24</span> <span class="ow">is</span> <span class="n">directly</span> <span class="n">connected</span><span class="p">,</span> <span class="n">GigabitEthernet0</span><span class="o">/</span><span class="mi">0</span>
<span class="n">L</span>       <span class="mf">10.10</span><span class="o">.</span><span class="mf">10.1</span><span class="o">/</span><span class="mi">32</span> <span class="ow">is</span> <span class="n">directly</span> <span class="n">connected</span><span class="p">,</span> <span class="n">GigabitEthernet0</span><span class="o">/</span><span class="mi">0</span>
<span class="n">C</span>       <span class="mf">10.10</span><span class="o">.</span><span class="mf">20.0</span><span class="o">/</span><span class="mi">24</span> <span class="ow">is</span> <span class="n">directly</span> <span class="n">connected</span><span class="p">,</span> <span class="n">GigabitEthernet0</span><span class="o">/</span><span class="mi">1</span>
<span class="n">L</span>       <span class="mf">10.10</span><span class="o">.</span><span class="mf">20.1</span><span class="o">/</span><span class="mi">32</span> <span class="ow">is</span> <span class="n">directly</span> <span class="n">connected</span><span class="p">,</span> <span class="n">GigabitEthernet0</span><span class="o">/</span><span class="mi">1</span>
</pre></div>
</div>
</dd>
<dt>show ip route connected</dt>
<dd><div class="code first last highlight-default"><div class="highlight"><pre><span></span><span class="n">RTA</span><span class="p">(</span><span class="n">config</span><span class="p">)</span><span class="c1">#do show ip route connected</span>
 <span class="n">C</span>   <span class="mf">10.10</span><span class="o">.</span><span class="mf">10.0</span><span class="o">/</span><span class="mi">24</span>  <span class="ow">is</span> <span class="n">directly</span> <span class="n">connected</span><span class="p">,</span> <span class="n">GigabitEthernet0</span><span class="o">/</span><span class="mi">0</span>
 <span class="n">C</span>   <span class="mf">10.10</span><span class="o">.</span><span class="mf">20.0</span><span class="o">/</span><span class="mi">24</span>  <span class="ow">is</span> <span class="n">directly</span> <span class="n">connected</span><span class="p">,</span> <span class="n">GigabitEthernet0</span><span class="o">/</span><span class="mi">1</span>
</pre></div>
</div>
</dd>
</dl>
</div>
<div class="section" id="arp-neighbor-advertisement-sollicitation">
<h4>ARP - Neighbor Advertisement/Sollicitation<a class="headerlink" href="#arp-neighbor-advertisement-sollicitation" title="Permalink to this headline">¶</a></h4>
<p>A similar process is used for IPv6 packets. Instead of the ARP process, IPv6 address resolution uses ICMPv6 Neighbor Solicitation and Neighbor Advertisement messages. IPv6-to-MAC address mapping are kept in a table similar to the ARP cache, called the neighbor cache.</p>
</div>
<div class="section" id="mac-addresses-on-serial-interfaces">
<h4>MAC addresses on Serial Interfaces<a class="headerlink" href="#mac-addresses-on-serial-interfaces" title="Permalink to this headline">¶</a></h4>
<p>When the interface is a point-to-point (P2P) serial connection, the router encapsulates the IPv4 packet into the proper data link frame format used by the exit interface (HDLC, PPP, etc.). Because there are no MAC addresses on serial interfaces, R2 sets the data link destination address to an equivalent of a broadcast.
The router does not need to know any info about the destination L2 address, so the router just sends the frame out the corresponding serial interface. No source address is required on a P2P serial connection</p>
<p>HDLC frames can be transmitted over synchronous or asynchronous serial communication links. Those links have no mechanism to mark the beginning or end of a frame, so the beginning and end of each frame has to be identified. This is done by using a frame delimiter, or flag, which is a unique sequence of bits that is guaranteed not to be seen inside a frame.
This sequence is ‘01111110’, or, in hexadecimal notation, 0x7E. Each frame begins and ends with a frame delimiter. A frame delimiter at the end of a frame may also mark the start of the next frame.
A sequence of 7 or more consecutive 1-bits within a frame will cause the frame to be aborted.</p>
<table border="1" class="docutils">
<colgroup>
<col width="13%" />
<col width="0%" />
<col width="11%" />
<col width="13%" />
<col width="15%" />
<col width="31%" />
<col width="5%" />
<col width="13%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>Flag 7E</td>
<td colspan="2">Address</td>
<td>Control</td>
<td>Protocol</td>
<td>Data</td>
<td>FCS</td>
<td>Flag 7E</td>
</tr>
<tr class="row-even"><td>8 bits</td>
<td colspan="2">8 bits</td>
<td>8 bits</td>
<td>16 bits</td>
<td>~ length 0 or x*8</td>
<td>16b</td>
<td>8 bits</td>
</tr>
</tbody>
</table>
<p>The Address field is used to specify the type of packet contained in the cHDLC frame; 0x0F for Unicast and 0x8F for Broadcast packets.
The Control field is always set to zero (0x00).
The Protocol Code field is used to specify the protocol type encapsulated within the cHDLC frame (e.g. 0x0800 for Internet Protocol).</p>
</div>
<div class="section" id="packet-forwarding-decision-process">
<h4>Packet Forwarding Decision Process<a class="headerlink" href="#packet-forwarding-decision-process" title="Permalink to this headline">¶</a></h4>
<p>Directly Connected Interface?
Yes -&gt; Check ARP cache (ARP request if necessary) and forward to host on local subnet
Remote Network? Yes -&gt; Encapsulate the frame and forward out of the exit interface to the next hop
else Gateway of last resort or drop</p>
</div>
<div class="section" id="routing-best-path-selection">
<h4>Routing BEST PATH selection<a class="headerlink" href="#routing-best-path-selection" title="Permalink to this headline">¶</a></h4>
<dl class="docutils">
<dt>RIP</dt>
<dd>Routing Information Protocol - Hop count</dd>
<dt>OSPF</dt>
<dd>Open Shortest Path First     - Cisco’s cost based on CUMULATIVE bandwidth from source to destination</dd>
<dt>EIGRP</dt>
<dd>Enhanced Interior Gateway Routing Protocol - Bandwidth, delay, load, reliability (bladder)</dd>
</dl>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">two or more paths with identical metrics = LOAD BALANCING</p>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Equal cost load balancing can be cfd to use both dynamic routing protocols and static routes ONLY EIGRP support UNEQUAL COST LOAD BALANCING</p>
</div>
</div>
<div class="section" id="administrative-distance">
<h4>ADMINISTRATIVE DISTANCE<a class="headerlink" href="#administrative-distance" title="Permalink to this headline">¶</a></h4>
<p>For example, if both RIP and EIGRP are configured on a router, both routing protocols may learn of the same destination network.
However, each routing protocol may decide on a different path to reach the destination based on that routing protocol’s metrics.
RIP chooses a path based on hop count, whereas EIGRP chooses a path based on its composite metric. How does the router know which route to use?</p>
<p>Cisco IOS uses what is known as the administrative distance (AD) to determine the route to install into the IP routing table.
The AD represents the “trustworthiness” of the route; the lower the AD,
the more trustworthy the route source. For example, a static route has an AD of 1,
whereas an EIGRP-discovered route has an AD of 90.
Given two separate routes to the same destination, the router chooses the route with the lowest AD.
When a router has the choice of a static route and an EIGRP route, the static route takes precedence.</p>
<blockquote>
<div><p>Default Distance Value Table</p>
<p>This table lists the administrative distance default values of the protocols that Cisco supports:</p>
<table border="1" class="docutils">
<colgroup>
<col width="63%" />
<col width="37%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Routing Protocol</th>
<th class="head">Administrative distance</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>Directly connected interface</td>
<td>0</td>
</tr>
<tr class="row-odd"><td>Static route out an interface</td>
<td>1</td>
</tr>
<tr class="row-even"><td>Static route to next-hop address</td>
<td>1</td>
</tr>
<tr class="row-odd"><td>DMNR - Dynamic Mobile Network Routing</td>
<td>3</td>
</tr>
<tr class="row-even"><td>EIGRP summary route</td>
<td>5</td>
</tr>
<tr class="row-odd"><td>External BGP</td>
<td>20</td>
</tr>
<tr class="row-even"><td>Internal EIGRP</td>
<td>90</td>
</tr>
<tr class="row-odd"><td>IGRP</td>
<td>100</td>
</tr>
<tr class="row-even"><td>OSPF</td>
<td>110</td>
</tr>
<tr class="row-odd"><td>IS-IS</td>
<td>115</td>
</tr>
<tr class="row-even"><td>Routing Information Protocol (RIP)</td>
<td>120</td>
</tr>
<tr class="row-odd"><td>Exterior Gateway Protocol (EGP)</td>
<td>140</td>
</tr>
<tr class="row-even"><td>On Demand Routing (ODR)</td>
<td>160</td>
</tr>
<tr class="row-odd"><td>External EIGRP</td>
<td>170</td>
</tr>
<tr class="row-even"><td>Internal BGP</td>
<td>200</td>
</tr>
<tr class="row-odd"><td>Next Hop Resolution Protocol (NHRP)</td>
<td>250</td>
</tr>
<tr class="row-even"><td>Floating Static Route (ex. DHCP-learned)</td>
<td>254</td>
</tr>
<tr class="row-odd"><td>Unknown (Others)</td>
<td>255</td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">If the administrative distance is 255, the router does not believe the source of that route and does not install the route in the routing table.
Since IOS 12.2, the administrative distance of a static route with an exit interface is 1.
Only the interface itself has an administrative distance of 0, since a route cannot have a distance of less than 1.
Directly connected routes have an administrative distance of 0.</p>
</div>
</div></blockquote>
</div>
<div class="section" id="changing-administrative-distance">
<h4>Changing Administrative Distance<a class="headerlink" href="#changing-administrative-distance" title="Permalink to this headline">¶</a></h4>
<p>When you use <em>route redistribution</em>, occasionally you need to modify the administrative distance of a protocol so that it takes precedence.
For example, if you want the router to select RIP-learned routes (default value 120) rather than IGRP-learned routes (default value 100)
to the same destination, you must increase the administrative distance for IGRP to 120+,
or decrease the administrative distance of RIP to a value less than 100.</p>
<p>You can modify the administrative distance of a protocol through the distance command in the routing process subconfiguration mode.
This command specifies that the administrative distance is assigned to the routes learned from a particular routing protocol.
You need to use this procedure generally when you migrate the network from one routing protocol to another,
and the latter has a higher administrative distance. However, a change in the administrative distance <em>can lead to routing loops and black holes</em>.</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">use caution if you change the administrative distance.</p>
</div>
<div class="code highlight-default"><div class="highlight"><pre><span></span><span class="n">R1</span><span class="p">(</span><span class="n">config</span><span class="p">)</span><span class="c1">#router eigrp 10</span>
<span class="n">R1</span><span class="p">(</span><span class="n">config</span><span class="o">-</span><span class="n">router</span><span class="p">)</span><span class="c1">#distance eigrp xx yy</span>

<span class="n">where</span> <span class="n">xx</span> <span class="n">representes</span> <span class="n">the</span> <span class="n">new</span> <span class="n">value</span> <span class="n">of</span> <span class="n">internal</span> <span class="n">administrative</span> <span class="n">distance</span> <span class="ow">and</span> <span class="n">yy</span> <span class="n">representes</span> <span class="n">the</span> <span class="n">new</span> <span class="n">value</span> <span class="n">of</span> <span class="n">the</span> <span class="n">external</span> <span class="n">administrative</span> <span class="n">distance</span><span class="o">.</span>
</pre></div>
</div>
</div>
<div class="section" id="example-of-changing-ad-for-rip">
<h4>example of changing AD for rip<a class="headerlink" href="#example-of-changing-ad-for-rip" title="Permalink to this headline">¶</a></h4>
<p>Here is an example that shows two routers, R1 and R2, connected through Ethernet. The loopback interfaces of the routers are also advertised with RIP and IGRP on both the routers.
You can observe that the IGRP routes are preferred over the RIP routes in the routing table because the administrative distance is 100.</p>
<div class="code highlight-default"><div class="highlight"><pre><span></span><span class="n">R1</span><span class="c1">#show ip route</span>

<span class="n">Gateway</span> <span class="n">of</span> <span class="n">last</span> <span class="n">resort</span> <span class="ow">is</span> <span class="ow">not</span> <span class="nb">set</span>

<span class="mf">172.16</span><span class="o">.</span><span class="mf">0.0</span><span class="o">/</span><span class="mi">24</span> <span class="ow">is</span> <span class="n">subnetted</span><span class="p">,</span> <span class="mi">1</span> <span class="n">subnets</span>
<span class="n">C</span> <span class="mf">172.16</span><span class="o">.</span><span class="mf">1.0</span> <span class="ow">is</span> <span class="n">directly</span> <span class="n">connected</span><span class="p">,</span> <span class="n">Ethernet0</span>
<span class="n">I</span> <span class="mf">10.0</span><span class="o">.</span><span class="mf">0.0</span><span class="o">/</span><span class="mi">8</span> <span class="p">[</span><span class="mi">100</span><span class="o">/</span><span class="mi">1600</span><span class="p">]</span> <span class="n">via</span> <span class="mf">172.16</span><span class="o">.</span><span class="mf">1.200</span><span class="p">,</span> <span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">01</span><span class="p">,</span> <span class="n">Ethernet0</span>
<span class="n">C</span> <span class="mf">192.168</span><span class="o">.</span><span class="mf">1.0</span><span class="o">/</span><span class="mi">24</span> <span class="ow">is</span> <span class="n">directly</span> <span class="n">connected</span><span class="p">,</span> <span class="n">Loopback0</span>

<span class="n">R2</span><span class="c1">#show ip route</span>

<span class="n">Gateway</span> <span class="n">of</span> <span class="n">last</span> <span class="n">resort</span> <span class="ow">is</span> <span class="ow">not</span> <span class="nb">set</span>

<span class="mf">172.16</span><span class="o">.</span><span class="mf">0.0</span><span class="o">/</span><span class="mi">24</span> <span class="ow">is</span> <span class="n">subnetted</span><span class="p">,</span> <span class="mi">1</span> <span class="n">subnets</span>
<span class="n">C</span> <span class="mf">172.16</span><span class="o">.</span><span class="mf">1.0</span> <span class="ow">is</span> <span class="n">directly</span> <span class="n">connected</span><span class="p">,</span> <span class="n">Ethernet0</span>
<span class="n">C</span> <span class="mf">10.0</span><span class="o">.</span><span class="mf">0.0</span><span class="o">/</span><span class="mi">8</span> <span class="ow">is</span> <span class="n">directly</span> <span class="n">connected</span><span class="p">,</span> <span class="n">Loopback0</span>
<span class="n">I</span> <span class="mf">192.168</span><span class="o">.</span><span class="mf">1.0</span><span class="o">/</span><span class="mi">24</span> <span class="p">[</span><span class="mi">100</span><span class="o">/</span><span class="mi">1600</span><span class="p">]</span> <span class="n">via</span> <span class="mf">172.16</span><span class="o">.</span><span class="mf">1.100</span><span class="p">,</span> <span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">33</span><span class="p">,</span>
</pre></div>
</div>
<p>In order to enable the router to prefer RIP routes to IGRP, configure the distance command on R1 like this:</p>
<div class="code highlight-default"><div class="highlight"><pre><span></span><span class="n">R1</span><span class="p">(</span><span class="n">config</span><span class="p">)</span><span class="c1">#router rip</span>
<span class="n">R1</span><span class="p">(</span><span class="n">config</span><span class="o">-</span><span class="n">router</span><span class="p">)</span><span class="c1">#distance 90</span>
</pre></div>
</div>
<p>Now look at the routing table. The routing table shows that the router prefers the RIP routes. The router learns RIP routes with an administrative distance of 90, although the default is 120.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The new administrative distance value is relevant only to the routing process of a single router (in this case R1). R2 still has IGRP routes in the routing table.</p>
</div>
<div class="code highlight-default"><div class="highlight"><pre><span></span><span class="n">R1</span><span class="c1">#show ip route</span>

<span class="n">Gateway</span> <span class="n">of</span> <span class="n">last</span> <span class="n">resort</span> <span class="ow">is</span> <span class="ow">not</span> <span class="nb">set</span>

<span class="mf">172.16</span><span class="o">.</span><span class="mf">0.0</span><span class="o">/</span><span class="mi">24</span> <span class="ow">is</span> <span class="n">subnetted</span><span class="p">,</span> <span class="mi">1</span> <span class="n">subnets</span>
<span class="n">C</span> <span class="mf">172.16</span><span class="o">.</span><span class="mf">1.0</span> <span class="ow">is</span> <span class="n">directly</span> <span class="n">connected</span><span class="p">,</span> <span class="n">Ethernet0</span>
<span class="n">R</span> <span class="mf">10.0</span><span class="o">.</span><span class="mf">0.0</span><span class="o">/</span><span class="mi">8</span> <span class="p">[</span><span class="mi">90</span><span class="o">/</span><span class="mi">1</span><span class="p">]</span> <span class="n">via</span> <span class="mf">172.16</span><span class="o">.</span><span class="mf">1.200</span><span class="p">,</span> <span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">16</span><span class="p">,</span> <span class="n">Ethernet0</span>
<span class="n">C</span> <span class="mf">192.168</span><span class="o">.</span><span class="mf">1.0</span><span class="o">/</span><span class="mi">24</span> <span class="ow">is</span> <span class="n">directly</span> <span class="n">connected</span><span class="p">,</span> <span class="n">Loopback0</span>

<span class="n">R2</span><span class="c1">#show ip route</span>

<span class="n">Gateway</span> <span class="n">of</span> <span class="n">last</span> <span class="n">resort</span> <span class="ow">is</span> <span class="ow">not</span> <span class="nb">set</span>

<span class="mf">172.16</span><span class="o">.</span><span class="mf">0.0</span><span class="o">/</span><span class="mi">24</span> <span class="ow">is</span> <span class="n">subnetted</span><span class="p">,</span> <span class="mi">1</span> <span class="n">subnets</span>
<span class="n">C</span> <span class="mf">172.16</span><span class="o">.</span><span class="mf">1.0</span> <span class="ow">is</span> <span class="n">directly</span> <span class="n">connected</span><span class="p">,</span> <span class="n">Ethernet0</span>
<span class="n">C</span> <span class="mf">10.0</span><span class="o">.</span><span class="mf">0.0</span><span class="o">/</span><span class="mi">8</span> <span class="ow">is</span> <span class="n">directly</span> <span class="n">connected</span><span class="p">,</span> <span class="n">Loopback0</span>
<span class="n">I</span> <span class="mf">192.168</span><span class="o">.</span><span class="mf">1.0</span><span class="o">/</span><span class="mi">24</span> <span class="p">[</span><span class="mi">100</span><span class="o">/</span><span class="mi">1600</span><span class="p">]</span> <span class="n">via</span> <span class="mf">172.16</span><span class="o">.</span><span class="mf">1.100</span><span class="p">,</span> <span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">33</span><span class="p">,</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">There are no general guidelines to assign administrative distances because each network has varied requirements. You must determine a reasonable matrix of administrative distances for the network as a whole. Similarly, a directly connected route with an AD of 0 takes precedence over a static route with an AD of 1.</p>
</div>
</div>
<div class="section" id="other-applications-of-a-d">
<h4>Other applications of A.D.<a class="headerlink" href="#other-applications-of-a-d" title="Permalink to this headline">¶</a></h4>
<p>One common reason to change the administrative distance of a route is when you use <em>Static Routes to backup an existing IGP route</em>.
This is normally used to bring up a backup link when the primary fails.</p>
<p>For example, assume that you use the routing table from R1. However, in this case,
there is also an ISDN line that you can use as a backup if the primary connection fails. Here is an example of a Floating Static for this route:</p>
<div class="code highlight-default"><div class="highlight"><pre><span></span>ip route 10.0.0.0 255.0.0.0 Dialer 1 250
!--- Note: The Administrative Distance is set to 250.
</pre></div>
</div>
<p>If the Ethernet interfaces fail, or if you manually bring down the Ethernet interfaces, the floating static route is installed into the routing table. All traffic destined for the 10.0.0.0/8 network is then routed out of the Dialer 1 interface and over the backup link.
The routing table appears similar to this after the failure:</p>
<div class="code highlight-default"><div class="highlight"><pre><span></span><span class="n">R1</span><span class="c1">#show ip route</span>
<span class="n">Gateway</span> <span class="n">of</span> <span class="n">last</span> <span class="n">resort</span> <span class="ow">is</span> <span class="ow">not</span> <span class="nb">set</span>
<span class="mf">172.16</span><span class="o">.</span><span class="mf">0.0</span><span class="o">/</span><span class="mi">24</span> <span class="ow">is</span> <span class="n">subnetted</span><span class="p">,</span> <span class="mi">1</span> <span class="n">subnets</span>
<span class="n">C</span> <span class="mf">172.16</span><span class="o">.</span><span class="mf">1.0</span> <span class="ow">is</span> <span class="n">directly</span> <span class="n">connected</span><span class="p">,</span> <span class="n">Ethernet0</span>
<span class="n">S</span> <span class="mf">10.0</span><span class="o">.</span><span class="mf">0.0</span><span class="o">/</span><span class="mi">8</span> <span class="ow">is</span> <span class="n">directly</span> <span class="n">connected</span><span class="p">,</span> <span class="n">Dialer1</span>
<span class="n">C</span> <span class="mf">192.168</span><span class="o">.</span><span class="mf">1.0</span><span class="o">/</span><span class="mi">24</span> <span class="ow">is</span> <span class="n">directly</span> <span class="n">connected</span><span class="p">,</span> <span class="n">Loopback0</span>
</pre></div>
</div>
</div>
<div class="section" id="directly-connected-n-remote-network-routes">
<h4>Directly Connected n Remote Network Routes<a class="headerlink" href="#directly-connected-n-remote-network-routes" title="Permalink to this headline">¶</a></h4>
<blockquote>
<div><dl class="docutils">
<dt>Directly connected routes</dt>
<dd>These routes come from the active router interfaces. Routers add a directly connected route when an interface is configured with an IP address and is activated.</dd>
<dt>Remote routes</dt>
<dd>These are remote networks connected to other routers. Routes to these networks can either be statically configured or dynamically learned through dynamic routing protocols.</dd>
</dl>
</div></blockquote>
<p>The sources of the routing table entries are identified by a <em>code</em>. The code identifies how the route was learned. For instance, common codes include:</p>
<blockquote>
<div><ul class="simple">
<li>L - Identifies the address assigned to a router’s interface. This allows the router to efficiently determine when it receives a packet for the interface instead of being forwarded.</li>
<li>C - Identifies a directly connected network.</li>
<li>S - Identifies a static route created to reach a specific network.</li>
<li>D - Identifies a dynamically learned network from another router using EIGRP.</li>
<li>O - Identifies a dynamically learned network from another router using the OSPF routing protocol.</li>
</ul>
</div></blockquote>
<p>D 10.1.1.0/24 [90/2170112] via 209.165.200.226, 00:00:05, Serial0/0/0</p>
<blockquote>
<div><ul class="simple">
<li>Route source - Identifies how the route was learned.</li>
<li>Destination network - Identifies the address of the remote network.</li>
<li>Administrative distance - Identifies the trustworthiness of the route source. Lower values indicate preferred route source.</li>
<li>Metric - Identifies the value assigned to reach the remote network. Lower values indicate preferred routes.</li>
<li>Next-hop - Identifies the IPv4 address of the next router to forward the packet to.</li>
<li>Route timestamp - Identifies how much time has passed since the route was learned.</li>
<li>Outgoing interface - Identifies the exit interface to use to forward a packet toward the final destination.</li>
</ul>
</div></blockquote>
</div>
<div class="section" id="the-ip-routing-process">
<h4>The IP routing process<a class="headerlink" href="#the-ip-routing-process" title="Permalink to this headline">¶</a></h4>
<p>IP routing example using two hosts and one router</p>
<p>User on Host_A pinged Host_B’s IP address. Routing doesn’t get any simpler than this, but it still involves a lot of steps, so let’s work through them now:</p>
<ol class="arabic">
<li><p class="first">Internet Control Message Protocol (ICMP) creates an echo request payload, which is simply the alphabet in the data field.</p>
</li>
<li><p class="first">ICMP hands that payload to Internet Protocol (IP), which then creates a packet. At a minimum, this packet contains an IP source address, an IP destination address, and a Protocol field with 01h. Don’t forget that Cisco likes to use 0x in front of hex characters, so this could also look like 0x01. This tells the receiving host to whom it should hand the payload when the destination is reached—in this example, ICMP.</p>
</li>
<li><p class="first">Once the packet is created, IP determines whether the destination IP address is on the local network or a remote one.</p>
</li>
<li><p class="first">Since IP has determined that this is a remote request, the packet must be sent to the default gateway so it can be routed to the remote network. The Registry in Windows is parsed to find the configured default gateway.</p>
</li>
<li><p class="first">The default gateway of Host_A is configured to 172.16.10.1. For this packet to be sent to the default gateway, the hardware address of the router’s interface Ethernet 0, which is configured with the IP address of 172.16.10.1, must be known. Why? So the packet can be handed down to the Data Link layer, framed, and sent to the router’s interface that’s connected to the 172.16.10.0 network. Because hosts communicate only via hardware addresses on the local LAN, it’s important to recognize that for Host_A to communicate to Host_B, it has to send packets to the Media Access Control (MAC) address of the default gateway on the local network. MAC addresses are always local on the LAN and never go through and past a router.</p>
</li>
<li><p class="first">Next, the Address Resolution Protocol (ARP) cache of the host is checked to see if the IP address of the default gateway has already been resolved to a hardware address. If it has, the packet is then free to be handed to the Data Link layer for framing. Remember that the hardware destination address is also handed down with that packet.</p>
</li>
<li><p class="first">If the hardware address isn’t already in the ARP cache of the host, an ARP broadcast will be sent out onto the local network to search for the 172.16.10.1 hardware address. The router then responds to the request and provides the hardware address of Ethernet 0, and the host caches this address.</p>
</li>
<li><p class="first">Once the packet and destination hardware address are handed to the Data Link layer, the LAN driver is used to provide media access via the type of LAN being used, which is Ethernet in this case. A frame is then generated, encapsulating the packet with control information. Within that frame are the hardware destination and source addresses plus, in this case, an Ether-Type field, which identifies the specific Network layer protocol that handed the packet to the Data Link layer. In this instance, it’s IP. At the end of the frame is something called a Frame Check Sequence (FCS) field that houses the result of the cyclic redundancy check (CRC). The frame would look something like what I’ve detailed in Figure 9.3. It contains Host A’s hardware (MAC) address and the destination hardware address of the default gateway. It does not include the remote host’s MAC address—remember that!</p>
</li>
<li><p class="first">Once the frame is completed, it’s handed down to the Physical layer to be put on the physical medium (in this example, twisted-pair wire) one bit at a time.</p>
</li>
<li><p class="first">Every device in the collision domain receives these bits and builds the frame. They each run a CRC and check the answer in the FCS field. If the answers don’t match, the frame is discarded:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>* If the CRC matches, then the hardware destination address is checked to see if it matches (which, in this example, is the router’s interface Ethernet 0).
* If it’s a match, then the Ether-Type field is checked to find the protocol used at the Network layer.
</pre></div>
</div>
</li>
<li><p class="first">The packet is pulled from the frame, and what is left of the frame is discarded. The packet is handed to the protocol listed in the Ether-Type field—it’s given to IP.</p>
</li>
<li><p class="first">IP receives the packet and checks the IP destination address. Since the packet’s destination address doesn’t match any of the addresses configured on the receiving router itself, the router will look up the destination IP network address in its routing table.</p>
</li>
<li><p class="first">The routing table must have an entry for the network 172.16.20.0 or the packet will be discarded immediately and an ICMP message will be sent back to the originating device with a destination network unreachable message.</p>
</li>
<li><p class="first">If the router does find an entry for the destination network in its table, the packet is switched to the exit interface—in this example, interface Ethernet 1. The following output displays the Lab_A router’s routing table. The C means “directly connected.” No routing protocols are needed in this network since all networks (all two of them) are directly connected</p>
<div class="code highlight-default"><div class="highlight"><pre><span></span><span class="n">Lab_A</span><span class="o">&gt;</span><span class="n">sh</span> <span class="n">ip</span> <span class="n">route</span>
    <span class="n">C</span>       <span class="mf">172.16</span><span class="o">.</span><span class="mf">10.0</span> <span class="ow">is</span> <span class="n">directly</span> <span class="n">connected</span><span class="p">,</span>    <span class="n">Ethernet0</span>
    <span class="n">L</span>       <span class="mf">172.16</span><span class="o">.</span><span class="mf">10.1</span><span class="o">/</span><span class="mi">32</span> <span class="ow">is</span> <span class="n">directly</span> <span class="n">connected</span><span class="p">,</span> <span class="n">Ethernet0</span>
    <span class="n">C</span>       <span class="mf">172.16</span><span class="o">.</span><span class="mf">20.0</span> <span class="ow">is</span> <span class="n">directly</span> <span class="n">connected</span><span class="p">,</span>    <span class="n">Ethernet1</span>
    <span class="n">L</span>       <span class="mf">172.16</span><span class="o">.</span><span class="mf">20.1</span><span class="o">/</span><span class="mi">32</span> <span class="ow">is</span> <span class="n">directly</span> <span class="n">connected</span><span class="p">,</span> <span class="n">Ethernet1</span>
</pre></div>
</div>
</li>
<li><p class="first">The router packet-switches the packet to the Ethernet 1 buffer.</p>
</li>
<li><p class="first">The Ethernet 1 buffer needs to know the hardware address of the destination host and first checks the ARP cache. If the hardware address of Host_B has already been resolved and is in the router’s ARP cache, then the packet and the hardware address will be handed down to the Data Link layer to be framed.let’s take a look at the ARP cache on the Lab_A router by using the show ip arp command</p>
<div class="code highlight-default"><div class="highlight"><pre><span></span><span class="n">Lab_A</span><span class="c1">#sh ip arp</span>
<span class="n">Protocol</span>  <span class="n">Address</span>     <span class="n">Age</span><span class="p">(</span><span class="nb">min</span><span class="p">)</span> <span class="n">Hardware</span> <span class="n">Addr</span>  <span class="n">Type</span>   <span class="n">Interface</span>
<span class="n">Internet</span>  <span class="mf">172.16</span><span class="o">.</span><span class="mf">20.1</span>   <span class="o">-</span>     <span class="mi">00</span><span class="n">d0</span><span class="o">.</span><span class="mi">58</span><span class="n">ad</span><span class="o">.</span><span class="mi">05</span><span class="n">f4</span>  <span class="n">ARPA</span>   <span class="n">Ethernet1</span>
<span class="n">Internet</span>  <span class="mf">172.16</span><span class="o">.</span><span class="mf">20.2</span>   <span class="mi">3</span>     <span class="mf">0030.9492</span><span class="o">.</span><span class="n">a5dd</span>  <span class="n">ARPA</span>   <span class="n">Ethernet1</span>
<span class="n">Internet</span>  <span class="mf">172.16</span><span class="o">.</span><span class="mf">10.1</span>   <span class="o">-</span>     <span class="mi">00</span><span class="n">d0</span><span class="o">.</span><span class="mi">58</span><span class="n">ad</span><span class="o">.</span><span class="mi">06</span><span class="n">aa</span>  <span class="n">ARPA</span>   <span class="n">Ethernet0</span>
<span class="n">Internet</span>  <span class="mf">172.16</span><span class="o">.</span><span class="mf">10.2</span>  <span class="mi">12</span>     <span class="mf">0030.9492</span><span class="o">.</span><span class="n">a4ac</span>  <span class="n">ARPA</span>   <span class="n">Ethernet0</span>
</pre></div>
</div>
<ul class="simple">
<li>Now if the hardware address hasn’t already been resolved, the router will send an ARP request out E1 looking for the 172.16.20.2 hardware address. Host_B responds with its hardware address, and the packet and destination hardware addresses are then both sent to the Data Link layer for framing.</li>
</ul>
</li>
<li><p class="first">The Data Link layer creates a frame with the destination and source hardware addresses, Ether-Type field, and FCS field at the end. The frame is then handed to the Physical layer to be sent out on the physical medium one bit at a time.</p>
</li>
<li><p class="first">Host_B receives the frame and immediately runs a CRC. If the result matches the information in the FCS field, the hardware destination address will then be checked next. If the host finds a match, the Ether-Type field is then checked to determine the protocol that the packet should be handed to at the Network layer—IP in this example.</p>
</li>
<li><p class="first">At the Network layer, IP receives the packet and runs a CRC on the IP header. If that passes, IP then checks the destination address. Since a match has finally been made, the Protocol field is checked to find out to whom the payload should be given.</p>
</li>
<li><p class="first">The payload is handed to ICMP, which understands that this is an echo request. ICMP responds to this by immediately discarding the packet and generating a new payload as an echo reply.</p>
</li>
<li><p class="first">A packet is then created including the source and destination addresses, Protocol field, and payload. The destination device is now Host_A.</p>
</li>
<li><p class="first">IP then checks to see whether the destination IP address is a device on the local LAN or on a remote network. Since the destination device is on a remote network, the packet needs to be sent to the default gateway.</p>
</li>
<li><p class="first">The default gateway IP address is found in the Registry of the Windows device, and the ARP cache is checked to see if the hardware address has already been resolved from an IP address.</p>
</li>
<li><p class="first">Once the hardware address of the default gateway is found, the packet and destination hardware addresses are handed down to the Data Link layer for framing.</p>
</li>
<li><p class="first">The Data Link layer frames the packet of information and includes the following in the header</p>
<blockquote>
<div><ul class="simple">
<li>The destination and source hardware addresses</li>
<li>The Ether-Type field with 0x0800 (IP) in it</li>
<li>The FCS field with the CRC result in tow</li>
</ul>
</div></blockquote>
</li>
<li><p class="first">The frame is now handed down to the Physical layer to be sent out over the network medium one bit at a time.</p>
</li>
<li><p class="first">The router’s Ethernet 1 interface receives the bits and builds a frame. The CRC is run, and the FCS field is checked to make sure the answers match.</p>
</li>
<li><p class="first">Once the CRC is found to be okay, the hardware destination address is checked. Since the router’s interface is a match, the packet is pulled from the frame and the Ether-Type field is checked to determine which protocol the packet should be delivered to at the Network layer.</p>
</li>
<li><p class="first">The protocol is determined to be IP, so it gets the packet. IP runs a CRC check on the IP header first and then checks the destination IP address</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">IP does not run a complete CRC as the Data Link layer does—it only checks the header for errors.</p>
</div>
</li>
<li><p class="first">Since the IP destination address doesn’t match any of the router’s interfaces, the routing table is checked to see whether it has a route to 172.16.10.0. If it doesn’t have a route over to the destination network, the packet will be discarded immediately. I want to take a minute to point out that this is exactly where the source of confusion begins for a lot of administrators because when a ping fails, most people think the packet never reached the destination host. But as we see here, that’s not always the case. All it takes for this to happen is for even just one of the remote routers to lack a route back to the originating host’s network and— poof!—the packet is dropped on the return trip, not on its way to the host!</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Just a quick note to mention that when (and if) the packet is lost on the way back to the originating host, you will typically see a request timed-out message because it is an unknown error. If the error occurs because of a known issue, such as if a route is not in the routing table on the way to the destination device, you will see a destination unreachable message. This should help you determine if the problem occurred on the way to the destination or on the way back.</p>
</div>
</li>
<li><p class="first">In this case, the router happens to know how to get to network 172.16.10.0—the exit interface is Ethernet 0—so the packet is switched to interface Ethernet 0.</p>
</li>
<li><p class="first">The router then checks the ARP cache to determine whether the hardware address for 172.16.10.2 has already been resolved.</p>
</li>
<li><p class="first">Since the hardware address to 172.16.10.2 is already cached from the originating trip to Host_B, the hardware address and packet are then handed to the Data Link layer.</p>
</li>
<li><p class="first">The Data Link layer builds a frame with the destination hardware address and source hardware address and then puts IP in the Ether-Type field. A CRC is run on the frame and the result is placed in the FCS field.</p>
</li>
<li><p class="first">The frame is then handed to the Physical layer to be sent out onto the local network one bit at a time.</p>
</li>
<li><p class="first">The destination host receives the frame, runs a CRC, checks the destination hardware address, then looks into the Ether-Type field to find out to whom to hand the packet.</p>
</li>
<li><p class="first">IP is the designated receiver, and after the packet is handed to IP at the Network layer, it checks the Protocol field for further direction. IP finds instructions to give the payload to ICMP, and ICMP determines the packet to be an ICMP echo reply.</p>
</li>
<li><p class="first">ICMP acknowledges that it has received the reply by sending an exclamation point (!) to the user interface. ICMP then attempts to send four more echo requests to the destination host.</p>
</li>
</ol>
<p>The key point here is that if you had a much larger network, the process would be the same. It’s just that the larger the internetwork, the more hops the packet goes through before it finds the destination host.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">It’s super-important to remember that when Host_A sends a packet to Host_B, the destination hardware address used is the default gateway’s Ethernet interface. Why? Because frames can’t be placed on remote networks—only local networks. So packets destined for remote networks must go through the default gateway.</p>
</div>
<p>To see which packet switching method your router interface is using, use the command show ip interface.</p>
</div>
</div>
<div class="section" id="chapter-2-static-routes">
<h3>Chapter 2 Static Routes<a class="headerlink" href="#chapter-2-static-routes" title="Permalink to this headline">¶</a></h3>
<div class="section" id="ipv4-syntax">
<h4>ipv4 syntax<a class="headerlink" href="#ipv4-syntax" title="Permalink to this headline">¶</a></h4>
<div class="code highlight-default"><div class="highlight"><pre><span></span><span class="n">Router</span><span class="p">(</span><span class="n">config</span><span class="p">)</span><span class="c1"># ip route network mask { next-hop-ip | exit-intf }</span>
</pre></div>
</div>
<p>A static route is identified in the routing table with the code ‘S’.</p>
<p>To configure an IPv4 default static route, use the following command:</p>
<div class="code highlight-default"><div class="highlight"><pre><span></span><span class="n">Router</span><span class="p">(</span><span class="n">config</span><span class="p">)</span><span class="c1"># ip route 0.0.0.0 0.0.0.0 { exit-intf | next-hop-ip }</span>
</pre></div>
</div>
</div>
<div class="section" id="combination-of-exit-interface-and-next-hop">
<h4>combination of exit interface and next hop<a class="headerlink" href="#combination-of-exit-interface-and-next-hop" title="Permalink to this headline">¶</a></h4>
<div class="code highlight-default"><div class="highlight"><pre><span></span><span class="n">R2</span><span class="p">(</span><span class="n">config</span><span class="p">)</span><span class="c1"># ip route 192.168.2.0 255.255.255.0 s0/0/1 192.168.1.1</span>
</pre></div>
</div>
</div>
<div class="section" id="when-to-use-static-routes">
<h4>When to Use Static Routes<a class="headerlink" href="#when-to-use-static-routes" title="Permalink to this headline">¶</a></h4>
<p>Static routing has three primary uses:</p>
<blockquote>
<div><p># Providing ease of routing table maintenance in smaller networks that are not expected to grow significantly.
# Routing to and from stub networks. A STUB NETWORK is a network accessed by a single route, and the router has ONLY ONE NEIGHBOR.
# Using a single default route to represent a path to any network that does not have a more specific match with another route in the routing table.</p>
<p>benefits:</p>
<ul class="simple">
<li>Are not advertised over the network, resulting in better security</li>
<li>Use less bandwidth than dynamic routing protocols</li>
<li>Use known paths to send data</li>
</ul>
</div></blockquote>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Default routes are used to send traffic to any destination beyond the next upstream router.</p>
</div>
<dl class="docutils">
<dt>Use static routes to…</dt>
<dd><ul class="first last simple">
<li>Connect to a specific network</li>
<li>Connect a stub router</li>
<li>Summarize routing table entries</li>
<li>Create a backup route</li>
</ul>
</dd>
</dl>
</div>
<div class="section" id="default-static-route">
<h4>Default static route<a class="headerlink" href="#default-static-route" title="Permalink to this headline">¶</a></h4>
<div class="code highlight-default"><div class="highlight"><pre><span></span><span class="n">ip</span> <span class="n">route</span> <span class="mf">0.0</span><span class="o">.</span><span class="mf">0.0</span> <span class="mf">0.0</span><span class="o">.</span><span class="mf">0.0</span> <span class="n">nexthopip</span> <span class="o">|</span> <span class="n">exitif</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Default static routes are used when no other routes in the routing table match the packet destination IP address. In other words, when a more specific match does not exist. A common use is when connecting a company’s edge router to the ISP network. When a router has only one other router to which it is connected. In this situation, the router is known as a stub router.</p>
</div>
</div>
<div class="section" id="summary-static-route">
<h4>Summary static route<a class="headerlink" href="#summary-static-route" title="Permalink to this headline">¶</a></h4>
<p>Representing multiple networks</p>
<p>172.20.0.0/16
172.21.0.0/16
172.22.0.0/16
172.23.0.0/16
as 172.20.0.0/14</p>
<div class="code highlight-default"><div class="highlight"><pre><span></span><span class="n">ip</span> <span class="n">route</span> <span class="mf">172.20</span><span class="o">.</span><span class="mf">0.0</span> <span class="mf">255.252</span><span class="o">.</span><span class="mf">0.0</span> <span class="n">nexthopip</span> <span class="o">|</span> <span class="n">exitif</span>
</pre></div>
</div>
</div>
<div class="section" id="floating-static-route">
<h4>Floating static route<a class="headerlink" href="#floating-static-route" title="Permalink to this headline">¶</a></h4>
<p>Another type of static route is a floating static route.
Floating static routes are static routes that are <strong>used to provide a backup path to a primary static or dynamic route, in the event of a link failure.</strong></p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The floating static route is only used when the primary route is not available.</p>
</div>
<p>To accomplish this, the floating static route is configured with a <strong>higher administrative distance than the primary route</strong>.
The administrative distance represents the trustworthiness of a route.
If multiple paths to the destination exist, the router will choose the path with the lowest administrative distance.</p>
<p>The next hop can be identified by an IP address, exit interface, or both. How the destination is specified creates one of the three following route types:</p>
<blockquote>
<div><dl class="docutils">
<dt>Next-hop route</dt>
<dd>Only the next-hop IP address is specified</dd>
<dt>Directly connected static route</dt>
<dd>Only the router exit interface is specified</dd>
<dt>Fully specified static route</dt>
<dd>The next-hop IP address and exit interface are specified</dd>
</dl>
</div></blockquote>
<div class="code highlight-default"><div class="highlight"><pre><span></span><span class="n">ip</span> <span class="n">route</span> <span class="mf">172.16</span><span class="o">.</span><span class="mf">1.0</span> <span class="mf">255.255</span><span class="o">.</span><span class="mf">255.0</span> <span class="n">G0</span><span class="o">/</span><span class="mi">1</span> <span class="mf">172.16</span><span class="o">.</span><span class="mf">2.2</span>
</pre></div>
</div>
</div>
<div class="section" id="fully-specified-static-route">
<h4>Fully Specified Static Route<a class="headerlink" href="#fully-specified-static-route" title="Permalink to this headline">¶</a></h4>
<p>In a fully specified static route, <strong>both the exit interface and the next-hop IP</strong> address are specified.
This is another type of static route that is <em>used in older IOSs, prior to CEF.</em></p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">This form of static route is used when the exit interface is a multi-access interface and it is necessary to explicitly identify the next hop.</p>
</div>
<p>The next hop must be directly connected to the specified exit interface.</p>
<div class="section" id="example">
<h5>example<a class="headerlink" href="#example" title="Permalink to this headline">¶</a></h5>
<div class="highlight-html"><div class="highlight"><pre><span></span>                             PC2
                              |
                              |_
             172.16.1.0/24   |__|
                               |
                               |
                           G0/0|.1
                              _|__
                             (_R2_)
                     S0/0/0 /.2 .2\ S0/0/1
                           /       \ DCE
             172.16.2.0/24/         \/\
                         /             \  192.168.1.0/24
                      .1/               \.1
          __           /__S0/0/0  S0/0/1_\        __
PC1------|__|---------(_R1_) DCE      (_R3_)-----|__|----PC3
                 G0/0  .1           .1 G0/0

       172.16.3.0/24                  192.168.2.0/24
</pre></div>
</div>
<p>Suppose that the network link between R1 and R2 is an Ethernet link and that the GigabitEthernet 0/1 interface of R1 is connected to that network,
as shown in Figure 1. CEF is not enabled.
To eliminate the recursive lookup,(map a next hop ip to what interface that is = if CEF not enabled)
a directly connected static route can be implemented using the following command:</p>
<div class="code highlight-default"><div class="highlight"><pre><span></span><span class="n">R1</span><span class="p">(</span><span class="n">config</span><span class="p">)</span><span class="c1"># ip route 192.168.2.0 255.255.255.0 GigabitEthernet 0/1</span>
</pre></div>
</div>
<p>However, this may cause unexpected or inconsistent results. The difference between an Ethernet multi-access network and a point-to-point serial network is that a point-to-point serial network has only one other device on that network, the router at the other end of the link. With Ethernet networks, there may be many different devices sharing the same multi-access network, including hosts and even multiple routers. By only designating the Ethernet exit interface in the static route, the router will not have sufficient information to determine which device is the next-hop device.</p>
<p>R1 knows that the packet needs to be encapsulated in an Ethernet frame and sent out the GigabitEthernet 0/1 interface. However, R1 does not know the next-hop IPv4 address; therefore, it cannot determine the destination MAC address for the Ethernet frame.</p>
<p>Depending upon the topology and the configurations on other routers, this static route may or may not work. It is recommended that when the exit interface is an Ethernet network, that a fully specified static route is used, including both the exit interface and the next-hop address.</p>
<div class="code highlight-default"><div class="highlight"><pre><span></span><span class="n">R3</span><span class="p">(</span><span class="n">config</span><span class="p">)</span><span class="c1"># ip route 172.16.1.0 255.255.255.0 s0/0/1 192.168.1.2</span>
</pre></div>
</div>
<p>As shown in Figure 2, when forwarding packets to R2, the exit interface is GigabitEthernet 0/1 and the next-hop IPv4 address is 172.16.2.2.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">With the use of CEF, a fully specified static route is no longer necessary. A static route using a next-hop address should be used.</p>
</div>
<div class="code highlight-default"><div class="highlight"><pre><span></span><span class="n">R1</span><span class="p">(</span><span class="n">config</span><span class="p">)</span><span class="c1"># ip route 0.0.0.0 0.0.0.0 172.16.2.2</span>

<span class="n">R1</span><span class="c1">#show ip route static</span>


<span class="n">R1</span><span class="p">(</span><span class="n">config</span><span class="p">)</span><span class="c1">#do show ip route static</span>
     <span class="mf">172.31</span><span class="o">.</span><span class="mf">0.0</span><span class="o">/</span><span class="mi">16</span> <span class="ow">is</span> <span class="n">variably</span> <span class="n">subnetted</span><span class="p">,</span> <span class="mi">7</span> <span class="n">subnets</span><span class="p">,</span> <span class="mi">5</span> <span class="n">masks</span>
<span class="n">S</span>       <span class="mf">172.31</span><span class="o">.</span><span class="mf">0.0</span><span class="o">/</span><span class="mi">24</span> <span class="p">[</span><span class="mi">1</span><span class="o">/</span><span class="mi">0</span><span class="p">]</span> <span class="n">via</span> <span class="mf">172.31</span><span class="o">.</span><span class="mf">1.193</span>
<span class="n">S</span>       <span class="mf">172.31</span><span class="o">.</span><span class="mf">1.128</span><span class="o">/</span><span class="mi">26</span> <span class="p">[</span><span class="mi">1</span><span class="o">/</span><span class="mi">0</span><span class="p">]</span> <span class="n">via</span> <span class="mf">172.31</span><span class="o">.</span><span class="mf">1.193</span>
<span class="n">S</span>       <span class="mf">172.31</span><span class="o">.</span><span class="mf">1.196</span><span class="o">/</span><span class="mi">30</span> <span class="p">[</span><span class="mi">1</span><span class="o">/</span><span class="mi">0</span><span class="p">]</span> <span class="n">via</span> <span class="mf">172.31</span><span class="o">.</span><span class="mf">1.193</span>

<span class="n">R2</span><span class="p">(</span><span class="n">config</span><span class="p">)</span><span class="c1">#ip route 172.31.1.0 255.255.255.128 S0/0/0</span>
<span class="o">%</span><span class="n">Default</span> <span class="n">route</span> <span class="n">without</span> <span class="n">gateway</span><span class="p">,</span> <span class="k">if</span> <span class="ow">not</span> <span class="n">a</span> <span class="n">point</span><span class="o">-</span><span class="n">to</span><span class="o">-</span><span class="n">point</span> <span class="n">interface</span><span class="p">,</span> <span class="n">may</span> <span class="n">impact</span> <span class="n">performance</span>

<span class="n">R2</span><span class="c1">#show ip route ?</span>
  <span class="n">WORD</span>       <span class="n">Network</span> <span class="n">to</span> <span class="n">display</span> <span class="n">information</span> <span class="n">about</span> <span class="ow">or</span> <span class="n">hostname</span>
  <span class="n">bgp</span>        <span class="n">Border</span> <span class="n">Gateway</span> <span class="n">Protocol</span> <span class="p">(</span><span class="n">BGP</span><span class="p">)</span>
  <span class="n">connected</span>  <span class="n">Connected</span>
  <span class="n">eigrp</span>      <span class="n">Enhanced</span> <span class="n">Interior</span> <span class="n">Routing</span> <span class="n">Protocol</span> <span class="p">(</span><span class="n">EIGRP</span><span class="p">)</span>
  <span class="n">ospf</span>       <span class="n">Open</span> <span class="n">Shortest</span> <span class="n">Path</span> <span class="n">First</span> <span class="p">(</span><span class="n">OSPF</span><span class="p">)</span>
  <span class="n">rip</span>        <span class="n">Routing</span> <span class="n">Information</span> <span class="n">Protocol</span> <span class="p">(</span><span class="n">RIP</span><span class="p">)</span>
  <span class="n">static</span>     <span class="n">Static</span> <span class="n">routes</span>
  <span class="n">summary</span>    <span class="n">Summary</span> <span class="n">of</span> <span class="nb">all</span> <span class="n">routes</span>
  <span class="o">|</span>          <span class="n">Output</span> <span class="n">Modifiers</span>
  <span class="o">&lt;</span><span class="n">cr</span><span class="o">&gt;</span>

<span class="n">R2</span><span class="c1">#show ip route connected</span>
 <span class="n">C</span>   <span class="mf">172.31</span><span class="o">.</span><span class="mf">0.0</span><span class="o">/</span><span class="mi">24</span>  <span class="ow">is</span> <span class="n">directly</span> <span class="n">connected</span><span class="p">,</span> <span class="n">GigabitEthernet0</span><span class="o">/</span><span class="mi">0</span>
 <span class="n">C</span>   <span class="mf">172.31</span><span class="o">.</span><span class="mf">1.192</span><span class="o">/</span><span class="mi">30</span>  <span class="ow">is</span> <span class="n">directly</span> <span class="n">connected</span><span class="p">,</span> <span class="n">Serial0</span><span class="o">/</span><span class="mi">0</span><span class="o">/</span><span class="mi">0</span>
 <span class="n">C</span>   <span class="mf">172.31</span><span class="o">.</span><span class="mf">1.196</span><span class="o">/</span><span class="mi">30</span>  <span class="ow">is</span> <span class="n">directly</span> <span class="n">connected</span><span class="p">,</span> <span class="n">Serial0</span><span class="o">/</span><span class="mi">0</span><span class="o">/</span><span class="mi">1</span>


<span class="n">R3</span><span class="p">(</span><span class="n">config</span><span class="p">)</span><span class="c1">#ip route 0.0.0.0 0.0.0.0 Serial 0/0/1</span>
<span class="o">%</span><span class="n">Default</span> <span class="n">route</span> <span class="n">without</span> <span class="n">gateway</span><span class="p">,</span> <span class="k">if</span> <span class="ow">not</span> <span class="n">a</span> <span class="n">point</span><span class="o">-</span><span class="n">to</span><span class="o">-</span><span class="n">point</span> <span class="n">interface</span><span class="p">,</span> <span class="n">may</span> <span class="n">impact</span> <span class="n">performance</span>
<span class="n">R3</span><span class="p">(</span><span class="n">config</span><span class="p">)</span><span class="c1">#</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="ipv6-static-routing">
<h4>ipv6 static routing<a class="headerlink" href="#ipv6-static-routing" title="Permalink to this headline">¶</a></h4>
<div class="code highlight-default"><div class="highlight"><pre><span></span><span class="n">R1</span><span class="p">(</span><span class="n">config</span><span class="p">)</span><span class="c1"># ipv6 unicast-routing</span>
<span class="n">R1</span><span class="p">(</span><span class="n">config</span><span class="p">)</span><span class="c1"># show ipv6 route</span>

<span class="n">R1</span><span class="c1">#ping ipv6 2001.DB8:ACAD:4::2</span>
<span class="n">R1</span><span class="p">(</span><span class="n">config</span><span class="p">)</span><span class="c1"># ipv6 route 2001.DB8:ACAD:2::/64 2001.DB8:ACAD:4::2</span>

<span class="n">R1</span><span class="p">(</span><span class="n">config</span><span class="p">)</span><span class="c1"># show ipv6 route</span>
</pre></div>
</div>
<p>As with IPv4, before any packet is forwarded by the router, the routing table process must resolve the route to determine the exit interface to use to forward the packet. The route resolvability process will vary depending upon the type of forwarding mechanism being used by the router. CEF (Cisco Express Forwarding) is the default behavior on most platforms running IOS 12.0 or later.</p>
<p>When a packet is destined for the 2001:DB8:ACAD:3::/64 network, R1:</p>
<blockquote>
<div><ol class="arabic simple">
<li>Looks for a match in the routing table and finds that it has to forward the packets to the next-hop IPv6 address 2001:DB8:ACAD:4::2. Every route that references only a next-hop IPv6 address and does not reference an exit interface must have the next-hop IPv6 address resolved using another route in the routing table with an exit interface.</li>
<li>R1 must now determine how to reach 2001:DB8:ACAD:4::2; therefore, it searches a second time looking for a match. In this case, the IPv6 address matches the route for the directly connected network 2001:DB8:ACAD:4::/64 with the exit interface Serial 0/0/0. This lookup tells the routing table process that this packet is forwarded out of that interface.</li>
</ol>
</div></blockquote>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">Therefore, it actually takes two routing table lookup processes to forward any packet to the 2001:DB8:ACAD:3::/64 network. When the router has to perform multiple lookups in the routing table before forwarding a packet, it is performing a process known as a recursive lookup.</p>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">A recursive static IPv6 route is valid (that is, it is a candidate for insertion in the routing table) only when the specified next hop resolves, either directly or indirectly, to a valid exit interface.</p>
</div>
</div>
<div class="section" id="ipv6-default-static-route">
<h4>ipv6 default static route<a class="headerlink" href="#ipv6-default-static-route" title="Permalink to this headline">¶</a></h4>
<div class="highlight-html"><div class="highlight"><pre><span></span>                            PC2
                             |
                             |_
     2001:db8:acad:2::/64   |__|
                              |
                              |
                          G0/0|:1
                             _|__
                            (_R2_)
                    S0/0/0 /2 :2\ S0/0/1
                          /       \ DCE
                         /         \/\
   2001:db8:acad:4::/64 /             \  2001:db8:acad:5::/64
                     :1/               \:1
         __           /__S0/0/0  S0/0/1_\        __
PC1-----|__|---------(_R1_) DCE      (_R3_)-----|__|----PC3
                G0/0  :1           :1 G0/0

   2001:db8:acad:1::/64             2001:db8:acad:3::/64
</pre></div>
</div>
<div class="code highlight-default"><div class="highlight"><pre><span></span><span class="n">R1</span><span class="p">(</span><span class="n">config</span><span class="p">)</span><span class="c1"># ipv6 route ::/0 s0/0/0</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The ‘S’ signifies that the route source is a static route. Unlike the IPv4 static route, there is no asterisk (*) or Gateway of Last Resort explicitly identified.</p>
</div>
<div class="code highlight-default"><div class="highlight"><pre><span></span><span class="n">ipv6</span> <span class="n">route</span> <span class="n">ipv6</span><span class="o">-</span><span class="n">prefix</span><span class="o">/</span><span class="n">prefix</span><span class="o">-</span><span class="n">length</span> <span class="p">{</span><span class="n">ipv6</span><span class="o">-</span><span class="n">address</span><span class="o">|</span><span class="n">interface</span><span class="o">-</span><span class="nb">type</span> <span class="n">interface</span><span class="o">-</span><span class="n">number</span><span class="p">}</span>
<span class="o">-</span>
<span class="n">R2</span><span class="p">(</span><span class="n">config</span><span class="p">)</span><span class="c1"># ipv6 route 2001:0DB8:ACAD:1::/64 2001:0DB8:ACAD:3::1</span>
<span class="n">R2</span><span class="p">(</span><span class="n">config</span><span class="p">)</span><span class="c1"># ipv6 route 2001:0DB8:ACAD:2::/64 s0/0/0</span>
</pre></div>
</div>
<p>Router is only connected to R2 = stub router = default static route</p>
<div class="code highlight-default"><div class="highlight"><pre><span></span><span class="n">R1</span><span class="p">(</span><span class="n">config</span><span class="p">)</span><span class="c1">#ipv6 route ::/0 2001:DB8:ACAD:4::2</span>
</pre></div>
</div>
</div>
<div class="section" id="verify-a-default-static-route">
<h4>verify a default static route<a class="headerlink" href="#verify-a-default-static-route" title="Permalink to this headline">¶</a></h4>
<div class="code highlight-default"><div class="highlight"><pre><span></span><span class="n">R1</span><span class="c1"># show ipv6 route static</span>

<span class="n">R1</span><span class="c1"># ping 2001:DB8:ACAD:4::2 source 2001:DB8:ACAD:1::2</span>
</pre></div>
</div>
</div>
<div class="section" id="troubleshooting-a-missing-route">
<h4>Troubleshooting a missing route<a class="headerlink" href="#troubleshooting-a-missing-route" title="Permalink to this headline">¶</a></h4>
<blockquote>
<div><ol class="arabic simple">
<li>ping</li>
<li>traceroute</li>
<li>show ip route</li>
<li>show ip interface brief</li>
<li>show cdp neighbors detail</li>
</ol>
</div></blockquote>
</div>
<div class="section" id="solve-a-connectivity-problem">
<h4>Solve a connectivity problem<a class="headerlink" href="#solve-a-connectivity-problem" title="Permalink to this headline">¶</a></h4>
<blockquote>
<div><ol class="arabic simple">
<li>ping 192.168.2.1 source g0/0</li>
<li>traceroute 192.168.2.1</li>
<li>show ip route | begin Gateway</li>
<li>show running-config | section ip route</li>
</ol>
</div></blockquote>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">In a recursive static route, only the next-hop IPv6 address is specified. As a consequence, the router must perform a recursive route table lookup to find an exit interface associated with the network of the IPv6 address.</p>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">To test a floating static route, take down the main route/link in order to see whether the backup link appears in the routing table.</p>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">When a static route is to be configured via the next-hop IP address, the IP address of the interface of the next router in the path to the destination is used.</p>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>An example of a floating static route used in conjunction with the EIGRP routing protocol would be as follows.</p>
<div class="code highlight-default"><div class="highlight"><pre><span></span><span class="n">R1</span><span class="p">(</span><span class="n">config</span><span class="p">)</span><span class="c1"># ip route 192.168.10.0 255.255.255.0 95</span>
</pre></div>
</div>
<p class="last">Notice the extra number at the end of the static route. This route only appears in the routing table if the EIGRP-learned route with an administrative distance of 90 went down. That floating static route cannot appear in the routing table when a route with a better administrative distance exists.</p>
</div>
</div>
</div>
<div class="section" id="chapter-3-dynamic-routing">
<h3>Chapter 3 Dynamic Routing<a class="headerlink" href="#chapter-3-dynamic-routing" title="Permalink to this headline">¶</a></h3>
<p>Router metrics are metrics used by a router to make routing decisions. A metric is typically one of many fields in a routing table.</p>
<p>Metrics are used to determine whether one route should be chosen over another. The routing table stores possible routes, while link-state or topological databases may store all other information as well. For example, Routing Information Protocol uses hopcount (number of hops) to determine the best possible route. The route will go in the direction of the gateway with the lowest metric. The direction with the lowest metric can be a default gateway.</p>
<p>Router metrics can contain any number of values that help the router determine the best route among multiple routes to a destination. A router metric typically based on information like <strong>path length, bandwidth, load, hop count, path cost, delay, maximum transmission unit (MTU), reliability and communications cost</strong>.</p>
<div class="section" id="dynamic-routing-protocols-components">
<h4>Dynamic Routing Protocols Components<a class="headerlink" href="#dynamic-routing-protocols-components" title="Permalink to this headline">¶</a></h4>
<p>Routing protocols are used to facilitate the exchange of routing information between routers. A routing protocol is a set of processes, algorithms, and messages that are used to exchange routing information and populate the routing table with the routing protocol’s choice of best paths. The purpose of dynamic routing protocols includes:</p>
<blockquote>
<div><ul class="simple">
<li>Discovery of remote networks</li>
<li>Maintaining up-to-date routing information</li>
<li>Choosing the best path to destination networks</li>
<li>Ability to find a new best path if the current path is no longer available</li>
</ul>
</div></blockquote>
<p>The main components of dynamic routing protocols include:</p>
<blockquote>
<div><ul class="simple">
<li>Data structures - Routing protocols typically use tables or databases for its operations. This information is kept in RAM.</li>
<li>Routing protocol messages - Routing protocols use various types of messages to discover neighboring routers, exchange routing information, and other tasks to learn and maintain accurate information about the network.</li>
<li>Algorithm - An algorithm is a finite list of steps used to accomplish a task. Routing protocols use algorithms for facilitating routing information and for best path determination.</li>
</ul>
</div></blockquote>
<p>Routing protocols allow routers to dynamically share information about remote networks and automatically offer this information to their own routing tables.</p>
<p>Routing protocols determine the best path, or route, to each network. That route is then offered to the routing table. The route will be installed in the routing table is there is not another routing source with a lower administrative distance. For example, a static route with an administrative distance of 1 will have precedence over the same network learned by a dynamic routing protocol. A primary benefit of dynamic routing protocols is that routers exchange routing information when there is a topology change. This exchange allows routers to automatically learn about new networks and also to find alternate paths when there is a link failure to a current network.</p>
</div>
<div class="section" id="static-routing-uses">
<h4>Static Routing Uses<a class="headerlink" href="#static-routing-uses" title="Permalink to this headline">¶</a></h4>
<p>Static routing has several primary uses, including:</p>
<blockquote>
<div><ul class="simple">
<li>Providing ease of routing table maintenance in smaller networks that are not expected to grow significantly.</li>
<li>Routing to and from a stub network, which is a network with only one default route out and no knowledge of any remote networks.</li>
<li>Accessing a single default route (which is used to represent a path to any network that does not have a more specific match with another route in the routing table).</li>
</ul>
</div></blockquote>
<div class="section" id="pros-static">
<h5>Pros static<a class="headerlink" href="#pros-static" title="Permalink to this headline">¶</a></h5>
<blockquote>
<div><ul class="simple">
<li>Predictability: route to destination is always the same.</li>
<li>Network bandwidth overhead / no extra cpu,ram resources needed: Static routing has zero overhead, whereas all dynamic routing protocols have some degree of overhead. For example, on a network with 200 segments, the router will send updates from each interface every 30 seconds, and those updates are about 3KB of data. Over the course of a day, this traffic adds up.</li>
<li>Easy to configure: This issue is relative, depending on the size of your network. Although small networks are easy to configure, as a network grows, applying changes to all the routers can become a big task.</li>
<li>Very secure, No advertisements are sent.</li>
</ul>
</div></blockquote>
</div>
<div class="section" id="cons-static">
<h5>Cons static<a class="headerlink" href="#cons-static" title="Permalink to this headline">¶</a></h5>
<blockquote>
<div><ul class="simple">
<li>Lack of scalability: For the 200 segment network mentioned previously, which possibly contains 200 routers, you could be dealing with thousands of routing table entries. Manually calculating all those routes and keeping them up-to-date would be a Herculean task and very prone to error. Even if you implement a good network-addressing design that allows for route summarization, you are still left with an overwhelming number of routes to manage.</li>
<li>Large network implementation: When working with a network of 200 routers, the task of updating one route can become a complex task, especially if you update the routes in the wrong order. In that case, you could lose access to a large section of the network until someone visits that router with a rollover cable or connects from another area of the network.</li>
<li>No redundancy: Dynamic routing protocols can update routing tables in the event of device or interface failure, so if there are multiple possible paths, these protocols will continue to allow data flow. Static routes do not allow for this automatic failover or redundant paths, so if you have a failure, you must manually adjust routes to move data through an alternative path.</li>
</ul>
</div></blockquote>
<p>Dynamic routing is the best choice for large networks like the one shown.</p>
</div>
</div>
<div class="section" id="dynamic-routing-uses">
<h4>Dynamic Routing Uses<a class="headerlink" href="#dynamic-routing-uses" title="Permalink to this headline">¶</a></h4>
<div class="section" id="pros-dynamic">
<h5>Pros Dynamic<a class="headerlink" href="#pros-dynamic" title="Permalink to this headline">¶</a></h5>
<blockquote>
<div><ul class="simple">
<li>Suitable in all topologies where multiple routers are required</li>
<li>Generally independent of the network size</li>
<li>Automatically addapts topology to reroute traffic if possible</li>
</ul>
</div></blockquote>
</div>
<div class="section" id="cons-dynamic">
<h5>Cons Dynamic<a class="headerlink" href="#cons-dynamic" title="Permalink to this headline">¶</a></h5>
<blockquote>
<div><ul class="simple">
<li>Can be more complex to implement</li>
<li>Less secure. Additional config settings are required to secure.</li>
<li>Route depends on the current topology.</li>
<li>Requires additional CPU, RAM, and link bandwidth.</li>
</ul>
</div></blockquote>
</div>
</div>
<div class="section" id="ripv2">
<h4>RIPv2<a class="headerlink" href="#ripv2" title="Permalink to this headline">¶</a></h4>
</div>
<div class="section" id="enable-disable">
<h4>enable/disable<a class="headerlink" href="#enable-disable" title="Permalink to this headline">¶</a></h4>
<div class="code highlight-default"><div class="highlight"><pre><span></span>    <span class="n">R1</span><span class="c1"># conf t</span>
    <span class="n">R1</span><span class="p">(</span><span class="n">config</span><span class="p">)</span><span class="c1"># router rip</span>
<span class="n">R1</span><span class="p">(</span><span class="n">config</span><span class="o">-</span><span class="n">router</span><span class="p">)</span><span class="c1"># version 2</span>
</pre></div>
</div>
<div class="section" id="verify-rip-routing">
<h5>verify rip routing<a class="headerlink" href="#verify-rip-routing" title="Permalink to this headline">¶</a></h5>
<div class="code highlight-default"><div class="highlight"><pre><span></span><span class="n">R1</span><span class="c1"># show ip protocols</span>
<span class="n">R1</span><span class="c1"># show ip protocols | section Default</span>
<span class="n">R1</span><span class="c1"># show ip route | begin Gateway</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="disable-auto-summarization">
<h4>disable auto summarization<a class="headerlink" href="#disable-auto-summarization" title="Permalink to this headline">¶</a></h4>
<div class="code highlight-default"><div class="highlight"><pre><span></span>    <span class="n">R1</span><span class="p">(</span><span class="n">config</span><span class="p">)</span><span class="c1"># router rip</span>
    <span class="n">R1</span><span class="p">(</span><span class="n">config</span><span class="o">-</span><span class="n">router</span><span class="p">)</span><span class="c1"># no auto-summary</span>
    <span class="n">R1</span><span class="p">(</span><span class="n">config</span><span class="o">-</span><span class="n">router</span><span class="p">)</span><span class="c1"># end</span>
<span class="n">R1</span><span class="c1"># show ip protocols | section Automatic</span>
</pre></div>
</div>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p>auto-summary = classful, no auto-summary = you can see /25 routes = classless, don’t confuse with summarization. If you want a summary address you can apply the following on the <strong>outgoing interface you want de summary address advertised</strong></p>
<div class="code last highlight-default"><div class="highlight"><pre><span></span><span class="n">ip</span> <span class="n">summary</span><span class="o">-</span><span class="n">address</span> <span class="n">rip</span> <span class="mf">192.168</span><span class="o">.</span><span class="mf">0.0</span> <span class="mf">255.255</span><span class="o">.</span><span class="mf">252.0</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="configure-passive-interfaces">
<h4>configure passive interfaces<a class="headerlink" href="#configure-passive-interfaces" title="Permalink to this headline">¶</a></h4>
<p>By default, RIP updates are forwarded out all RIP-enabled interfaces. However, RIP updates really only need to be sent out interfaces that are connected to other RIPenabled routers.</p>
<img alt="_images/configure_passive_ifs_on_R1.png" src="_images/configure_passive_ifs_on_R1.png" />
<p>For instance, refer to the topology above. RIP sends updates out of its G0/0 interface even though no RIP device exists on that LAN. R1 has no way of knowing this and, as a result, sends an update every 30 seconds. Sending out unneeded updates on a LAN impacts the network in three ways:</p>
<blockquote>
<div><ul class="simple">
<li>Wasted Bandwidth - Bandwidth is used to transport unnecessary updates. Because RIP updates are either broadcasted or multicasted, switches also forward the updates out all ports.</li>
<li>Wasted Resources - All devices on the LAN must process the update up to the transport layers, at which point the devices will discard the update.</li>
<li>Security Risk - Advertising updates on a broadcast network is a security risk. RIP updates can be intercepted with packet sniffing software. Routing updates can be modified and sent back to the router, corrupting the routing table with false metrics that misdirect traffic.</li>
</ul>
</div></blockquote>
<p>Use the <strong>passive-interface</strong> router configuration command to prevent the transmission of routing updates through a router interface, <em>but still allow that network to be advertised to other routers</em>. The command stops routing updates out the specified interface. However, the network that the specified interface belongs to is still advertised in routing updates that are sent out other interfaces.</p>
<div class="code highlight-default"><div class="highlight"><pre><span></span><span class="n">Configure</span> <span class="n">passive</span> <span class="n">interface</span> <span class="n">on</span> <span class="n">G0</span><span class="o">/</span><span class="mi">0</span> <span class="ow">and</span> <span class="k">return</span> <span class="n">to</span> <span class="n">privileged</span> <span class="n">EXEC</span> <span class="n">mode</span><span class="o">.</span>
<span class="n">R2</span><span class="p">(</span><span class="n">config</span><span class="p">)</span><span class="c1"># router rip</span>
<span class="n">R2</span><span class="p">(</span><span class="n">config</span><span class="o">-</span><span class="n">router</span><span class="p">)</span><span class="c1"># passive-interface g0/0</span>
<span class="n">R2</span><span class="p">(</span><span class="n">config</span><span class="o">-</span><span class="n">router</span><span class="p">)</span><span class="c1"># end</span>
<span class="n">R2</span><span class="c1">#</span>
<span class="o">*</span><span class="n">Mar</span> <span class="mi">10</span> <span class="mi">16</span><span class="p">:</span><span class="mi">33</span><span class="p">:</span><span class="mf">32.391</span><span class="p">:</span> <span class="o">%</span><span class="n">SYS</span><span class="o">-</span><span class="mi">5</span><span class="o">-</span><span class="n">CONFIG_I</span><span class="p">:</span> <span class="n">Configured</span> <span class="kn">from</span> <span class="nn">console</span> <span class="n">by</span> <span class="n">console</span>
<span class="n">Verify</span> <span class="n">the</span> <span class="n">RIP</span> <span class="n">protocol</span> <span class="n">settings</span> <span class="n">on</span> <span class="n">R2</span><span class="o">.</span>
<span class="n">R2</span><span class="c1"># show ip protocols</span>

<span class="o">***</span> <span class="n">IP</span> <span class="n">Routing</span> <span class="ow">is</span> <span class="n">NSF</span> <span class="n">aware</span> <span class="o">***</span>

<span class="n">Routing</span> <span class="n">Protocol</span> <span class="ow">is</span> <span class="s2">&quot;rip&quot;</span>
  <span class="n">Outgoing</span> <span class="n">update</span> <span class="nb">filter</span> <span class="nb">list</span> <span class="k">for</span> <span class="nb">all</span> <span class="n">interfaces</span> <span class="ow">is</span> <span class="ow">not</span> <span class="nb">set</span>
  <span class="n">Incoming</span> <span class="n">update</span> <span class="nb">filter</span> <span class="nb">list</span> <span class="k">for</span> <span class="nb">all</span> <span class="n">interfaces</span> <span class="ow">is</span> <span class="ow">not</span> <span class="nb">set</span>
  <span class="n">Sending</span> <span class="n">updates</span> <span class="n">every</span> <span class="mi">30</span> <span class="n">seconds</span><span class="p">,</span> <span class="nb">next</span> <span class="n">due</span> <span class="ow">in</span> <span class="mi">17</span> <span class="n">seconds</span>
  <span class="n">Invalid</span> <span class="n">after</span> <span class="mi">180</span> <span class="n">seconds</span><span class="p">,</span> <span class="n">hold</span> <span class="n">down</span> <span class="mi">180</span><span class="p">,</span> <span class="n">flushed</span> <span class="n">after</span> <span class="mi">240</span>
  <span class="n">Redistributing</span><span class="p">:</span> <span class="n">rip</span>
  <span class="n">Default</span> <span class="n">version</span> <span class="n">control</span><span class="p">:</span> <span class="n">send</span> <span class="n">version</span> <span class="mi">2</span><span class="p">,</span> <span class="n">receive</span> <span class="n">version</span> <span class="mi">2</span>
    <span class="n">Interface</span>             <span class="n">Send</span>  <span class="n">Recv</span>  <span class="n">Triggered</span> <span class="n">RIP</span>  <span class="n">Key</span><span class="o">-</span><span class="n">chain</span>
    <span class="n">Serial0</span><span class="o">/</span><span class="mi">0</span><span class="o">/</span><span class="mi">0</span>           <span class="mi">2</span>     <span class="mi">2</span>
    <span class="n">Serial0</span><span class="o">/</span><span class="mi">0</span><span class="o">/</span><span class="mi">1</span>           <span class="mi">2</span>     <span class="mi">2</span>
  <span class="n">Automatic</span> <span class="n">network</span> <span class="n">summarization</span> <span class="ow">is</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">effect</span>
  <span class="n">Maximum</span> <span class="n">path</span><span class="p">:</span> <span class="mi">4</span>
  <span class="n">Routing</span> <span class="k">for</span> <span class="n">Networks</span><span class="p">:</span>
    <span class="mf">192.168</span><span class="o">.</span><span class="mf">2.0</span>
    <span class="mf">192.168</span><span class="o">.</span><span class="mf">3.0</span>
    <span class="mf">192.168</span><span class="o">.</span><span class="mf">4.0</span>
  <span class="n">Passive</span> <span class="n">Interface</span><span class="p">(</span><span class="n">s</span><span class="p">):</span>
    <span class="n">GigabitEthernet0</span><span class="o">/</span><span class="mi">0</span>
  <span class="n">Routing</span> <span class="n">Information</span> <span class="n">Sources</span><span class="p">:</span>
    <span class="n">Gateway</span>         <span class="n">Distance</span>      <span class="n">Last</span> <span class="n">Update</span>
    <span class="mf">192.168</span><span class="o">.</span><span class="mf">2.1</span>          <span class="mi">120</span>      <span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">24</span>
    <span class="n">Gateway</span>         <span class="n">Distance</span>      <span class="n">Last</span> <span class="n">Update</span>
    <span class="mf">192.168</span><span class="o">.</span><span class="mf">4.1</span>          <span class="mi">120</span>      <span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">23</span>
  <span class="n">Distance</span><span class="p">:</span> <span class="p">(</span><span class="n">default</span> <span class="ow">is</span> <span class="mi">120</span><span class="p">)</span>
<span class="n">R2</span><span class="c1">#</span>

<span class="n">You</span> <span class="n">are</span> <span class="n">now</span> <span class="n">logged</span> <span class="n">into</span> <span class="n">R3</span><span class="o">.</span> <span class="n">Configure</span> <span class="n">passive</span> <span class="n">interface</span> <span class="n">to</span> <span class="n">be</span> <span class="n">the</span> <span class="n">default</span> <span class="n">setting</span><span class="o">.</span> <span class="n">Remove</span> <span class="n">the</span> <span class="n">passive</span> <span class="n">interface</span> <span class="n">setting</span> <span class="kn">from</span> <span class="nn">S0</span><span class="o">/</span><span class="mi">0</span><span class="o">/</span><span class="mi">1</span> <span class="ow">and</span> <span class="k">return</span> <span class="n">to</span> <span class="n">privileged</span> <span class="n">EXEC</span> <span class="n">mode</span><span class="o">.</span>
<span class="n">R3</span><span class="p">(</span><span class="n">config</span><span class="p">)</span><span class="c1"># router rip</span>
<span class="n">R3</span><span class="p">(</span><span class="n">config</span><span class="o">-</span><span class="n">router</span><span class="p">)</span><span class="c1"># passive-interface default</span>
<span class="n">R3</span><span class="p">(</span><span class="n">config</span><span class="o">-</span><span class="n">router</span><span class="p">)</span><span class="c1"># no passive-interface s0/0/1</span>
<span class="n">R3</span><span class="p">(</span><span class="n">config</span><span class="o">-</span><span class="n">router</span><span class="p">)</span><span class="c1"># end</span>
<span class="n">R3</span><span class="c1">#</span>
<span class="o">*</span><span class="n">Mar</span> <span class="mi">10</span> <span class="mi">16</span><span class="p">:</span><span class="mi">34</span><span class="p">:</span><span class="mf">28.899</span><span class="p">:</span> <span class="o">%</span><span class="n">SYS</span><span class="o">-</span><span class="mi">5</span><span class="o">-</span><span class="n">CONFIG_I</span><span class="p">:</span> <span class="n">Configured</span> <span class="kn">from</span> <span class="nn">console</span> <span class="n">by</span> <span class="n">console</span>
<span class="n">Verify</span> <span class="n">the</span> <span class="n">RIP</span> <span class="n">protocol</span> <span class="n">settings</span> <span class="n">on</span> <span class="n">R3</span><span class="o">.</span>
<span class="n">R3</span><span class="c1"># show ip protocols</span>
<span class="o">***</span> <span class="n">IP</span> <span class="n">Routing</span> <span class="ow">is</span> <span class="n">NSF</span> <span class="n">aware</span> <span class="o">***</span>

<span class="n">Routing</span> <span class="n">Protocol</span> <span class="ow">is</span> <span class="s2">&quot;rip&quot;</span>
  <span class="n">Outgoing</span> <span class="n">update</span> <span class="nb">filter</span> <span class="nb">list</span> <span class="k">for</span> <span class="nb">all</span> <span class="n">interfaces</span> <span class="ow">is</span> <span class="ow">not</span> <span class="nb">set</span>
  <span class="n">Incoming</span> <span class="n">update</span> <span class="nb">filter</span> <span class="nb">list</span> <span class="k">for</span> <span class="nb">all</span> <span class="n">interfaces</span> <span class="ow">is</span> <span class="ow">not</span> <span class="nb">set</span>
  <span class="n">Sending</span> <span class="n">updates</span> <span class="n">every</span> <span class="mi">30</span> <span class="n">seconds</span><span class="p">,</span> <span class="nb">next</span> <span class="n">due</span> <span class="ow">in</span> <span class="mi">15</span> <span class="n">seconds</span>
  <span class="n">Invalid</span> <span class="n">after</span> <span class="mi">180</span> <span class="n">seconds</span><span class="p">,</span> <span class="n">hold</span> <span class="n">down</span> <span class="mi">180</span><span class="p">,</span> <span class="n">flushed</span> <span class="n">after</span> <span class="mi">240</span>
  <span class="n">Redistributing</span><span class="p">:</span> <span class="n">rip</span>
  <span class="n">Default</span> <span class="n">version</span> <span class="n">control</span><span class="p">:</span> <span class="n">send</span> <span class="n">version</span> <span class="mi">2</span><span class="p">,</span> <span class="n">receive</span> <span class="n">version</span> <span class="mi">2</span>
    <span class="n">Interface</span>             <span class="n">Send</span>  <span class="n">Recv</span>  <span class="n">Triggered</span> <span class="n">RIP</span>  <span class="n">Key</span><span class="o">-</span><span class="n">chain</span>
    <span class="n">Serial0</span><span class="o">/</span><span class="mi">0</span><span class="o">/</span><span class="mi">1</span>           <span class="mi">2</span>     <span class="mi">2</span>
  <span class="n">Automatic</span> <span class="n">network</span> <span class="n">summarization</span> <span class="ow">is</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">effect</span>
  <span class="n">Maximum</span> <span class="n">path</span><span class="p">:</span> <span class="mi">4</span>
  <span class="n">Routing</span> <span class="k">for</span> <span class="n">Networks</span><span class="p">:</span>
    <span class="mf">192.168</span><span class="o">.</span><span class="mf">4.0</span>
    <span class="mf">192.168</span><span class="o">.</span><span class="mf">5.0</span>
  <span class="n">Passive</span> <span class="n">Interface</span><span class="p">(</span><span class="n">s</span><span class="p">):</span>
    <span class="n">Embedded</span><span class="o">-</span><span class="n">Service</span><span class="o">-</span><span class="n">Engine0</span><span class="o">/</span><span class="mi">0</span>
    <span class="n">GigabitEthernet0</span><span class="o">/</span><span class="mi">0</span>
    <span class="n">GigabitEthernet0</span><span class="o">/</span><span class="mi">1</span>
    <span class="n">GigabitEthernet0</span><span class="o">/</span><span class="mi">3</span>
    <span class="n">Serial0</span><span class="o">/</span><span class="mi">0</span><span class="o">/</span><span class="mi">0</span>
    <span class="n">RG</span><span class="o">-</span><span class="n">AR</span><span class="o">-</span><span class="n">IF</span><span class="o">-</span><span class="n">INPUT1</span>
  <span class="n">Routing</span> <span class="n">Information</span> <span class="n">Sources</span><span class="p">:</span>
    <span class="n">Gateway</span>         <span class="n">Distance</span>      <span class="n">Last</span> <span class="n">Update</span>
    <span class="mf">192.168</span><span class="o">.</span><span class="mf">4.2</span>          <span class="mi">120</span>      <span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">23</span>
  <span class="n">Distance</span><span class="p">:</span> <span class="p">(</span><span class="n">default</span> <span class="ow">is</span> <span class="mi">120</span><span class="p">)</span>
<span class="n">R3</span><span class="c1">#</span>
</pre></div>
</div>
<p>There is no need for R1, R2, and R3 to forward RIP updates out of their LAN interfaces. The configuration in Figure 2 identifies the R1 G0/0 interface as passive. <em>The show ip protocols command is then used to verify that the Gigabit Ethernet interface was passive.</em>
.. note:: Notice that the G0/0 interface is no longer listed as sending or receiving version 2 updates, but instead is now listed under the Passive Interface(s) section. Also notice that the network 192.168.1.0 is still listed under Routing for Networks, which means that this network is still included as a route entry in RIP updates that are sent to R2.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">All routing protocols support the passive-interface command.</p>
</div>
<p>configure the LAN interface as a passive interface on R2 and R3.</p>
<div class="code highlight-default"><div class="highlight"><pre><span></span><span class="n">R2</span><span class="p">(</span><span class="n">config</span><span class="p">)</span><span class="c1"># router rip</span>
<span class="n">R2</span><span class="p">(</span><span class="n">config</span><span class="o">-</span><span class="n">router</span><span class="p">)</span><span class="c1"># passive-interface g0/0</span>
<span class="n">R2</span><span class="p">(</span><span class="n">config</span><span class="o">-</span><span class="n">router</span><span class="p">)</span><span class="c1"># end</span>

<span class="n">Verify</span> <span class="n">the</span> <span class="n">RIP</span> <span class="n">protocol</span> <span class="n">settings</span> <span class="n">on</span> <span class="n">R2</span>
<span class="n">R2</span><span class="c1"># show ip protocols</span>

<span class="n">R3</span><span class="p">(</span><span class="n">config</span><span class="p">)</span><span class="c1"># router rip</span>
<span class="n">R3</span><span class="p">(</span><span class="n">config</span><span class="o">-</span><span class="n">router</span><span class="p">)</span><span class="c1"># passive-interface default</span>
<span class="n">R3</span><span class="p">(</span><span class="n">config</span><span class="o">-</span><span class="n">router</span><span class="p">)</span><span class="c1"># no passive-interface s0/0/1</span>
<span class="n">R3</span><span class="p">(</span><span class="n">config</span><span class="o">-</span><span class="n">router</span><span class="p">)</span><span class="c1"># end</span>

<span class="n">Verify</span> <span class="n">the</span> <span class="n">RIP</span> <span class="n">protocol</span> <span class="n">settings</span> <span class="n">on</span> <span class="n">R3</span>
<span class="n">R3</span><span class="c1"># show ip protocols</span>
</pre></div>
</div>
<p>As an alternative, all interfaces can be made passive using the passive-interface default command. Interfaces that should not be passive can be re-enabled using the no passive-interface command.</p>
</div>
<div class="section" id="propagate-a-default-route">
<h4>propagate a default route<a class="headerlink" href="#propagate-a-default-route" title="Permalink to this headline">¶</a></h4>
<img alt="_images/propagate_default_route.png" src="_images/propagate_default_route.png" />
<p>To propagate a default route in RIP, the edge router must be configured with:</p>
<blockquote>
<div><ul class="simple">
<li>A default static route using the ip route 0.0.0.0 0.0.0.0 command.</li>
</ul>
<blockquote>
<div><ul class="simple">
<li>The <strong>default-information originate</strong> router configuration command. This instructs R1 to originate default information, by propagating the static default route in RIP updates.</li>
</ul>
</div></blockquote>
</div></blockquote>
<div class="code highlight-default"><div class="highlight"><pre><span></span><span class="n">R1</span><span class="p">(</span><span class="n">config</span><span class="p">)</span><span class="c1"># ip route 0.0.0.0 0.0.0.0 s0/0/1 209.165.200.226</span>
<span class="n">R1</span><span class="p">(</span><span class="n">config</span><span class="p">)</span><span class="c1"># router rip</span>
<span class="n">R1</span><span class="p">(</span><span class="n">config</span><span class="o">-</span><span class="n">router</span><span class="p">)</span><span class="c1"># default-information originate</span>
<span class="n">R1</span><span class="p">(</span><span class="n">config</span><span class="o">-</span><span class="n">router</span><span class="p">)</span><span class="c1"># end</span>
</pre></div>
</div>
<p>Example above configures a fully-specified default static route to the service provider and then the route is propagated by RIP. Notice that R1 now has a Gateway of Last Resort and default route installed in its routing table.</p>
</div>
<div class="section" id="exercise-example">
<h4>exercise example<a class="headerlink" href="#exercise-example" title="Permalink to this headline">¶</a></h4>
<blockquote>
<div><div class="code highlight-default"><div class="highlight"><pre><span></span>a router that is connected to an isp
------------------------------------
hostname R1
!
ip cef
no ipv6 cef
!
interface GigabitEthernet0/0
 ip address 192.168.1.1 255.255.255.0
 duplex auto
 speed auto
!
interface GigabitEthernet0/1
 no ip address
 duplex auto
 speed auto
 shutdown
!
interface GigabitEthernet0/2
 no ip address
 duplex auto
 speed auto
 shutdown
!
interface Serial0/0/0
 ip address 192.168.2.1 255.255.255.0
 clock rate 2000000
!
interface Serial0/0/0
 ip address 192.168.2.1 255.255.255.0
 clock rate 2000000
!
interface Serial0/0/1
 ip address 209.165.200.225 255.255.255.252
!
interface Vlan1
 no ip address
 shutdown
!
router rip
 version 2
 passive-interface GigabitEthernet0/0
 network 192.168.1.0
 network 192.168.2.0
 default-information originate
!
ip classless
ip route 0.0.0.0 0.0.0.0 Serial0/0/1
</pre></div>
</div>
</div></blockquote>
</div>
<div class="section" id="remote-networks-in-routing-table">
<h4>Remote Networks in Routing table<a class="headerlink" href="#remote-networks-in-routing-table" title="Permalink to this headline">¶</a></h4>
<img alt="_images/RemoteNetworkEntries.png" src="_images/RemoteNetworkEntries.png" />
<ul class="simple">
<li>Route Source: ids how route was learned</li>
<li>Dest Network: ids address of the remote network</li>
<li>Administrative Distance: ids <em>trustworthiness</em> of route source</li>
<li>Metric: ids value assigned to reach remote NW. Lower is better</li>
<li>Next hop: ids ipv4 address of next router to forward packet to</li>
<li>route timestamp: ids from when the route was last heard</li>
<li>Outgoing interface: ids exit interface to use to forward packet to final destination</li>
</ul>
<img alt="_images/RemoteNetworkEntriesExercise.png" src="_images/RemoteNetworkEntriesExercise.png" />
</div>
<div class="section" id="routing-table-terms">
<h4>Routing table terms<a class="headerlink" href="#routing-table-terms" title="Permalink to this headline">¶</a></h4>
<ul>
<li><dl class="first docutils">
<dt>Ultimate route:</dt>
<dd><p class="first last">has next-hop ip and/or exit interface</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Level 1 route:</dt>
<dd><dl class="first last docutils">
<dt>a route with a subnet mask <em>equal or less than classful mask</em> of the network address</dt>
<dd><ul class="first last">
<li><p class="first">Network route - <em>equal</em> to that of classful mask</p>
</li>
<li><p class="first">Supernet route - <em>less</em> than classful mask, eg summary address</p>
</li>
<li><p class="first">Default route - static route with the address 0.0.0.0/0</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">source of Level 1 route = D.C. network, static, or dynamic routing protocol</p>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">level 1 route are also ultimate routes</p>
</div>
</li>
</ul>
</dd>
</dl>
</dd>
</dl>
</li>
<li><p class="first">Level 1 parent route: Level 1 network route (=mask) that is subnetted:</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">L1 parent route = never an ultimate route e.g. 172.16.0.0/16 #of subnets, #different masks</p>
</div>
</li>
<li><p class="first">Level 2 child routes aka <strong>subnet</strong> route: subnet of a <em>classful network address</em>:</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">L1 parent route contains L2 child routes</p>
</div>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">no L1 parent = it ain’t no L2 child</p>
</div>
<table border="1" class="docutils">
<colgroup>
<col width="42%" />
<col width="58%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td rowspan="4">172.16.0.0</td>
<td>172.16.1.0/24</td>
</tr>
<tr class="row-even"><td>172.16.2.0/24</td>
</tr>
<tr class="row-odd"><td>172.16.3.0/24</td>
</tr>
<tr class="row-even"><td>172.16.4.0/28</td>
</tr>
<tr class="row-odd"><td rowspan="3">209.165.200.0</td>
<td>209.165.200.224/30</td>
</tr>
<tr class="row-even"><td>209.165.200.228/30</td>
</tr>
<tr class="row-odd"><td>209.165.200.232/30</td>
</tr>
</tbody>
</table>
</li>
</ul>
</div>
<div class="section" id="route-lookup-process">
<h4>Route lookup process<a class="headerlink" href="#route-lookup-process" title="Permalink to this headline">¶</a></h4>
<ol class="arabic simple">
<li>if a level 1 ultimate route (exit|nhop) = forward</li>
<li>if lvl 1 parent route (equal to snmask &amp; never and no exit|nhop) then<ul>
<li>check if match with level 2 child (subnet) route (=bigger than nwmask)</li>
</ul>
</li>
<li>continue searching lvl 1 supernet routes (=less than nwmask) for match including default route if there is one</li>
<li>sorry no match, drop it like it’s hot</li>
</ol>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">A route referencing only a next-hop IP address and not an exit interface, must be resolved to a route with an exit interface, if Cisco Express Forwarding (CEF) is not being used. Without CEF, a recursive lookup is performed on the next-hop IP address until the route is resolved to an exit interface. CEF is enabled by default.</p>
</div>
</div>
<div class="section" id="ipv6-routing-table-entries">
<h4>IPv6 Routing Table Entries<a class="headerlink" href="#ipv6-routing-table-entries" title="Permalink to this headline">¶</a></h4>
<p>reference topology</p>
<img alt="_images/ipv6_routingtable_entries.png" src="_images/ipv6_routingtable_entries.png" />
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Because IPv6 is classless by design, all routes are effectively <strong>L1 ultimate routes</strong>. There is no L1 parent or L2 child routes</p>
</div>
<p>R1,2,3 in full mesh topology. All routers have redundant paths to various networks.
R2 is the edge router to the ISP, however a default static route is not being advertised
EIGRP is cfgd on all of them</p>
<p>Directly connected routes on R1 = show ipv6 route –&gt; C and L</p>
<img alt="_images/routingtable_ipv6.png" src="_images/routingtable_ipv6.png" />
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">RIP configuration on a router should contain network statements for connected networks only. Remote networks are learned from routing updates from other routers.</p>
</div>
</div>
<div class="section" id="qna">
<h4>QnA<a class="headerlink" href="#qna" title="Permalink to this headline">¶</a></h4>
<p>What is a purpose of the network command when configuring RIPv2 as the routing protocol?</p>
<p>V  It identifies the interfaces that belong to a specified network.</p>
<p>X  It specifies the remote network that can now be reached.</p>
<blockquote>
<div><p>It immediately advertises the specified network to neighbor routers with a classful mask.</p>
<p>It populates the routing table with the network entry.</p>
</div></blockquote>
<p>The network command is used to advertise the directly connected networks of a router. It enables RIP on the interfaces that belong to the specified network.</p>
<p>The command being entered by the engineer will cause RIPv2 to activate on the interface for the 192.168.10.0 network. <strong>If RIPv1 is configured, the router will send only version 1 updates, but will listen for both version 1 and version 2 updates. If RIPv2 is configured, the router will send and listen to only version 2 updates.</strong></p>
</div>
</div>
<div class="section" id="chapter-4-switched-networks">
<h3>Chapter 4 switched networks<a class="headerlink" href="#chapter-4-switched-networks" title="Permalink to this headline">¶</a></h3>
<p>examination of the flow of traffic in a modern network. It examines some of the current network design models and the way LAN switches build forwarding tables and use the MAC address information to efficiently switch data between hosts.</p>
<div class="section" id="elements-of-a-converged-network">
<h4>elements of a converged network<a class="headerlink" href="#elements-of-a-converged-network" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li>Call control - Telephone call processing, caller ID, call transfer, hold, and conference</li>
<li>Voice messaging - Voicemail</li>
<li>Mobility - Receive important calls wherever you are</li>
<li>Automated attendant - Serve customers faster by routing calls directly to the right department or individual</li>
</ul>
</div>
<div class="section" id="hierarchy-in-the-borderless-switched-network">
<h4>Hierarchy in the Borderless Switched Network<a class="headerlink" href="#hierarchy-in-the-borderless-switched-network" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li>Hierarchical - Facilitates understanding the role of each device at every tier, simplifies deployment, operation, and management, and reduces fault domains at every tier</li>
<li>Modularity - Allows seamless network expansion and integrated service enablement on an on-demand basis</li>
<li>Resiliency - Satisfies user expectations for keeping the network always on</li>
<li>Flexibility - Allows intelligent traffic load sharing by using all network resources</li>
</ul>
<p>The three critical layers within these tiered designs are the <strong>access, distribution, and core layers</strong>.</p>
<img alt="_images/accesslayer.png" src="_images/accesslayer.png" />
<p>Access, Distribution, and Core Layers</p>
</div>
<div class="section" id="access-layer">
<h4>Access Layer<a class="headerlink" href="#access-layer" title="Permalink to this headline">¶</a></h4>
<p>The access layer represents the network edge, where traffic enters or exits the campus network. Traditionally, the primary function of an access layer switch is to provide network access to the user. Access layer switches connect to distribution layer switches, which implement network foundation technologies such as routing, quality of service, and security.</p>
<p>To meet network application and end-user demand, the next-generation switching platforms now provide more converged, integrated, and intelligent services to various types of endpoints at the network edge. Building intelligence into access layer switches allows applications to operate on the network more efficiently and securely.</p>
</div>
<div class="section" id="distribution-layer">
<h4>Distribution Layer<a class="headerlink" href="#distribution-layer" title="Permalink to this headline">¶</a></h4>
<p>The distribution layer interfaces between the access layer and the core layer to provide many important functions, including:</p>
<blockquote>
<div><ul class="simple">
<li>Aggregating large-scale wiring closet networks</li>
<li>Aggregating Layer 2 broadcast domains and Layer 3 routing boundaries</li>
<li>Providing intelligent switching, routing, and network access policy functions to access the rest of the network</li>
<li>Providing high availability through redundant distribution layer switches to the end-user and equal cost paths to the core</li>
<li>Providing differentiated services to various classes of service applications at the edge of the network</li>
</ul>
</div></blockquote>
</div>
<div class="section" id="core-layer">
<h4>Core Layer<a class="headerlink" href="#core-layer" title="Permalink to this headline">¶</a></h4>
<p>The core layer is the network backbone. It connects several layers of the campus network. The core layer serves as the aggregator for all of the other campus blocks and ties the campus together with the rest of the network. The primary purpose of the core layer is to provide fault isolation and high-speed backbone connectivity.</p>
<p>Figure 1 shows a three-tier campus network design for organizations where the access, distribution, and core are each separate layers. To build a simplified, scalable, cost-effective, and efficient physical cable layout design, the recommendation is to build an extended-star physical network topology from a centralized building location to all other buildings on the same campus.</p>
<img alt="_images/corelayer1.png" src="_images/corelayer1.png" />
<p>In some cases where extensive physical or network scalability does not exist, maintaining separate distribution and core layers is not required. In smaller campus locations where there are fewer users accessing the network or in campus sites consisting of a single building, separate core and distribution layers may not be needed. In this scenario, the recommendation is the alternate two-tier campus network design, also known as the collapsed core network design.</p>
<p>Figure 2 shows a two-tier campus network design example for an enterprise campus where the distribution and core layers are collapsed into a single layer.
.. image:: _static/corelayercollapsed.png</p>
<p>Borderless switched networks</p>
<img alt="_images/borderlessswitchednetworks.png" src="_images/borderlessswitchednetworks.png" />
</div>
<div class="section" id="considerations-switch">
<h4>considerations switch<a class="headerlink" href="#considerations-switch" title="Permalink to this headline">¶</a></h4>
<p>Fixed - Modular - Stackable</p>
<ul class="simple">
<li>Cost: The cost of a switch will depend on the number and speed of the interfaces, supported features, and expansion capability.</li>
<li>Port Density: Network switches must support the appropriate number of devices on the network.</li>
<li>Power: It is now common to power access points, IP phones, and even compact switches using Power over Ethernet (PoE). In addition to PoE considerations, some chassis-based switches support redundant power supplies.</li>
<li>Reliability: The switch should provide continuous access to the network.</li>
<li>Port Speed: The speed of the network connection is of primary concern to end users.</li>
<li>Frame Buffers: The ability of the switch to store frames is important in a network where there might be congested ports to servers or other areas of the network.</li>
<li>Scalability: The number of users on a network typically grows over time; therefore, the switch should provide the opportunity for growth.</li>
</ul>
</div>
<div class="section" id="store-n-forward-switching">
<h4>store n forward switching<a class="headerlink" href="#store-n-forward-switching" title="Permalink to this headline">¶</a></h4>
<p>Store-and-forward switching has two primary characteristics that distinguish it from cut-through: error checking and automatic buffering.</p>
<p>A store-and-forward switch drops frames that do not pass the FCS check; therefore, it does not forward invalid frames. By contrast, a cut-through switch may forward invalid frames because no FCS check is performed.</p>
</div>
<div class="section" id="cut-through-switching">
<h4>Cut-Through Switching<a class="headerlink" href="#cut-through-switching" title="Permalink to this headline">¶</a></h4>
<p>start forwarding a frame earlier than store-and-forward switching. There are two primary characteristics of cut-through switching: rapid frame forwarding and fragment free.</p>
<div class="section" id="rapid-frame-forwarding">
<h5>Rapid Frame Forwarding<a class="headerlink" href="#rapid-frame-forwarding" title="Permalink to this headline">¶</a></h5>
<p>With today’s MAC controllers and ASICs, a switch using the cut-through method can quickly decide whether it needs to examine a larger portion of a frame’s headers for additional filtering purposes. For example, the switch can analyze past the first 14 bytes (the source MAC address, destination MAC, and the EtherType fields), and examine an additional 40 bytes in order to perform more sophisticated functions relative to IPv4 Layers 3 and 4.</p>
</div>
<div class="section" id="fragment-free-forwarding">
<h5>Fragment Free Forwarding<a class="headerlink" href="#fragment-free-forwarding" title="Permalink to this headline">¶</a></h5>
<p>Fragment free switching is a modified form of cut-through switching in which the switch waits for the collision window (64 bytes) to pass before forwarding the frame. This means each frame will be checked into the data field to make sure no fragmentation has occurred. Fragment free switching provides better error checking than cut-through, with practically no increase in latency.</p>
</div>
</div>
<div class="section" id="collision-domains">
<h4>Collision domains<a class="headerlink" href="#collision-domains" title="Permalink to this headline">¶</a></h4>
<img alt="_images/collisiondomains.png" src="_images/collisiondomains.png" />
<img alt="_images/collisiondomains2.png" src="_images/collisiondomains2.png" />
</div>
<div class="section" id="qna-ch4">
<h4>QnA Ch4<a class="headerlink" href="#qna-ch4" title="Permalink to this headline">¶</a></h4>
<p>Which service is provided by an automated attendant feature on a converged network?
* Call routing</p>
<ul class="simple">
<li>The automated attendant feature increases the speed of voice services by routing calls directly to individuals or departments. Point-to-point video and video conferencing describe video services on a converged network. An IT management interface is part of a converged network solution that allows IT personnel to facilitate moves, adds, and changes through a centralized application.</li>
</ul>
<p>Stackable switches provide fault tolerance and bandwidth availability by using special cables between switches and are less costly to implement than modular switches.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">What is a basic function of the Cisco Borderless Architecture distribution layer? Aggregating Layer 3 routing boundaries</p>
</div>
<p>Match the borderless switched network guideline description to the principle.</p>
<img alt="_images/borderlessswitchednetworks_matchup.png" src="_images/borderlessswitchednetworks_matchup.png" />
<p>Place the options in the following order:</p>
<dl class="docutils">
<dt>flexibility:</dt>
<dd>allows intelligent traffic load sharing by using all network resources</dd>
<dt>hierarchical:</dt>
<dd>facilitates understanding the role of each device at every tier, simplifies deployment, operation, management, and reduces fault domains at every tier</dd>
<dt>modularity:</dt>
<dd>allows seamless network expansion and integrated service enablement on an on-demand basis</dd>
<dt>resiliency:</dt>
<dd>satisfies user expectations for keeping the network always on</dd>
</dl>
</div>
</div>
<div class="section" id="chapter-5-switch-configuration">
<h3>Chapter 5 Switch Configuration<a class="headerlink" href="#chapter-5-switch-configuration" title="Permalink to this headline">¶</a></h3>
<div class="section" id="configure-boot-environment-variable">
<h4>Configure BOOT Environment variable<a class="headerlink" href="#configure-boot-environment-variable" title="Permalink to this headline">¶</a></h4>
<div class="code highlight-default"><div class="highlight"><pre><span></span><span class="n">S1</span><span class="p">(</span><span class="n">config</span><span class="p">)</span><span class="c1"># boot system flash:/c2960-lanbasek9-mz.150-2.SE/c2960-lanbasek9-mz.150-2.SE.bin</span>
             <span class="n">command</span>     <span class="n">storage</span>   <span class="n">path</span> <span class="n">to</span> <span class="n">location</span> <span class="ow">in</span> <span class="n">fs</span>     <span class="n">IOS</span> <span class="n">filename</span>

<span class="n">S1</span><span class="c1"># show boot</span>
</pre></div>
</div>
</div>
<div class="section" id="switch-boot-sequence">
<h4>Switch boot sequence<a class="headerlink" href="#switch-boot-sequence" title="Permalink to this headline">¶</a></h4>
<ol class="arabic simple">
<li>loads POST from ROM. Checks CPU subsystem. Tests CPU, DRAM &amp; portion of flash device</li>
<li>loads BOOT LOADER software from ROM, runs immediately after POST</li>
<li>BOOT LOADER performs low-level CPU initialization. Initializes CPU registers that control where physical memory is mapped, quantity of memory and its speed</li>
<li>BOOT LOADER initializes flash file system on the system board</li>
<li>BOOT LOADER locates &amp; loads a default IOS image into memory</li>
</ol>
<p>BOOT environment variable. If this variable is not set, the switch attempts to load and execute the first executable file it can by performing a recursive, depth-first search throughout the flash file system</p>
</div>
<div class="section" id="recover-from-system-crash">
<h4>Recover from System Crash<a class="headerlink" href="#recover-from-system-crash" title="Permalink to this headline">¶</a></h4>
<ol class="arabic simple">
<li>connect by console cable, configure terminal emulation software</li>
<li>unplug power cord</li>
<li>reconnect power and hold down MODE button while system LED is flashing green</li>
<li>Continue pressing MODE button while LED turns briefly amber and then solid green. Now release the button</li>
<li>boot loader <strong>switch:</strong> prompt appears</li>
</ol>
<p>switch: dir flash:</p>
<div class="section" id="catalyst-2960-switch-leds">
<h5>Catalyst 2960 switch LEDs<a class="headerlink" href="#catalyst-2960-switch-leds" title="Permalink to this headline">¶</a></h5>
<img alt="_images/c2960leds.png" src="_images/c2960leds.png" />
<ol class="arabic simple">
<li>System LED: system has power and is functioning properly. If Amber = power but not working properly</li>
<li>RPS LED: blinking = connected but providing power to another device. Amber = standby mode Blinking Amber = providing power due to main PSU failed</li>
<li>Port Status LED (default mode): alternating green-amber = link fault. Amber/blinking Amber = no forwarding/port blocked to prevent loop</li>
<li>Port Duplex mode LED: green = full duplex</li>
<li>Port Speed LED: off = 10Mb/s green=100Mb/s blinking green=1000Mb/s</li>
<li>PoE Mode LED: Amber = 1or+ denied power BlinkingAmber = off due to fault| PoE fault Green= PoE on Alterating Green-Amber = no power to not exceed switch power capacity</li>
<li>Mode button</li>
<li>port LEDs</li>
</ol>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">By default, the switch is configured to have the management of the switch controlled through VLAN 1. All ports are assigned to VLAN 1 by default. For security purposes, it is considered a best practice to use a VLAN other than VLAN 1 for the management VLAN.</p>
</div>
</div>
</div>
<div class="section" id="configure-sw-management-ipv4">
<h4>Configure Sw management ipv4<a class="headerlink" href="#configure-sw-management-ipv4" title="Permalink to this headline">¶</a></h4>
<div class="code highlight-default"><div class="highlight"><pre><span></span><span class="n">S1</span><span class="c1"># configure terminal</span>
<span class="n">S1</span><span class="p">(</span><span class="n">config</span><span class="p">)</span><span class="c1"># interface vlan 99</span>
<span class="n">S1</span><span class="p">(</span><span class="n">config</span><span class="o">-</span><span class="k">if</span><span class="p">)</span><span class="c1"># ip address 172.17.99.11 255.255.255.0</span>
<span class="n">S1</span><span class="p">(</span><span class="n">config</span><span class="o">-</span><span class="k">if</span><span class="p">)</span><span class="c1"># no shutdown</span>
<span class="n">S1</span><span class="p">(</span><span class="n">config</span><span class="o">-</span><span class="k">if</span><span class="p">)</span><span class="c1"># end</span>
<span class="n">S1</span><span class="c1"># copy running-config startup-config</span>
</pre></div>
</div>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">Notice that the VLAN 99 interface is in the down state even though you entered the no shutdown command. The interface is currently down because no switch ports are assigned to VLAN 99.</p>
</div>
<div class="section" id="assign-all-user-ports-to-vlan">
<h5>Assign all user ports to vlan<a class="headerlink" href="#assign-all-user-ports-to-vlan" title="Permalink to this headline">¶</a></h5>
<div class="code highlight-default"><div class="highlight"><pre><span></span>S1(config)#
interface range f0/1 – 24,g0/1 - 2
S1(config-if-range)# switchport access vlan 99
S1(config-if-range)#exit
S1(config)#
%LINEPROTO-5-UPDOWN: Line protocol on Interface Vlan1, changed state to down
%LINEPROTO-5-UPDOWN: Line protocol on Interface Vlan99, changed state to up

S1# configure terminal
S1(config)# ip default-gateway 172.17.99.1
S1(config)# end
S1# copy run start
</pre></div>
</div>
</div>
<div class="section" id="configure-apply-vlan-99">
<h5>configure &amp; apply vlan 99<a class="headerlink" href="#configure-apply-vlan-99" title="Permalink to this headline">¶</a></h5>
<div class="code highlight-default"><div class="highlight"><pre><span></span><span class="n">S1</span><span class="p">(</span><span class="n">config</span><span class="p">)</span><span class="c1"># vlan 99</span>
<span class="n">S1</span><span class="p">(</span><span class="n">config</span><span class="o">-</span><span class="n">vlan</span><span class="p">)</span><span class="c1"># name vlan_name</span>
<span class="n">S1</span><span class="p">(</span><span class="n">config</span><span class="o">-</span><span class="n">vlan</span><span class="p">)</span><span class="c1"># exit</span>
<span class="n">S1</span><span class="p">(</span><span class="n">config</span><span class="p">)</span><span class="c1"># interface interface_id</span>
<span class="n">S1</span><span class="p">(</span><span class="n">config</span><span class="o">-</span><span class="k">if</span><span class="p">)</span><span class="c1"># switchport access vlan 99</span>
</pre></div>
</div>
</div>
<div class="section" id="troubleshooting">
<h5>troubleshooting<a class="headerlink" href="#troubleshooting" title="Permalink to this headline">¶</a></h5>
<div class="code highlight-default"><div class="highlight"><pre><span></span><span class="n">S1</span><span class="c1"># show interface vlan99</span>
<span class="n">S1</span><span class="c1"># show ip interface vlan99</span>
<span class="n">S1</span><span class="c1"># show vlan brief</span>
<span class="n">S1</span><span class="c1"># show mac address-table</span>
<span class="n">S1</span><span class="c1"># show mac address-table dynamic</span>
</pre></div>
</div>
</div>
<div class="section" id="basic-template-for-less-hassle">
<h5>basic template for less hassle<a class="headerlink" href="#basic-template-for-less-hassle" title="Permalink to this headline">¶</a></h5>
<p>from global conf mode past:</p>
<div class="code highlight-default"><div class="highlight"><pre><span></span><span class="n">no</span> <span class="n">ip</span> <span class="n">domain</span><span class="o">-</span><span class="n">lookup</span>
<span class="n">hostname</span> <span class="n">S1</span>
<span class="n">service</span> <span class="n">password</span><span class="o">-</span><span class="n">encryption</span>
<span class="n">enable</span> <span class="n">secret</span> <span class="k">class</span>
<span class="nc">banner</span> <span class="n">motd</span> <span class="c1">#</span>
<span class="n">Unauthorized</span> <span class="n">access</span> <span class="ow">is</span> <span class="n">strictly</span> <span class="n">prohibited</span><span class="o">.</span> <span class="c1">#</span>
<span class="n">Line</span> <span class="n">con</span> <span class="mi">0</span>
<span class="n">password</span> <span class="n">cisco</span>
<span class="n">login</span>
<span class="n">logging</span> <span class="n">synchronous</span>
<span class="n">line</span> <span class="n">vty</span> <span class="mi">0</span> <span class="mi">15</span>
<span class="n">password</span> <span class="n">cisco</span>
<span class="n">login</span>
<span class="n">exit</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="setup-a-static-mac-address">
<h4>Setup a static MAC address<a class="headerlink" href="#setup-a-static-mac-address" title="Permalink to this headline">¶</a></h4>
<div class="code highlight-default"><div class="highlight"><pre><span></span><span class="n">S1</span><span class="c1"># clear mac address-table dynamic</span>
<span class="n">S1</span><span class="c1"># show mac address-table</span>
<span class="n">S1</span><span class="p">(</span><span class="n">config</span><span class="p">)</span><span class="c1"># mac address-table static 0050.56BE.6C89 vlan 99 interface fastethernet 0/6</span>
<span class="n">S1</span><span class="c1"># show mac address-table</span>
<span class="n">S1</span><span class="p">(</span><span class="n">config</span><span class="p">)</span><span class="c1"># no mac address-table static 0050.56BE.6C89 vlan 99 interface fastethernet 0/6</span>
</pre></div>
</div>
</div>
<div class="section" id="duplex-communication">
<h4>Duplex communication<a class="headerlink" href="#duplex-communication" title="Permalink to this headline">¶</a></h4>
<p>When a switch port is operating in full-duplex mode, there is no collision domain associated with the port.</p>
<p>Gigabit Ethernet and 10Gb NICs require full-duplex connections to operate. In full-duplex mode, the collision detection circuit on the NIC is disabled. Frames that are sent by the two connected devices cannot collide because the devices use two separate circuits in the network cable. Full-duplex connections require a switch that supports full-duplex configuration, or a direct connection using an Ethernet cable between two devices.</p>
<p>Standard, shared hub-based Ethernet configuration efficiency is typically rated at 50 to 60 percent of the stated bandwidth. Full-duplex offers 100 percent efficiency in both directions (transmitting and receiving). This results in a 200 percent potential use of the stated bandwidth.</p>
</div>
<div class="section" id="speed-auto-mdix">
<h4>Speed/auto-MDIX<a class="headerlink" href="#speed-auto-mdix" title="Permalink to this headline">¶</a></h4>
<div class="code highlight-default"><div class="highlight"><pre><span></span><span class="n">S1</span><span class="c1"># configure terminal</span>
<span class="n">S1</span><span class="p">(</span><span class="n">config</span><span class="p">)</span><span class="c1"># interface fastethernet 0/1</span>
<span class="n">S1</span><span class="p">(</span><span class="n">config</span><span class="o">-</span><span class="k">if</span><span class="p">)</span><span class="c1"># duplex auto</span>
<span class="n">S1</span><span class="p">(</span><span class="n">config</span><span class="o">-</span><span class="k">if</span><span class="p">)</span><span class="c1"># speed auto</span>
<span class="n">S1</span><span class="p">(</span><span class="n">config</span><span class="o">-</span><span class="k">if</span><span class="p">)</span><span class="c1"># mdix auto</span>
<span class="n">S1</span><span class="p">(</span><span class="n">config</span><span class="o">-</span><span class="k">if</span><span class="p">)</span><span class="c1"># end</span>
<span class="n">S1</span><span class="c1"># copy run start</span>

<span class="n">show</span> <span class="n">controllers</span> <span class="n">ethernet</span><span class="o">-</span><span class="n">controller</span> <span class="n">fa</span> <span class="mi">0</span><span class="o">/</span><span class="mi">1</span> <span class="n">phy</span> <span class="o">|</span> <span class="n">include</span> <span class="n">Auto</span><span class="o">-</span><span class="n">MDIX</span>
</pre></div>
</div>
<p>check with show interfaces interface id</p>
</div>
<div class="section" id="verify-interface-status">
<h4>Verify interface status<a class="headerlink" href="#verify-interface-status" title="Permalink to this headline">¶</a></h4>
<img alt="_images/interface_errors.png" src="_images/interface_errors.png" />
<img alt="_images/interface_error_types.png" src="_images/interface_error_types.png" />
<p>“Input errors” is the sum of all errors in datagrams that were received on the interface being examined. This includes runts, giants, CRC, no buffer, frame, overrun, and ignored counts.</p>
<p>“Output errors” is the sum of all errors that prevented the final transmission of datagrams out the interface that is being examined.</p>
</div>
<div class="section" id="ssh-switch-setup">
<h4>SSH Switch Setup<a class="headerlink" href="#ssh-switch-setup" title="Permalink to this headline">¶</a></h4>
<div class="code highlight-default"><div class="highlight"><pre><span></span><span class="n">S1</span><span class="c1"># config t</span>
<span class="n">S1</span><span class="p">(</span><span class="n">config</span><span class="p">)</span><span class="c1"># hostname myswitch</span>
<span class="n">S1</span><span class="p">(</span><span class="n">config</span><span class="p">)</span><span class="c1"># ip domain-name thegeekstuff.com</span>
<span class="n">S1</span><span class="p">(</span><span class="n">config</span><span class="p">)</span><span class="c1"># crypto key generate rsa</span>

<span class="n">S1</span><span class="c1"># line vty 0 4</span>
<span class="n">S1</span><span class="p">(</span><span class="n">config</span><span class="o">-</span><span class="n">line</span><span class="p">)</span><span class="c1"># transport input ssh</span>
<span class="n">S1</span><span class="p">(</span><span class="n">config</span><span class="o">-</span><span class="n">line</span><span class="p">)</span><span class="c1"># login local</span>
<span class="n">S1</span><span class="p">(</span><span class="n">config</span><span class="o">-</span><span class="n">line</span><span class="p">)</span><span class="c1"># password 7</span>
<span class="n">S1</span><span class="p">(</span><span class="n">config</span><span class="o">-</span><span class="n">line</span><span class="p">)</span><span class="c1"># exit</span>
<span class="n">S1</span><span class="c1"># line console 0</span>
<span class="n">S1</span><span class="p">(</span><span class="n">config</span><span class="o">-</span><span class="n">line</span><span class="p">)</span><span class="c1"># logging synchronous</span>
<span class="n">S1</span><span class="p">(</span><span class="n">config</span><span class="o">-</span><span class="n">line</span><span class="p">)</span><span class="c1"># login local</span>
<span class="n">S1</span><span class="p">(</span><span class="n">config</span><span class="o">-</span><span class="n">line</span><span class="p">)</span><span class="c1"># exit</span>

<span class="n">S1</span><span class="p">(</span><span class="n">config</span><span class="p">)</span><span class="c1"># ip ssh version 2</span>
<span class="n">S1</span><span class="p">(</span><span class="n">config</span><span class="p">)</span><span class="c1"># username god secret h3ll0n34rth</span>
<span class="n">S1</span><span class="c1"># enable secret class</span>
<span class="n">S1</span><span class="c1"># service password-encryption</span>
<span class="n">S1</span><span class="c1"># show ip ssh</span>
</pre></div>
</div>
</div>
<div class="section" id="disable-unused-ports">
<h4>Disable unused ports<a class="headerlink" href="#disable-unused-ports" title="Permalink to this headline">¶</a></h4>
<div class="code highlight-default"><div class="highlight"><pre><span></span><span class="n">S1</span><span class="c1"># show run</span>
<span class="n">S1</span><span class="p">(</span><span class="n">config</span><span class="p">)</span><span class="c1"># interface range fastethernet0/1 - 4, fastethernet0/10 - 15</span>
</pre></div>
</div>
</div>
<div class="section" id="port-security">
<h4>Port Security<a class="headerlink" href="#port-security" title="Permalink to this headline">¶</a></h4>
<div class="section" id="secure-mac-address-types">
<h5>Secure MAC Address Types<a class="headerlink" href="#secure-mac-address-types" title="Permalink to this headline">¶</a></h5>
<p>There are a number of ways to configure port security. The type of secure address is based on the configuration and includes:</p>
<blockquote>
<div><ul class="simple">
<li>Static secure MAC addresses - MAC addresses that are manually configured on a port by using the switchport port-security mac-address mac-address interface configuration mode command. MAC addresses configured in this way are stored in the address table and are added to the running configuration on the switch.</li>
<li>Dynamic secure MAC addresses - MAC addresses that are dynamically learned and stored only in the address table. MAC addresses configured in this way are removed when the switch restarts.</li>
<li>Sticky secure MAC addresses - MAC addresses that can be dynamically learned or manually configured, then stored in the address table and added to the running configuration.</li>
</ul>
</div></blockquote>
</div>
<div class="section" id="sticky-secure-mac-addresses">
<h5>Sticky Secure MAC addresses<a class="headerlink" href="#sticky-secure-mac-addresses" title="Permalink to this headline">¶</a></h5>
<p>To configure an interface to convert dynamically learned MAC addresses to sticky secure MAC addresses and add them to the running configuration, you must enable sticky learning.</p>
<p>Sticky learning is enabled on an interface by using the <code class="docutils literal"><span class="pre">switchport</span> <span class="pre">port-security</span> <span class="pre">mac-address</span> <span class="pre">sticky</span> <span class="pre">interface</span> <span class="pre">configuration</span> <span class="pre">mode</span> <span class="pre">command</span></code>.
When this command is entered, the switch converts all dynamically learned MAC addresses, including those that were dynamically learned before sticky learning was enabled, into sticky secure MAC addresses. All sticky secure MAC addresses are added to the address table and to the running configuration.</p>
<p>Sticky secure MAC addresses can also be manually defined. When sticky secure MAC addresses are configured by using the <code class="docutils literal"><span class="pre">switchport</span> <span class="pre">port-security</span> <span class="pre">mac-address</span> <span class="pre">sticky</span> <span class="pre">mac-address</span></code> interface configuration mode command, all specified addresses are added to the address table and the running configuration.
If the sticky secure MAC addresses are saved to the startup configuration file, then when the switch restarts or the interface shuts down, the interface does not need to relearn the addresses. If the sticky secure addresses are not saved, they will be lost.</p>
<p>If sticky learning is disabled by using the <code class="docutils literal"><span class="pre">no</span> <span class="pre">switchport</span> <span class="pre">port-security</span> <span class="pre">mac-address</span> <span class="pre">sticky</span></code> interface configuration mode command, the sticky secure MAC addresses remain part of the address table, but are removed from the running configuration.</p>
<p>Characteristics of sticky secure MAC addresses.</p>
<img alt="_images/sticky_secure.png" src="_images/sticky_secure.png" />
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The port security feature will not work until port security is enabled on the interface using the switchport port-security command.</p>
</div>
</div>
<div class="section" id="security-violation-modes">
<h5>Security Violation Modes<a class="headerlink" href="#security-violation-modes" title="Permalink to this headline">¶</a></h5>
<p>Security Violation Modes include: <strong>Protect Restrict Shutdown</strong></p>
<table border="1" class="docutils">
<colgroup>
<col width="18%" />
<col width="21%" />
<col width="14%" />
<col width="13%" />
<col width="16%" />
<col width="17%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>Violation Mode</td>
<td>Forwards Traffic</td>
<td>Syslog msg</td>
<td>Error msg</td>
<td>up violation</td>
<td>Shutdown port</td>
</tr>
<tr class="row-even"><td>Protect</td>
<td>NO</td>
<td>NO</td>
<td>NO</td>
<td>NO</td>
<td>NO</td>
</tr>
<tr class="row-odd"><td>Restrict</td>
<td>NO</td>
<td>YES</td>
<td>NO</td>
<td>YES</td>
<td>NO</td>
</tr>
<tr class="row-even"><td>Shutdown</td>
<td>NO</td>
<td>NO</td>
<td>NO</td>
<td>YES</td>
<td>YES</td>
</tr>
</tbody>
</table>
<p>Security violations occur in these situations:</p>
<ul class="simple">
<li>A pc with MAC address not in address table attempts to access the interface when the table is full</li>
<li>An address is being used on two secure interfaces in the same VLAN</li>
</ul>
<dl class="docutils">
<dt>Protect:</dt>
<dd>When # of secure MACs reaches limit allowed on port, packets with unknown source addresses are dropped until enough secure MACs are removed  or the # of maximum allowable addresses is increased. There is no notification</dd>
<dt>Restrict:</dt>
<dd>same as protect but there is a notification that a security violation has occurred.Syslog msg + violation count up</dd>
<dt>Shutdown (default):</dt>
<dd>a violation causes IF to become error-disabled and turns off port LED. violation count up + shutdown port</dd>
</dl>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">All 3 no longer forward traffic and don’t display an error message. Restrict is only one with syslog msg, up violation = restrict &amp; shutdown</p>
</div>
<div class="code highlight-default"><div class="highlight"><pre><span></span><span class="n">static</span> <span class="n">mac</span> <span class="n">address</span>
<span class="n">switchport</span> <span class="n">port</span><span class="o">-</span><span class="n">security</span> <span class="n">mac</span><span class="o">-</span><span class="n">address</span> <span class="n">mac</span><span class="o">-</span><span class="n">address</span>
<span class="n">dynamic</span> <span class="n">adds</span> <span class="n">only</span> <span class="n">to</span> <span class="n">table</span> <span class="n">n</span> <span class="n">removed</span> <span class="n">at</span> <span class="n">shutdown</span>
<span class="n">switchport</span> <span class="n">port</span><span class="o">-</span><span class="n">security</span> <span class="n">mac</span><span class="o">-</span><span class="n">address</span> <span class="n">dynamic</span>
<span class="n">switchport</span> <span class="n">port</span><span class="o">-</span><span class="n">security</span> <span class="n">mac</span><span class="o">-</span><span class="n">address</span> <span class="p">{</span><span class="n">sticky</span>
<span class="n">switchport</span> <span class="n">port</span><span class="o">-</span><span class="n">security</span> <span class="n">violation</span> <span class="p">{</span><span class="n">protect</span> <span class="o">|</span> <span class="n">restrict</span> <span class="o">|</span> <span class="n">shutdown</span><span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="configuring-port-security-on-if">
<h5>Configuring port security on IF<a class="headerlink" href="#configuring-port-security-on-if" title="Permalink to this headline">¶</a></h5>
<div class="code highlight-default"><div class="highlight"><pre><span></span><span class="n">S1</span><span class="p">(</span><span class="n">config</span><span class="p">)</span><span class="c1"># interface fastethernet 0/18</span>
<span class="n">S1</span><span class="p">(</span><span class="n">config</span><span class="o">-</span><span class="k">if</span><span class="p">)</span><span class="c1"># switchport mode access</span>
<span class="n">S1</span><span class="p">(</span><span class="n">config</span><span class="o">-</span><span class="k">if</span><span class="p">)</span><span class="c1"># switchport switchport port-security</span>
<span class="n">S1</span><span class="p">(</span><span class="n">config</span><span class="o">-</span><span class="k">if</span><span class="p">)</span><span class="c1"># switchport switchport port-security maximum 10</span>
<span class="n">S1</span><span class="p">(</span><span class="n">config</span><span class="o">-</span><span class="k">if</span><span class="p">)</span><span class="c1"># switchport switchport port-security mac-address sticky</span>

<span class="n">S1</span><span class="c1"># show port-security interface fastethernet 0/18</span>
<span class="n">S1</span><span class="c1"># show run | begin FastEthernet 0/18</span>
<span class="n">S1</span><span class="c1"># show port-security address</span>
</pre></div>
</div>
<p>This example shows how to enable port security on Fast Ethernet port 12 and how to set the maximum number of secure addresses to 5. The violation mode is the default, and no secure MAC addresses are configured.</p>
<div class="code highlight-default"><div class="highlight"><pre><span></span><span class="n">Switch</span><span class="c1"># configure terminal</span>
<span class="n">Enter</span> <span class="n">configuration</span> <span class="n">commands</span><span class="p">,</span> <span class="n">one</span> <span class="n">per</span> <span class="n">line</span><span class="o">.</span>  <span class="n">End</span> <span class="k">with</span> <span class="n">CNTL</span><span class="o">/</span><span class="n">Z</span><span class="o">.</span>
<span class="n">Switch</span><span class="p">(</span><span class="n">config</span><span class="p">)</span><span class="c1"># interface fastethernet 3/12</span>
<span class="n">Switch</span><span class="p">(</span><span class="n">config</span><span class="o">-</span><span class="k">if</span><span class="p">)</span><span class="c1"># switchport mode access</span>
<span class="n">Switch</span><span class="p">(</span><span class="n">config</span><span class="o">-</span><span class="k">if</span><span class="p">)</span><span class="c1"># switchport port-security</span>
<span class="n">Switch</span><span class="p">(</span><span class="n">config</span><span class="o">-</span><span class="k">if</span><span class="p">)</span><span class="c1"># switchport port-security maximum 5</span>
<span class="n">Switch</span><span class="p">(</span><span class="n">config</span><span class="o">-</span><span class="k">if</span><span class="p">)</span><span class="c1"># switchport port-security mac-address sticky</span>
<span class="n">Switch</span><span class="p">(</span><span class="n">config</span><span class="o">-</span><span class="k">if</span><span class="p">)</span><span class="c1"># end</span>
<span class="n">Switch</span><span class="c1"># show port-security interface fastethernet 3/12</span>
<span class="n">Port</span> <span class="n">Security</span>              <span class="p">:</span><span class="n">Enabled</span>
<span class="n">Port</span> <span class="n">Status</span>                <span class="p">:</span><span class="n">Secure</span><span class="o">-</span><span class="n">up</span>
<span class="n">Violation</span> <span class="n">Mode</span>             <span class="p">:</span><span class="n">Shutdown</span>
<span class="n">Aging</span> <span class="n">Time</span>                 <span class="p">:</span><span class="mi">0</span>
<span class="n">Aging</span> <span class="n">Type</span>                 <span class="p">:</span><span class="n">Absolute</span>
<span class="n">SecureStatic</span> <span class="n">Address</span> <span class="n">Aging</span> <span class="p">:</span><span class="n">Enabled</span>
<span class="n">Maximum</span> <span class="n">MAC</span> <span class="n">Addresses</span>      <span class="p">:</span><span class="mi">5</span>
<span class="n">Total</span> <span class="n">MAC</span> <span class="n">Addresses</span>        <span class="p">:</span><span class="mi">0</span>
<span class="n">Configured</span> <span class="n">MAC</span> <span class="n">Addresses</span>   <span class="p">:</span><span class="mi">0</span>
<span class="n">Sticky</span> <span class="n">MAC</span> <span class="n">Addresses</span>       <span class="p">:</span><span class="mi">11</span>
<span class="n">Last</span> <span class="n">Source</span> <span class="n">Address</span>        <span class="p">:</span><span class="mf">0000.0000</span><span class="o">.</span><span class="mi">0401</span>
<span class="n">Security</span> <span class="n">Violation</span> <span class="n">Count</span>   <span class="p">:</span><span class="mi">0</span>
</pre></div>
</div>
<ul class="simple">
<li>To return the interface <strong>to the default condition</strong> as not a secure port, use the <code class="docutils literal"><span class="pre">no</span> <span class="pre">switchport</span> <span class="pre">port-security</span></code> interface configuration command.</li>
<li>To return the interface <strong>to the default number of secure MAC addresses</strong>, use the <code class="docutils literal"><span class="pre">no</span> <span class="pre">switchport</span> <span class="pre">port-security</span> <span class="pre">maximum</span> <span class="pre">value</span></code>.</li>
<li>To <strong>delete a MAC</strong> address from the address table, use the <code class="docutils literal"><span class="pre">no</span> <span class="pre">switchport</span> <span class="pre">port-security</span> <span class="pre">mac-address</span> <span class="pre">mac_address</span></code> command.</li>
<li>To return the <strong>violation mode to the default condition (shutdown mode)</strong>, use the <code class="docutils literal"><span class="pre">no</span> <span class="pre">switchport</span> <span class="pre">port-security</span> <span class="pre">violation</span> <span class="pre">{restrict</span> <span class="pre">|</span> <span class="pre">shutdown}</span></code> command.</li>
<li>To <strong>disable sticky learning</strong> on an interface, use the <code class="docutils literal"><span class="pre">no</span> <span class="pre">switchport</span> <span class="pre">port-security</span> <span class="pre">mac-address</span> <span class="pre">sticky</span></code> command. The interface converts the sticky secure MAC addresses to dynamic secure addresses.</li>
<li>To <strong>delete a sticky secure MAC addresses</strong> from the address table, use the <code class="docutils literal"><span class="pre">no</span> <span class="pre">switchport</span> <span class="pre">port-security</span> <span class="pre">sticky</span> <span class="pre">mac-address</span> <span class="pre">mac_address</span></code> command. To <strong>delete all the sticky addresses on an interface or a VLAN</strong>, use the <code class="docutils literal"><span class="pre">no</span> <span class="pre">switchport</span> <span class="pre">port-security</span> <span class="pre">sticky</span> <span class="pre">interface</span> <span class="pre">interface-id</span></code> command.</li>
<li>To <strong>clear dynamically learned</strong> port security MAC in the CAM table, use the <code class="docutils literal"><span class="pre">clear</span> <span class="pre">port-security</span> <span class="pre">dynamic</span></code> command. The address keyword enables you to clear a secure MAC addresses. The interface keyword enables you to clear all secure addresses on an interface.</li>
</ul>
<p>This example shows how to configure a secure MAC address on Fast Ethernet port 5/1 and verify the configuration:</p>
<div class="code highlight-default"><div class="highlight"><pre><span></span><span class="n">Switch</span><span class="c1"># configure terminal</span>
<span class="n">Enter</span> <span class="n">configuration</span> <span class="n">commands</span><span class="p">,</span> <span class="n">one</span> <span class="n">per</span> <span class="n">line</span><span class="o">.</span>  <span class="n">End</span> <span class="k">with</span> <span class="n">CNTL</span><span class="o">/</span><span class="n">Z</span><span class="o">.</span>
<span class="n">Switch</span><span class="p">(</span><span class="n">config</span><span class="p">)</span><span class="c1"># interface fastethernet 5/1</span>
<span class="n">Switch</span><span class="p">(</span><span class="n">config</span><span class="o">-</span><span class="k">if</span><span class="p">)</span><span class="c1"># switchport mode access</span>
<span class="n">Switch</span><span class="p">(</span><span class="n">config</span><span class="o">-</span><span class="k">if</span><span class="p">)</span><span class="c1"># switchport port-security</span>
<span class="n">Switch</span><span class="p">(</span><span class="n">config</span><span class="o">-</span><span class="k">if</span><span class="p">)</span><span class="c1"># switchport port-security maximum 10</span>
<span class="n">Switch</span><span class="p">(</span><span class="n">config</span><span class="o">-</span><span class="k">if</span><span class="p">)</span><span class="c1"># switchport port-security mac-address 0000.0000.0003 (Static secure MAC)</span>
<span class="n">Switch</span><span class="p">(</span><span class="n">config</span><span class="o">-</span><span class="k">if</span><span class="p">)</span><span class="c1"># switchport port-security mac-address sticky</span>
<span class="n">Switch</span><span class="p">(</span><span class="n">config</span><span class="o">-</span><span class="k">if</span><span class="p">)</span><span class="c1">#</span>
<span class="n">switchport</span> <span class="n">port</span><span class="o">-</span><span class="n">security</span> <span class="n">mac</span><span class="o">-</span><span class="n">address</span> <span class="n">sticky</span> <span class="mf">0000.0000</span><span class="o">.</span><span class="mi">0001</span> <span class="p">(</span><span class="n">Sticky</span> <span class="n">static</span> <span class="n">MAC</span><span class="p">)</span>
<span class="n">Switch</span><span class="p">(</span><span class="n">config</span><span class="o">-</span><span class="k">if</span><span class="p">)</span><span class="c1"># switchport port-security mac-address sticky 0000.0000.0002</span>
<span class="n">Switch</span><span class="p">(</span><span class="n">config</span><span class="o">-</span><span class="k">if</span><span class="p">)</span><span class="c1"># end</span>
<span class="n">Switch</span><span class="c1">#show port address</span>
<span class="n">Secure</span> <span class="n">Mac</span> <span class="n">Address</span> <span class="n">Table</span>
<span class="o">------------------------------------------------------------------------</span>
<span class="n">Vlan</span>  <span class="n">Mac</span> <span class="n">Address</span>       <span class="n">Type</span>                   <span class="n">Ports</span>   <span class="n">Remaining</span> <span class="n">Age</span>

                                                              <span class="p">(</span><span class="n">mins</span><span class="p">)</span>
<span class="o">----</span>  <span class="o">-----------</span>       <span class="o">----</span>                    <span class="o">-----</span>   <span class="o">-------------</span>
<span class="mi">1</span>    <span class="mf">0000.0000</span><span class="o">.</span><span class="mi">0001</span>    <span class="n">SecureSticky</span>             <span class="n">Fa5</span><span class="o">/</span><span class="mi">1</span>        <span class="o">-</span>
<span class="mi">1</span>    <span class="mf">0000.0000</span><span class="o">.</span><span class="mi">0002</span>    <span class="n">SecureSticky</span>             <span class="n">Fa5</span><span class="o">/</span><span class="mi">1</span>        <span class="o">-</span>
<span class="mi">1</span>    <span class="mf">0000.0000</span><span class="o">.</span><span class="mi">0003</span>    <span class="n">SecureConfigured</span>         <span class="n">Fa5</span><span class="o">/</span><span class="mi">1</span>        <span class="o">-</span>


<span class="o">------------------------------------------------------------------------</span>
<span class="n">Total</span> <span class="n">Addresses</span> <span class="ow">in</span> <span class="n">System</span> <span class="p">(</span><span class="n">excluding</span> <span class="n">one</span> <span class="n">mac</span> <span class="n">per</span> <span class="n">port</span><span class="p">)</span>     <span class="p">:</span> <span class="mi">2</span>
<span class="n">Max</span> <span class="n">Addresses</span> <span class="n">limit</span> <span class="ow">in</span> <span class="n">System</span> <span class="p">(</span><span class="n">excluding</span> <span class="n">one</span> <span class="n">mac</span> <span class="n">per</span> <span class="n">port</span><span class="p">)</span> <span class="p">:</span> <span class="mi">10</span>
</pre></div>
</div>
</div>
<div class="section" id="port-security-aging">
<h5>Port security aging<a class="headerlink" href="#port-security-aging" title="Permalink to this headline">¶</a></h5>
<p>To set the aging time &amp; aging type for all secure addresses on a port</p>
<p>Use this to remove n add PCs on a secure port without deleting other secure MACs</p>
<p>To configure port security aging</p>
<div class="code highlight-default"><div class="highlight"><pre><span></span><span class="n">Switch</span><span class="p">(</span><span class="n">config</span><span class="p">)</span><span class="c1"># interface interface_id</span>
<span class="n">Switch</span><span class="p">(</span><span class="n">config</span><span class="o">-</span><span class="k">if</span><span class="p">)</span><span class="c1"># switchport port-security [ aging {static | time aging_time | type {absolute | inactivity} ]</span>

<span class="n">Switch</span><span class="p">(</span><span class="n">config</span><span class="p">)</span><span class="c1"># interface fastethernet 5/1</span>
<span class="n">Switch</span><span class="p">(</span><span class="n">config</span><span class="o">-</span><span class="k">if</span><span class="p">)</span><span class="c1"># switchport port-security aging time 120</span>
</pre></div>
</div>
<p>The <strong>static</strong> keyword enables aging for statically configured secure addresses on this port.</p>
<p>The <strong>time aging_time</strong> keyword specifies the aging time for this port. Valid range for aging_time is from 0 to 1440 minutes. If the time is equal to 0, aging is disabled for this port.</p>
<p>The <strong>type</strong> keyword sets the aging type as <strong>absolute or inactive</strong>. For absolute aging, all the secure addresses on this port ago out exactly after the time (minutes) specified and are removed from the secure address list. For inactive aging, the secure addresses on this port ago out only if there is no data traffic from the secure source address for the specified time period.</p>
<p>Verify</p>
<div class="code highlight-default"><div class="highlight"><pre><span></span><span class="n">Switch</span><span class="c1"># show port security [interface interface_id] [address]</span>

<span class="n">To</span> <span class="n">disable</span> <span class="n">port</span> <span class="n">security</span> <span class="n">aging</span> <span class="k">for</span> <span class="nb">all</span> <span class="n">secure</span> <span class="n">addresses</span> <span class="n">on</span> <span class="n">a</span> <span class="n">port</span><span class="p">:</span>
<span class="n">Switch</span><span class="c1"># no switchport port-security aging time</span>
</pre></div>
</div>
<div class="code highlight-default"><div class="highlight"><pre><span></span><span class="n">This</span> <span class="n">example</span> <span class="n">displays</span> <span class="n">output</span> <span class="kn">from</span> <span class="nn">the</span> <span class="n">show</span> <span class="n">port</span><span class="o">-</span><span class="n">security</span> <span class="n">command</span> <span class="n">when</span> <span class="n">you</span> <span class="n">do</span> <span class="ow">not</span> <span class="n">enter</span> <span class="n">an</span> <span class="n">interface</span><span class="p">:</span>

<span class="n">Switch</span><span class="c1"># show port-security</span>

<span class="n">Secure</span> <span class="n">Port</span>  <span class="n">MaxSecureAddr</span>  <span class="n">CurrentAddr</span>  <span class="n">SecurityViolation</span>  <span class="n">Security</span> <span class="n">Action</span>
                <span class="p">(</span><span class="n">Count</span><span class="p">)</span>       <span class="p">(</span><span class="n">Count</span><span class="p">)</span>          <span class="p">(</span><span class="n">Count</span><span class="p">)</span>
<span class="o">---------------------------------------------------------------------------</span>
      <span class="n">Fa3</span><span class="o">/</span><span class="mi">1</span>              <span class="mi">2</span>            <span class="mi">2</span>                  <span class="mi">0</span>         <span class="n">Restrict</span>
      <span class="n">Fa3</span><span class="o">/</span><span class="mi">2</span>              <span class="mi">2</span>            <span class="mi">2</span>                  <span class="mi">0</span>         <span class="n">Restrict</span>
      <span class="n">Fa3</span><span class="o">/</span><span class="mi">3</span>              <span class="mi">2</span>            <span class="mi">2</span>                  <span class="mi">0</span>         <span class="n">Shutdown</span>
      <span class="n">Fa3</span><span class="o">/</span><span class="mi">4</span>              <span class="mi">2</span>            <span class="mi">2</span>                  <span class="mi">0</span>         <span class="n">Shutdown</span>
      <span class="n">Fa3</span><span class="o">/</span><span class="mi">5</span>              <span class="mi">2</span>            <span class="mi">2</span>                  <span class="mi">0</span>         <span class="n">Shutdown</span>
      <span class="n">Fa3</span><span class="o">/</span><span class="mi">6</span>              <span class="mi">2</span>            <span class="mi">2</span>                  <span class="mi">0</span>         <span class="n">Shutdown</span>
      <span class="n">Fa3</span><span class="o">/</span><span class="mi">7</span>              <span class="mi">2</span>            <span class="mi">2</span>                  <span class="mi">0</span>         <span class="n">Shutdown</span>
      <span class="n">Fa3</span><span class="o">/</span><span class="mi">8</span>              <span class="mi">2</span>            <span class="mi">2</span>                  <span class="mi">0</span>         <span class="n">Shutdown</span>
     <span class="n">Fa3</span><span class="o">/</span><span class="mi">10</span>              <span class="mi">1</span>            <span class="mi">0</span>                  <span class="mi">0</span>         <span class="n">Shutdown</span>
     <span class="n">Fa3</span><span class="o">/</span><span class="mi">11</span>              <span class="mi">1</span>            <span class="mi">0</span>                  <span class="mi">0</span>         <span class="n">Shutdown</span>
     <span class="n">Fa3</span><span class="o">/</span><span class="mi">12</span>              <span class="mi">1</span>            <span class="mi">0</span>                  <span class="mi">0</span>         <span class="n">Restrict</span>
     <span class="n">Fa3</span><span class="o">/</span><span class="mi">13</span>              <span class="mi">1</span>            <span class="mi">0</span>                  <span class="mi">0</span>         <span class="n">Shutdown</span>
     <span class="n">Fa3</span><span class="o">/</span><span class="mi">14</span>              <span class="mi">1</span>            <span class="mi">0</span>                  <span class="mi">0</span>         <span class="n">Shutdown</span>
     <span class="n">Fa3</span><span class="o">/</span><span class="mi">15</span>              <span class="mi">1</span>            <span class="mi">0</span>                  <span class="mi">0</span>         <span class="n">Shutdown</span>
     <span class="n">Fa3</span><span class="o">/</span><span class="mi">16</span>              <span class="mi">1</span>            <span class="mi">0</span>                  <span class="mi">0</span>         <span class="n">Shutdown</span>
<span class="o">---------------------------------------------------------------------------</span>
<span class="n">Total</span> <span class="n">Addresses</span> <span class="ow">in</span> <span class="n">System</span> <span class="p">(</span><span class="n">excluding</span> <span class="n">one</span> <span class="n">mac</span> <span class="n">per</span> <span class="n">port</span><span class="p">)</span>     <span class="p">:</span><span class="mi">8</span>
<span class="n">Max</span> <span class="n">Addresses</span> <span class="n">limit</span> <span class="ow">in</span> <span class="n">System</span> <span class="p">(</span><span class="n">excluding</span> <span class="n">one</span> <span class="n">mac</span> <span class="n">per</span> <span class="n">port</span><span class="p">)</span> <span class="p">:</span><span class="mi">1024</span>
<span class="n">Global</span> <span class="n">SNMP</span> <span class="n">trap</span> <span class="n">control</span> <span class="k">for</span> <span class="n">port</span><span class="o">-</span><span class="n">security</span>                 <span class="p">:</span><span class="mi">20</span> <span class="p">(</span><span class="n">traps</span> <span class="n">per</span> <span class="n">second</span><span class="p">)</span>
</pre></div>
</div>
<p>This example displays output from the show port-security command for a specified interface:</p>
<div class="code highlight-default"><div class="highlight"><pre><span></span><span class="n">Switch</span><span class="c1"># show port-security interface fastethernet 5/1</span>
<span class="n">Port</span> <span class="n">Security</span>              <span class="p">:</span> <span class="n">Enabled</span>
<span class="n">Port</span> <span class="n">Status</span>                <span class="p">:</span> <span class="n">Secure</span><span class="o">-</span><span class="n">up</span>
<span class="n">Violation</span> <span class="n">Mode</span>             <span class="p">:</span> <span class="n">Shutdown</span>
<span class="n">Aging</span> <span class="n">Time</span>                 <span class="p">:</span> <span class="mi">0</span> <span class="n">mins</span>
<span class="n">Aging</span> <span class="n">Type</span>                 <span class="p">:</span> <span class="n">Absolute</span>
<span class="n">SecureStatic</span> <span class="n">Address</span> <span class="n">Aging</span> <span class="p">:</span> <span class="n">Disabled</span>
<span class="n">Maximum</span> <span class="n">MAC</span> <span class="n">Addresses</span>      <span class="p">:</span> <span class="mi">1</span>
<span class="n">Total</span> <span class="n">MAC</span> <span class="n">Addresses</span>        <span class="p">:</span> <span class="mi">1</span>
<span class="n">Configured</span> <span class="n">MAC</span> <span class="n">Addresses</span>   <span class="p">:</span> <span class="mi">0</span>
<span class="n">Sticky</span> <span class="n">MAC</span> <span class="n">Addresses</span>       <span class="p">:</span> <span class="mi">1</span>
<span class="n">Last</span> <span class="n">Source</span> <span class="n">Address</span>        <span class="p">:</span> <span class="mf">0000.0001</span><span class="o">.</span><span class="mi">001</span><span class="n">a</span>
<span class="n">Security</span> <span class="n">Violation</span> <span class="n">Count</span>   <span class="p">:</span> <span class="mi">0</span>
</pre></div>
</div>
<p>This example displays output from the show port-security address command:</p>
<div class="code highlight-default"><div class="highlight"><pre><span></span><span class="n">Switch</span><span class="c1">#sh port-security address</span>

          <span class="n">Secure</span> <span class="n">Mac</span> <span class="n">Address</span> <span class="n">Table</span>
<span class="o">-------------------------------------------------------------------</span>
<span class="n">Vlan</span>    <span class="n">Mac</span> <span class="n">Address</span>       <span class="n">Type</span>                <span class="n">Ports</span>   <span class="n">Remaining</span> <span class="n">Age</span>
                                                         <span class="p">(</span><span class="n">mins</span><span class="p">)</span>
<span class="o">----</span>    <span class="o">-----------</span>       <span class="o">----</span>                <span class="o">-----</span>   <span class="o">-------------</span>
   <span class="mi">1</span>    <span class="mf">0000.0001</span><span class="o">.</span><span class="mi">0000</span>    <span class="n">SecureConfigured</span>    <span class="n">Fa3</span><span class="o">/</span><span class="mi">1</span>       <span class="mi">15</span> <span class="p">(</span><span class="n">I</span><span class="p">)</span>
   <span class="mi">1</span>    <span class="mf">0000.0001</span><span class="o">.</span><span class="mi">0001</span>    <span class="n">SecureConfigured</span>    <span class="n">Fa3</span><span class="o">/</span><span class="mi">1</span>       <span class="mi">14</span> <span class="p">(</span><span class="n">I</span><span class="p">)</span>
   <span class="mi">1</span>    <span class="mf">0000.0001</span><span class="o">.</span><span class="mi">0100</span>    <span class="n">SecureConfigured</span>    <span class="n">Fa3</span><span class="o">/</span><span class="mi">2</span>        <span class="o">-</span>
   <span class="mi">1</span>    <span class="mf">0000.0001</span><span class="o">.</span><span class="mi">0101</span>    <span class="n">SecureConfigured</span>    <span class="n">Fa3</span><span class="o">/</span><span class="mi">2</span>        <span class="o">-</span>
   <span class="mi">1</span>    <span class="mf">0000.0001</span><span class="o">.</span><span class="mi">0200</span>    <span class="n">SecureConfigured</span>    <span class="n">Fa3</span><span class="o">/</span><span class="mi">3</span>        <span class="o">-</span>
   <span class="mi">1</span>    <span class="mf">0000.0001</span><span class="o">.</span><span class="mi">0201</span>    <span class="n">SecureConfigured</span>    <span class="n">Fa3</span><span class="o">/</span><span class="mi">3</span>        <span class="o">-</span>
   <span class="mi">1</span>    <span class="mf">0000.0001</span><span class="o">.</span><span class="mi">0300</span>    <span class="n">SecureConfigured</span>    <span class="n">Fa3</span><span class="o">/</span><span class="mi">4</span>        <span class="o">-</span>
   <span class="mi">1</span>    <span class="mf">0000.0001</span><span class="o">.</span><span class="mi">0301</span>    <span class="n">SecureConfigured</span>    <span class="n">Fa3</span><span class="o">/</span><span class="mi">4</span>        <span class="o">-</span>
   <span class="mi">1</span>    <span class="mf">0000.0001</span><span class="o">.</span><span class="mi">1000</span>    <span class="n">SecureDynamic</span>    <span class="n">Fa3</span><span class="o">/</span><span class="mi">5</span>        <span class="o">-</span>
   <span class="mi">1</span>    <span class="mf">0000.0001</span><span class="o">.</span><span class="mi">1001</span>    <span class="n">SecureDynamic</span>    <span class="n">Fa3</span><span class="o">/</span><span class="mi">5</span>        <span class="o">-</span>
   <span class="mi">1</span>    <span class="mf">0000.0001</span><span class="o">.</span><span class="mi">1100</span>    <span class="n">SecureDynamic</span>    <span class="n">Fa3</span><span class="o">/</span><span class="mi">6</span>        <span class="o">-</span>
   <span class="mi">1</span>    <span class="mf">0000.0001</span><span class="o">.</span><span class="mi">1101</span>    <span class="n">SecureDynamic</span>    <span class="n">Fa3</span><span class="o">/</span><span class="mi">6</span>        <span class="o">-</span>
   <span class="mi">1</span>    <span class="mf">0000.0001</span><span class="o">.</span><span class="mi">1200</span>    <span class="n">SecureSticky</span>    <span class="n">Fa3</span><span class="o">/</span><span class="mi">7</span>        <span class="o">-</span>
   <span class="mi">1</span>    <span class="mf">0000.0001</span><span class="o">.</span><span class="mi">1201</span>    <span class="n">SecureSticky</span>    <span class="n">Fa3</span><span class="o">/</span><span class="mi">7</span>        <span class="o">-</span>
   <span class="mi">1</span>    <span class="mf">0000.0001</span><span class="o">.</span><span class="mi">1300</span>    <span class="n">SecureSticky</span>    <span class="n">Fa3</span><span class="o">/</span><span class="mi">8</span>        <span class="o">-</span>
   <span class="mi">1</span>    <span class="mf">0000.0001</span><span class="o">.</span><span class="mi">1301</span>    <span class="n">SecureSticky</span>    <span class="n">Fa3</span><span class="o">/</span><span class="mi">8</span>        <span class="o">-</span>
<span class="o">-------------------------------------------------------------------</span>
<span class="n">Total</span> <span class="n">Addresses</span> <span class="ow">in</span> <span class="n">System</span> <span class="p">(</span><span class="n">excluding</span> <span class="n">one</span> <span class="n">mac</span> <span class="n">per</span> <span class="n">port</span><span class="p">)</span>     <span class="p">:</span><span class="mi">8</span>
<span class="n">Max</span> <span class="n">Addresses</span> <span class="n">limit</span> <span class="ow">in</span> <span class="n">System</span> <span class="p">(</span><span class="n">excluding</span> <span class="n">one</span> <span class="n">mac</span> <span class="n">per</span> <span class="n">port</span><span class="p">)</span> <span class="p">:</span><span class="mi">1024</span>
</pre></div>
</div>
<p>Check if ports in Error disabled state</p>
<p><code class="docutils literal"><span class="pre">S1#</span> <span class="pre">show</span> <span class="pre">interface</span> <span class="pre">fa0/18</span> <span class="pre">status</span></code>
<code class="docutils literal"><span class="pre">S1#</span> <span class="pre">show</span> <span class="pre">port-security</span> <span class="pre">interface</span> <span class="pre">fastethernet</span> <span class="pre">0/18</span></code></p>
</div>
<div class="section" id="example-exercise">
<h5>example exercise<a class="headerlink" href="#example-exercise" title="Permalink to this headline">¶</a></h5>
<p>Requirements</p>
<dl class="docutils">
<dt>· Configure S1 with the following initial settings:</dt>
<dd><ul class="first last simple">
<li>Hostname</li>
<li>Banner that includes the word warning</li>
<li>Console port login and password cisco</li>
<li>Encrypted enable password of class</li>
<li>Encrypt plain text passwords</li>
<li>Management interface addressing</li>
</ul>
</dd>
<dt>· Configure SSH to secure remote access with the following settings:</dt>
<dd><ul class="first last simple">
<li>Domain name of cisco.com</li>
<li>RSA key-pair parameters to support SSH version 2</li>
<li>Set SSH version 2</li>
<li>User admin with secret password ccna</li>
<li>VTY lines only accept SSH connections and use local login for authentication</li>
</ul>
</dd>
<dt>· Configure the port security feature to restrict network access:</dt>
<dd><ul class="first last simple">
<li>Disable all unused ports.</li>
<li>Set the interface mode to access.</li>
<li>Enable port security to allow only two hosts per port.</li>
<li>Record the MAC address in the running configuration.</li>
<li>Ensure that port violations disable ports.</li>
</ul>
</dd>
</dl>
<div class="code highlight-default"><div class="highlight"><pre><span></span><span class="n">S1</span><span class="c1">#show port-security interface ?</span>
  <span class="n">Ethernet</span>         <span class="n">IEEE</span> <span class="mf">802.3</span>
  <span class="n">FastEthernet</span>     <span class="n">FastEthernet</span> <span class="n">IEEE</span> <span class="mf">802.3</span>
  <span class="n">GigabitEthernet</span>  <span class="n">GigabitEthernet</span> <span class="n">IEEE</span> <span class="mf">802.3</span><span class="n">z</span>

<span class="n">S1</span><span class="c1">#show port-security interface FastEthernet 0/1</span>
<span class="n">Port</span> <span class="n">Security</span>              <span class="p">:</span> <span class="n">Enabled</span>
<span class="n">Port</span> <span class="n">Status</span>                <span class="p">:</span> <span class="n">Secure</span><span class="o">-</span><span class="n">up</span>
<span class="n">Violation</span> <span class="n">Mode</span>             <span class="p">:</span> <span class="n">Shutdown</span>
<span class="n">Aging</span> <span class="n">Time</span>                 <span class="p">:</span> <span class="mi">0</span> <span class="n">mins</span>
<span class="n">Aging</span> <span class="n">Type</span>                 <span class="p">:</span> <span class="n">Absolute</span>
<span class="n">SecureStatic</span> <span class="n">Address</span> <span class="n">Aging</span> <span class="p">:</span> <span class="n">Disabled</span>
<span class="n">Maximum</span> <span class="n">MAC</span> <span class="n">Addresses</span>      <span class="p">:</span> <span class="mi">2</span>
<span class="n">Total</span> <span class="n">MAC</span> <span class="n">Addresses</span>        <span class="p">:</span> <span class="mi">0</span>
<span class="n">Configured</span> <span class="n">MAC</span> <span class="n">Addresses</span>   <span class="p">:</span> <span class="mi">0</span>
<span class="n">Sticky</span> <span class="n">MAC</span> <span class="n">Addresses</span>       <span class="p">:</span> <span class="mi">0</span>
<span class="n">Last</span> <span class="n">Source</span> <span class="n">Address</span><span class="p">:</span><span class="n">Vlan</span>   <span class="p">:</span> <span class="mf">0000.0000</span><span class="o">.</span><span class="mi">0000</span><span class="p">:</span><span class="mi">0</span>
<span class="n">Security</span> <span class="n">Violation</span> <span class="n">Count</span>   <span class="p">:</span> <span class="mi">0</span>

<span class="n">S1</span><span class="c1">#show port-security ?</span>
  <span class="n">address</span>    <span class="n">Show</span> <span class="n">secure</span> <span class="n">address</span>
  <span class="n">interface</span>  <span class="n">Show</span> <span class="n">secure</span> <span class="n">interface</span>
  <span class="o">&lt;</span><span class="n">cr</span><span class="o">&gt;</span>
<span class="n">S1</span><span class="c1">#show port-security address</span>
                     <span class="n">Secure</span> <span class="n">Mac</span> <span class="n">Address</span> <span class="n">Table</span>
<span class="o">-------------------------------------------------------------------------------</span>
<span class="n">Vlan</span> <span class="n">Mac</span> <span class="n">Address</span>     <span class="n">Type</span>                    <span class="n">Ports</span>           <span class="n">Remaining</span> <span class="n">Age</span>
                                                             <span class="p">(</span><span class="n">mins</span><span class="p">)</span>
<span class="o">----</span> <span class="o">-----------</span>     <span class="o">----</span>                    <span class="o">-----</span>           <span class="o">-------------</span>
<span class="o">------------------------------------------------------------------------------</span>
<span class="n">Total</span> <span class="n">Addresses</span> <span class="ow">in</span> <span class="n">System</span> <span class="p">(</span><span class="n">excluding</span> <span class="n">one</span> <span class="n">mac</span> <span class="n">per</span> <span class="n">port</span><span class="p">)</span>     <span class="p">:</span> <span class="mi">0</span>
<span class="n">Max</span> <span class="n">Addresses</span> <span class="n">limit</span> <span class="ow">in</span> <span class="n">System</span> <span class="p">(</span><span class="n">excluding</span> <span class="n">one</span> <span class="n">mac</span> <span class="n">per</span> <span class="n">port</span><span class="p">)</span> <span class="p">:</span> <span class="mi">1024</span>
<span class="n">S1</span><span class="c1">#show ip ?</span>
  <span class="n">access</span><span class="o">-</span><span class="n">lists</span>  <span class="n">List</span> <span class="n">access</span> <span class="n">lists</span>
  <span class="n">arp</span>           <span class="n">IP</span> <span class="n">ARP</span> <span class="n">table</span>
  <span class="n">dhcp</span>          <span class="n">Show</span> <span class="n">items</span> <span class="ow">in</span> <span class="n">the</span> <span class="n">DHCP</span> <span class="n">database</span>
  <span class="n">interface</span>     <span class="n">IP</span> <span class="n">interface</span> <span class="n">status</span> <span class="ow">and</span> <span class="n">configuration</span>
  <span class="n">ssh</span>           <span class="n">Information</span> <span class="n">on</span> <span class="n">SSH</span>

<span class="n">S1</span><span class="c1">#show interface FastEthernet0/1</span>
<span class="n">FastEthernet0</span><span class="o">/</span><span class="mi">1</span> <span class="ow">is</span> <span class="n">up</span><span class="p">,</span> <span class="n">line</span> <span class="n">protocol</span> <span class="ow">is</span> <span class="n">up</span> <span class="p">(</span><span class="n">connected</span><span class="p">)</span>
  <span class="n">Hardware</span> <span class="ow">is</span> <span class="n">Lance</span><span class="p">,</span> <span class="n">address</span> <span class="ow">is</span> <span class="mi">00</span><span class="n">d0</span><span class="o">.</span><span class="n">bc57</span><span class="o">.</span><span class="mi">1001</span> <span class="p">(</span><span class="n">bia</span> <span class="mi">00</span><span class="n">d0</span><span class="o">.</span><span class="n">bc57</span><span class="o">.</span><span class="mi">1001</span><span class="p">)</span>
 <span class="n">BW</span> <span class="mi">100000</span> <span class="n">Kbit</span><span class="p">,</span> <span class="n">DLY</span> <span class="mi">1000</span> <span class="n">usec</span><span class="p">,</span>
     <span class="n">reliability</span> <span class="mi">255</span><span class="o">/</span><span class="mi">255</span><span class="p">,</span> <span class="n">txload</span> <span class="mi">1</span><span class="o">/</span><span class="mi">255</span><span class="p">,</span> <span class="n">rxload</span> <span class="mi">1</span><span class="o">/</span><span class="mi">255</span>
  <span class="n">Encapsulation</span> <span class="n">ARPA</span><span class="p">,</span> <span class="n">loopback</span> <span class="ow">not</span> <span class="nb">set</span>
  <span class="n">Keepalive</span> <span class="nb">set</span> <span class="p">(</span><span class="mi">10</span> <span class="n">sec</span><span class="p">)</span>
  <span class="n">Full</span><span class="o">-</span><span class="n">duplex</span><span class="p">,</span> <span class="mi">100</span><span class="n">Mb</span><span class="o">/</span><span class="n">s</span>
  <span class="nb">input</span> <span class="n">flow</span><span class="o">-</span><span class="n">control</span> <span class="ow">is</span> <span class="n">off</span><span class="p">,</span> <span class="n">output</span> <span class="n">flow</span><span class="o">-</span><span class="n">control</span> <span class="ow">is</span> <span class="n">off</span>
  <span class="n">ARP</span> <span class="nb">type</span><span class="p">:</span> <span class="n">ARPA</span><span class="p">,</span> <span class="n">ARP</span> <span class="n">Timeout</span> <span class="mi">04</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span>
  <span class="n">Last</span> <span class="nb">input</span> <span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">08</span><span class="p">,</span> <span class="n">output</span> <span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">05</span><span class="p">,</span> <span class="n">output</span> <span class="n">hang</span> <span class="n">never</span>
  <span class="n">Last</span> <span class="n">clearing</span> <span class="n">of</span> <span class="s2">&quot;show interface&quot;</span> <span class="n">counters</span> <span class="n">never</span>
  <span class="n">Input</span> <span class="n">queue</span><span class="p">:</span> <span class="mi">0</span><span class="o">/</span><span class="mi">75</span><span class="o">/</span><span class="mi">0</span><span class="o">/</span><span class="mi">0</span> <span class="p">(</span><span class="n">size</span><span class="o">/</span><span class="nb">max</span><span class="o">/</span><span class="n">drops</span><span class="o">/</span><span class="n">flushes</span><span class="p">);</span> <span class="n">Total</span> <span class="n">output</span> <span class="n">drops</span><span class="p">:</span> <span class="mi">0</span>
  <span class="n">Queueing</span> <span class="n">strategy</span><span class="p">:</span> <span class="n">fifo</span>
  <span class="n">Output</span> <span class="n">queue</span> <span class="p">:</span><span class="mi">0</span><span class="o">/</span><span class="mi">40</span> <span class="p">(</span><span class="n">size</span><span class="o">/</span><span class="nb">max</span><span class="p">)</span>
  <span class="mi">5</span> <span class="n">minute</span> <span class="nb">input</span> <span class="n">rate</span> <span class="mi">0</span> <span class="n">bits</span><span class="o">/</span><span class="n">sec</span><span class="p">,</span> <span class="mi">0</span> <span class="n">packets</span><span class="o">/</span><span class="n">sec</span>
  <span class="mi">5</span> <span class="n">minute</span> <span class="n">output</span> <span class="n">rate</span> <span class="mi">0</span> <span class="n">bits</span><span class="o">/</span><span class="n">sec</span><span class="p">,</span> <span class="mi">0</span> <span class="n">packets</span><span class="o">/</span><span class="n">sec</span>
     <span class="mi">956</span> <span class="n">packets</span> <span class="nb">input</span><span class="p">,</span> <span class="mi">193351</span> <span class="nb">bytes</span><span class="p">,</span> <span class="mi">0</span> <span class="n">no</span> <span class="n">buffer</span>
     <span class="n">Received</span> <span class="mi">956</span> <span class="n">broadcasts</span><span class="p">,</span> <span class="mi">0</span> <span class="n">runts</span><span class="p">,</span> <span class="mi">0</span> <span class="n">giants</span><span class="p">,</span> <span class="mi">0</span> <span class="n">throttles</span>
     <span class="mi">0</span> <span class="nb">input</span> <span class="n">errors</span><span class="p">,</span> <span class="mi">0</span> <span class="n">CRC</span><span class="p">,</span> <span class="mi">0</span> <span class="n">frame</span><span class="p">,</span> <span class="mi">0</span> <span class="n">overrun</span><span class="p">,</span> <span class="mi">0</span> <span class="n">ignored</span><span class="p">,</span> <span class="mi">0</span> <span class="n">abort</span>
     <span class="mi">0</span> <span class="n">watchdog</span><span class="p">,</span> <span class="mi">0</span> <span class="n">multicast</span><span class="p">,</span> <span class="mi">0</span> <span class="n">pause</span> <span class="nb">input</span>
     <span class="mi">0</span> <span class="nb">input</span> <span class="n">packets</span> <span class="k">with</span> <span class="n">dribble</span> <span class="n">condition</span> <span class="n">detected</span>
     <span class="mi">2357</span> <span class="n">packets</span> <span class="n">output</span><span class="p">,</span> <span class="mi">263570</span> <span class="nb">bytes</span><span class="p">,</span> <span class="mi">0</span> <span class="n">underruns</span>
     <span class="mi">0</span> <span class="n">output</span> <span class="n">errors</span><span class="p">,</span> <span class="mi">0</span> <span class="n">collisions</span><span class="p">,</span> <span class="mi">10</span> <span class="n">interface</span> <span class="n">resets</span>
     <span class="mi">0</span> <span class="n">babbles</span><span class="p">,</span> <span class="mi">0</span> <span class="n">late</span> <span class="n">collision</span><span class="p">,</span> <span class="mi">0</span> <span class="n">deferred</span>
     <span class="mi">0</span> <span class="n">lost</span> <span class="n">carrier</span><span class="p">,</span> <span class="mi">0</span> <span class="n">no</span> <span class="n">carrier</span>
     <span class="mi">0</span> <span class="n">output</span> <span class="n">buffer</span> <span class="n">failures</span><span class="p">,</span> <span class="mi">0</span> <span class="n">output</span> <span class="n">buffers</span> <span class="n">swapped</span> <span class="n">out</span>

<span class="n">S1</span><span class="c1">#show port-security interface FastEthernet 0/1</span>
<span class="n">Port</span> <span class="n">Security</span>              <span class="p">:</span> <span class="n">Enabled</span>
<span class="n">Port</span> <span class="n">Status</span>                <span class="p">:</span> <span class="n">Secure</span><span class="o">-</span><span class="n">up</span>
<span class="n">Violation</span> <span class="n">Mode</span>             <span class="p">:</span> <span class="n">Shutdown</span>
<span class="n">Aging</span> <span class="n">Time</span>                 <span class="p">:</span> <span class="mi">0</span> <span class="n">mins</span>
<span class="n">Aging</span> <span class="n">Type</span>                 <span class="p">:</span> <span class="n">Absolute</span>
<span class="n">SecureStatic</span> <span class="n">Address</span> <span class="n">Aging</span> <span class="p">:</span> <span class="n">Disabled</span>
<span class="n">Maximum</span> <span class="n">MAC</span> <span class="n">Addresses</span>      <span class="p">:</span> <span class="mi">2</span>
<span class="n">Total</span> <span class="n">MAC</span> <span class="n">Addresses</span>        <span class="p">:</span> <span class="mi">0</span>
<span class="n">Configured</span> <span class="n">MAC</span> <span class="n">Addresses</span>   <span class="p">:</span> <span class="mi">0</span>
<span class="n">Sticky</span> <span class="n">MAC</span> <span class="n">Addresses</span>       <span class="p">:</span> <span class="mi">0</span>
<span class="n">Last</span> <span class="n">Source</span> <span class="n">Address</span><span class="p">:</span><span class="n">Vlan</span>   <span class="p">:</span> <span class="mf">0000.0000</span><span class="o">.</span><span class="mi">0000</span><span class="p">:</span><span class="mi">0</span>
<span class="n">Security</span> <span class="n">Violation</span> <span class="n">Count</span>   <span class="p">:</span> <span class="mi">0</span>

<span class="n">S1</span><span class="c1">#show port-security interface FastEthernet 0/2</span>
<span class="n">Port</span> <span class="n">Security</span>              <span class="p">:</span> <span class="n">Enabled</span>
<span class="n">Port</span> <span class="n">Status</span>                <span class="p">:</span> <span class="n">Secure</span><span class="o">-</span><span class="n">up</span>
<span class="n">Violation</span> <span class="n">Mode</span>             <span class="p">:</span> <span class="n">Shutdown</span>
<span class="n">Aging</span> <span class="n">Time</span>                 <span class="p">:</span> <span class="mi">0</span> <span class="n">mins</span>
<span class="n">Aging</span> <span class="n">Type</span>                 <span class="p">:</span> <span class="n">Absolute</span>
<span class="n">SecureStatic</span> <span class="n">Address</span> <span class="n">Aging</span> <span class="p">:</span> <span class="n">Disabled</span>
<span class="n">Maximum</span> <span class="n">MAC</span> <span class="n">Addresses</span>      <span class="p">:</span> <span class="mi">2</span>
<span class="n">Total</span> <span class="n">MAC</span> <span class="n">Addresses</span>        <span class="p">:</span> <span class="mi">0</span>
<span class="n">Configured</span> <span class="n">MAC</span> <span class="n">Addresses</span>   <span class="p">:</span> <span class="mi">0</span>
<span class="n">Sticky</span> <span class="n">MAC</span> <span class="n">Addresses</span>       <span class="p">:</span> <span class="mi">0</span>
<span class="n">Last</span> <span class="n">Source</span> <span class="n">Address</span><span class="p">:</span><span class="n">Vlan</span>   <span class="p">:</span> <span class="mf">0000.0000</span><span class="o">.</span><span class="mi">0000</span><span class="p">:</span><span class="mi">0</span>
<span class="n">Security</span> <span class="n">Violation</span> <span class="n">Count</span>   <span class="p">:</span> <span class="mi">0</span>

<span class="n">S1</span><span class="c1">#show port-security</span>
<span class="n">Secure</span> <span class="n">Port</span> <span class="n">MaxSecureAddr</span> <span class="n">CurrentAddr</span> <span class="n">SecurityViolation</span> <span class="n">Security</span> <span class="n">Action</span>
               <span class="p">(</span><span class="n">Count</span><span class="p">)</span>       <span class="p">(</span><span class="n">Count</span><span class="p">)</span>        <span class="p">(</span><span class="n">Count</span><span class="p">)</span>
<span class="o">--------------------------------------------------------------------</span>
        <span class="n">Fa0</span><span class="o">/</span><span class="mi">1</span>        <span class="mi">2</span>          <span class="mi">0</span>                 <span class="mi">0</span>         <span class="n">Shutdown</span>
        <span class="n">Fa0</span><span class="o">/</span><span class="mi">2</span>        <span class="mi">2</span>          <span class="mi">0</span>                 <span class="mi">0</span>         <span class="n">Shutdown</span>
<span class="o">----------------------------------------------------------------------</span>
</pre></div>
</div>
<p>There are 10 best practices that represent the best insurance for a network:</p>
<ol class="arabic simple">
<li>Develop a written security policy for the organization.</li>
<li>Shut down unused services and ports.</li>
<li>Use strong passwords and change them often.</li>
<li>Control physical access to devices.</li>
<li>Avoid using standard insecure HTTP websites, especially for login screens. Instead use the more secure HTTPS.</li>
<li>Perform backups and test the backed up files on a regular basis.</li>
<li>Educate employees about social engineering attacks, and develop policies to validate identities over the phone, via email, and in person.</li>
<li>Encrypt sensitive data and protect it with a strong password.</li>
<li>Implement security hardware and software, such as firewalls.</li>
<li>Keep IOS software up-to-date by installing security patches weekly or daily, if possible.</li>
</ol>
</div>
</div>
</div>
<div class="section" id="chapter-6-vlans">
<h3>Chapter 6 VLANS<a class="headerlink" href="#chapter-6-vlans" title="Permalink to this headline">¶</a></h3>
<p>One of the technologies used to improve network performance is the separation of large broadcast domains into smaller ones.</p>
<p>The role of providing access into a LAN is normally reserved for an access layer switch. A virtual local area network (VLAN) can be created on a Layer 2 switch to reduce the size of broadcast domains, similar to a Layer 3 device. VLANs are commonly incorporated into network design making it easier for a network to support the goals of an organization. While VLANs are primarily used within switched local area networks, modern implementations of VLANs allow them to span MANs and WANs.</p>
<p>Because VLANs segment the network, a Layer 3 process is required to allow traffic to move from one network segment to another.</p>
<p>This Layer 3 routing process can either be implemented using a router or a Layer 3 switch interface. The use of a Layer 3 device provides a method for controlling the flow of traffic between network segments, including network segments created by VLANs.</p>
<p>The first part of this chapter will cover how to configure, manage, and troubleshoot VLANs and VLAN trunks. The second part of this chapter focuses on implementing inter-VLAN routing using a router. Inter-VLAN routing on a Layer 3 switch is covered in a later course.</p>
<p>Packets destined for devices that do not belong to the VLAN must be forwarded through a device that supports routing.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">A VLAN creates a logical broadcast domain that can span multiple physical LAN segments. VLANs improve network performance by separating large broadcast domains into smaller ones. If a device in one VLAN sends a broadcast Ethernet frame, all devices in the VLAN receive the frame, but devices in other VLANs do not.</p>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">VLANs enable the implementation of access and security policies according to specific groupings of users. Each switch port can be assigned to only one VLAN (with the exception of a port connected to an IP phone or to another switch).</p>
</div>
<div class="section" id="vlan-benefits">
<h4>VLAN Benefits<a class="headerlink" href="#vlan-benefits" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li><dl class="first docutils">
<dt>Improved Security:</dt>
<dd>Groups that have sensitive data are separated from the rest of the network</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Reduced Cost:</dt>
<dd>Reduced need for expensive network upgrades and more efficient use of existing bandwidth and uplinks</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Better Performance:</dt>
<dd>Dividing L2 networks into multiple logical workgroups (broadcast domains) reduces unnecessary traffic</dd>
</dl>
</li>
<li>Smaller Broadcast Domains</li>
<li><dl class="first docutils">
<dt>IT Efficiency:</dt>
<dd>VLANs make it easier to manage the network because users with similar network requirements share the same VLAN. When a new switch is provisioned, all the policies and procedures already configured for the particular VLAN are implemented when the ports are assigned. It is also easy for the IT staff to identify the function of a VLAN by giving it an appropriate name</dd>
</dl>
</li>
<li>Management Efficiency</li>
<li>Simpler Project and Application Management: VLANs aggregate users and network devices to support business or geographic requirements. Having separate functions makes managing a project or working with a specialized application easier; an example of such an application is an e-learning development platform for faculty.</li>
</ul>
<p>Each VLAN in a switched network corresponds to an IP network. Therefore, VLAN design must take into consideration the implementation of a hierarchical network-addressing scheme. Hierarchical network addressing means that IP network numbers are applied to network segments or VLANs in an orderly fashion that takes the network as a whole into consideration.</p>
</div>
<div class="section" id="vlan-types">
<h4>VLAN Types<a class="headerlink" href="#vlan-types" title="Permalink to this headline">¶</a></h4>
<dl class="docutils">
<dt>Data VLAN:</dt>
<dd>for user generated traffic aka user VLAN. Used to seperate the network into groups of users or devices</dd>
<dt>Default VLAN:</dt>
<dd>All switch ports become part of it after initial boot. VLAN 1. View with <code class="docutils literal"><span class="pre">show</span> <span class="pre">vlan</span> <span class="pre">brief</span></code>. VLAN 2 cannot be renamed or deleted</dd>
<dt>Native VLAN:</dt>
<dd>Assigned to an 802.1Q trunk port (links between switches) that supports VLAN tagged traffic &amp; untagged traffic. Tagged means there is a <strong>4-byte</strong> tag inserted in original Ethernet frame header. The 802.1Q trunk port places untagged traffic on the native VLAN, that is <strong>VLAN 1 by default</strong>. It is a best practice to configure the native VLAN as an unused VLAN, distinct from VLAN 1 and other VLANs</dd>
<dt>Management VLAN:</dt>
<dd>VLAN configured to access the management capabilities of a switch. VLAN 1 is the management VLAN by default. To create the management VLAN, the switch virtual interface (SVI) of that VLAN is assigned an IP address and a subnet mask, allowing the switch to be managed via HTTP, Telnet, SSH, or SNMP.</dd>
</dl>
</div>
<div class="section" id="voice-vlans">
<h4>Voice VLANs<a class="headerlink" href="#voice-vlans" title="Permalink to this headline">¶</a></h4>
<p>VoIP traffic requires:</p>
<ul class="simple">
<li>Assured bandwidth to ensure voice quality</li>
<li>Transmission priority over other types of network traffic</li>
<li>Ability to be routed around congested areas on the network</li>
<li>Delay of less than 150 ms across the network</li>
</ul>
<p>To meet these requirements, the entire network has to be designed to support VoIP.</p>
<img alt="_images/voice_vlans.png" src="_images/voice_vlans.png" />
</div>
<div class="section" id="vlan-trunks">
<h4>VLAN Trunks<a class="headerlink" href="#vlan-trunks" title="Permalink to this headline">¶</a></h4>
<p>A trunk is a point-to-point link between 2 network devices dat carries more than one VLAN. It extends VLANS across an entire network. This way no router is needed.</p>
<p>A trunk does not belong to a specific VLAN, it is a conduit for multiple VLANS between switches and routers. A trunk can also be used between a NW device and server or other device that is equiped with an 802.1Q capable NIC</p>
<img alt="_images/vlan_trunks.png" src="_images/vlan_trunks.png" />
</div>
<div class="section" id="q-frame">
<h4>802.1Q Frame<a class="headerlink" href="#q-frame" title="Permalink to this headline">¶</a></h4>
<img alt="_images/802.1Q_frame.png" src="_images/802.1Q_frame.png" />
<p>When the switch receives a frame on a port configured in access mode and assigned a VLAN, the switch inserts a VLAN tag in the frame header, recalculates the Frame Check Sequence (FCS), and sends the tagged frame out of a trunk port.</p>
<div class="section" id="vlan-tag-field-details">
<h5>VLAN Tag Field Details<a class="headerlink" href="#vlan-tag-field-details" title="Permalink to this headline">¶</a></h5>
<dl class="docutils">
<dt>The VLAN tag field consists of a Type field, a Priority field, a Canonical Format Identifier field, and VLAN ID field:</dt>
<dd><ul class="first last simple">
<li><strong>Type</strong> - A 2-byte value called the tag protocol ID (TPID) value. For Ethernet, it is set to hexadecimal 0x8100.</li>
<li><strong>User priority</strong> - A 3-bit value that supports level or <strong>service implementation</strong>.</li>
<li><strong>Canonical Format Identifier</strong> (CFI) - A 1-bit identifier that <strong>enables Token Ring frames to be carried across Ethernet links</strong>.</li>
<li><strong>VLAN ID</strong> (VID) - A 12-bit VLAN identification number that supports up to 4096 VLAN IDs.</li>
</ul>
</dd>
</dl>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">After the switch inserts the Type and tag control information fields, it recalculates the FCS values and inserts the new FCS into the frame.</p>
</div>
</div>
</div>
<div class="section" id="native-vlans-802-1q-tagging">
<h4>Native VLANS &amp; 802.1Q Tagging<a class="headerlink" href="#native-vlans-802-1q-tagging" title="Permalink to this headline">¶</a></h4>
<div class="section" id="tagged-frames-on-the-native-vlan">
<h5>Tagged Frames on the Native VLAN<a class="headerlink" href="#tagged-frames-on-the-native-vlan" title="Permalink to this headline">¶</a></h5>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">If an 802.1Q trunk port receives a tagged frame with the VLAN ID that is the same as the native VLAN, it drops the frame.</p>
</div>
<p>Consequently, when configuring a switch port on a Cisco switch, configure devices so that they do not send tagged frames on the native VLAN. Devices from other vendors that support tagged frames on the native VLAN include IP phones, servers, routers, and non-Cisco switches.</p>
<p>This scenario reflects poor network design for several reasons: it uses a hub, it has a host connected to a trunk link, and it implies that the switches have access ports assigned to the native VLAN. It also illustrates the motivation for the IEEE 802.1Q specification for native VLANs as a means of handling legacy scenarios.</p>
<img alt="_images/trunkbehavior_nativevlans.png" src="_images/trunkbehavior_nativevlans.png" />
</div>
<div class="section" id="untagged-frames-on-the-native-vlan">
<h5>Untagged Frames on the Native VLAN<a class="headerlink" href="#untagged-frames-on-the-native-vlan" title="Permalink to this headline">¶</a></h5>
<p>When a Cisco switch trunk port receives untagged frames (which are unusual in a well-designed network), it forwards those frames to the native VLAN. If there are no devices associated with the native VLAN (which is not unusual) and there are no other trunk ports (which is not unusual), then the frame is dropped. The default native VLAN is VLAN 1. When configuring an 802.1Q trunk port, a default Port VLAN ID (PVID) is assigned the value of the native VLAN ID. All untagged traffic coming in or out of the 802.1Q port is forwarded based on the PVID value. For example, if VLAN 99 is configured as the native VLAN, the PVID is 99 and all untagged traffic is forwarded to VLAN 99. If the native VLAN has not been reconfigured, the PVID value is set to VLAN 1.</p>
</div>
</div>
<div class="section" id="voice-vlan-tagging">
<h4>Voice VLAN Tagging<a class="headerlink" href="#voice-vlan-tagging" title="Permalink to this headline">¶</a></h4>
<img alt="_images/voice_vlan_tagging.png" src="_images/voice_vlan_tagging.png" />
<ul class="simple">
<li>Port 1 connects to the switch or other VoIP device.</li>
<li>Port 2 is an internal 10/100 interface that carries the IP phone traffic.</li>
<li>Port 3 (access port) connects to a PC or other device.</li>
</ul>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">An access port that is used to connect a Cisco IP phone can be configured to use two separate VLANs: one VLAN for voice traffic and another VLAN for data traffic from a device attached to the phone. The link between the switch and the IP phone acts as a trunk to carry both voice VLAN traffic and data VLAN traffic.</p>
</div>
<p>On the switch, the access is configured to send Cisco Discovery Protocol (CDP) packets that instruct an attached IP phone to send voice traffic to the switch in one of three ways, depending on the type of traffic:</p>
<ul class="simple">
<li>In a voice VLAN tagged with a Layer 2 class of service (CoS) priority value</li>
<li>In an access VLAN tagged with a Layer 2 CoS priority value</li>
<li>In an access VLAN, untagged (no Layer 2 CoS priority value)</li>
</ul>
</div>
<div class="section" id="q-tagging">
<h4>802.1Q tagging<a class="headerlink" href="#q-tagging" title="Permalink to this headline">¶</a></h4>
<table border="1" class="docutils">
<colgroup>
<col width="44%" />
<col width="19%" />
<col width="16%" />
<col width="21%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head" colspan="4">802.1Q tag format</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>16 bits</td>
<td>3 bits</td>
<td>1 bit</td>
<td>12 bits</td>
</tr>
<tr class="row-odd"><td rowspan="2">TPID</td>
<td colspan="3">TCI</td>
</tr>
<tr class="row-even"><td>PCP</td>
<td>DEI</td>
<td>VID</td>
</tr>
</tbody>
</table>
<ul>
<li><p class="first">Tag protocol identifier (TPID): a 16-bit field set to a value of 0x8100 in order to identify the frame as an IEEE 802.1Q-tagged frame. This field is located at the same position as the EtherType/length field in untagged frames, and is thus used to distinguish the frame from untagged frames.</p>
</li>
<li><dl class="first docutils">
<dt>Tag control information (TCI)</dt>
<dd><ul class="first simple">
<li>Priority code point (PCP): a 3-bit field which refers to the <a class="reference external" href="https://en.wikipedia.org/wiki/IEEE_802.1p">IEEE 802.1p</a> <a class="reference external" href="https://en.wikipedia.org/wiki/Class_of_service">class of service</a> and maps to the frame priority level. PCP values in order of priority are
* 1 (background)
* 0 (best effort, default)
* 2 (excellent effort)
* 3 (critical application)
* 4 (video)
* 5 (voice)
* 6 (internetwork control)
* 7 (network control)</li>
</ul>
<p class="last">These values can be used to prioritize different classes of traffic.
* Drop eligible indicator (DEI): a 1-bit field. (formerly CFI[b]) May be used separately or in conjunction with PCP to indicate frames eligible to be dropped in the presence of congestion.
* VLAN identifier (VID): a 12-bit field specifying the VLAN to which the frame belongs. The hexadecimal values of 0x000 and 0xFFF are reserved. All other values may be used as VLAN identifiers, allowing up to 4,094 VLANs. The reserved value 0x000 indicates that the frame does not carry a VLAN ID; in this case, the 802.1Q tag specifies only a priority and is referred to as a priority tag. On bridges, VID 0x001 (the default VLAN ID) is often reserved for a management VLAN; this is vendor-specific. The VID value 0xFFF is reserved for implementation use; it must not be configured or transmitted. 0xFFF can be used to indicate a wildcard match in management operations or filtering database entries.</p>
</dd>
</dl>
</li>
</ul>
<p>For frames using <a class="reference external" href="https://en.wikipedia.org/wiki/IEEE_802.2">IEEE 802.2</a>/<a class="reference external" href="https://en.wikipedia.org/wiki/Subnetwork_Access_Protocol">SNAP</a> encapsulation with an organizationally unique identifier (OUI) field of 00-00-00 (so that the protocol ID field in the SNAP header is an EtherType), as would be the case on LANs other than Ethernet, the EtherType value in the SNAP header is set to 0x8100 and the aforementioned extra 4 bytes are appended after the SNAP header.[citation needed]</p>
<p>Because inserting the VLAN tag changes the frame, 802.1Q encapsulation forces a recalculation of the original frame check sequence field in the Ethernet trailer.</p>
<p>The IEEE 802.3ac standard increased the maximum Ethernet frame size from 1518 bytes to 1522 bytes to accommodate the four-byte VLAN tag. Some network devices that do not support the larger frame size will process these frames successfully, but may report them as “baby giant” anomalies.</p>
<p>802.1ad_aka_QinQ <a href="#id1"><span class="problematic" id="id2">`https://en.wikipedia.org/wiki/IEEE_802.1ad`_</span></a></p>
</div>
</div>
</div>
</div>


           </div>
           <div class="articleComments">
            
           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="commands.html" class="btn btn-neutral float-right" title="BASH" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="index.html" class="btn btn-neutral" title="Welcome to REPLACE’s documentation!" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2017, Patrick Brunswyck.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'20170824',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>