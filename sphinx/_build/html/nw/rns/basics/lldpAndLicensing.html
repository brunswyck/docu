

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Device Discovery Management &amp; Maintenance &mdash; debian &amp; networking 20170824 documentation</title>
  

  
  
  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../../../_static/css/theme.css" type="text/css" />
  

  

  
        <link rel="index" title="Index"
              href="../../../genindex.html"/>
        <link rel="search" title="Search" href="../../../search.html"/>
    <link rel="top" title="debian &amp; networking 20170824 documentation" href="../../../index.html"/>
        <link rel="up" title="Routing/Switching" href="../routing_n_switching.html"/>
        <link rel="next" title="VIM" href="../../../vim.html"/>
        <link rel="prev" title="NAT" href="nat.html"/> 

  
  <script src="../../../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../../../index.html" class="icon icon-home"> debian & networking
          

          
          </a>

          
            
            
              <div class="version">
                201708
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../routing_n_switching.html">Routing/Switching</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="../routing_n_switching.html#basics">basics</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="connect2console.html">Connect to console</a></li>
<li class="toctree-l3"><a class="reference internal" href="routingConcepts.html">Routing Concepts</a></li>
<li class="toctree-l3"><a class="reference internal" href="staticRouting.html">Static Routes</a></li>
<li class="toctree-l3"><a class="reference internal" href="dynamicRouting.html">Dynamic Routing</a></li>
<li class="toctree-l3"><a class="reference internal" href="switchedNetworks.html">switched networks</a></li>
<li class="toctree-l3"><a class="reference internal" href="switchConfiguration.html">Switch Configuration</a></li>
<li class="toctree-l3"><a class="reference internal" href="vlans.html">VLANS</a></li>
<li class="toctree-l3"><a class="reference internal" href="acl.html">ACLs</a></li>
<li class="toctree-l3"><a class="reference internal" href="dhcp.html">DHCP</a></li>
<li class="toctree-l3"><a class="reference internal" href="nat.html">NAT</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">Device Discovery Management &amp; Maintenance</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#cisco-discovery-protocol-operation">Cisco Discovery Protocol Operation</a></li>
<li class="toctree-l4"><a class="reference internal" href="#cdp-exercise-10-1-1-4">cdp exercise 10.1.1.4</a></li>
<li class="toctree-l4"><a class="reference internal" href="#link-layer-discovery-protocol">Link Layer Discovery Protocol</a></li>
<li class="toctree-l4"><a class="reference internal" href="#ntp">NTP</a></li>
<li class="toctree-l4"><a class="reference internal" href="#ntp-stratum-labels">NTP Stratum Labels</a></li>
<li class="toctree-l4"><a class="reference internal" href="#verify-ntp-server-config">Verify NTP Server Config</a></li>
<li class="toctree-l4"><a class="reference internal" href="#syslog">Syslog</a></li>
<li class="toctree-l4"><a class="reference internal" href="#syslog-intro">Syslog intro</a></li>
<li class="toctree-l4"><a class="reference internal" href="#syslog-rfcs">Syslog RFCs</a></li>
<li class="toctree-l4"><a class="reference internal" href="#severity-level">Severity level</a></li>
<li class="toctree-l4"><a class="reference internal" href="#adding-a-timestamp-to-syslog-messages">Adding a timestamp to Syslog Messages</a></li>
<li class="toctree-l4"><a class="reference internal" href="#default-logging-service-settings">Default Logging Service Settings</a></li>
<li class="toctree-l4"><a class="reference internal" href="#syslog-configuration">Syslog configuration</a></li>
<li class="toctree-l4"><a class="reference internal" href="#verifying-syslog">Verifying Syslog</a></li>
<li class="toctree-l4"><a class="reference internal" href="#pt-configure-syslog-ntp">PT Configure Syslog &amp; NTP</a></li>
<li class="toctree-l4"><a class="reference internal" href="#lab-configuring-syslog-ntp">LAB Configuring syslog &amp; NTP</a></li>
<li class="toctree-l4"><a class="reference internal" href="#router-file-systems">Router File Systems</a></li>
<li class="toctree-l4"><a class="reference internal" href="#backing-up-and-restoring">Backing up and restoring</a></li>
<li class="toctree-l4"><a class="reference internal" href="#using-usb-ports">Using USB ports</a></li>
<li class="toctree-l4"><a class="reference internal" href="#password-recovery">Password Recovery</a></li>
<li class="toctree-l4"><a class="reference internal" href="#lab-managing-device-configuration-files">Lab - Managing Device Configuration Files</a></li>
<li class="toctree-l4"><a class="reference internal" href="#ios-15-system-image-packaging">IOS 15 System Image Packaging</a></li>
<li class="toctree-l4"><a class="reference internal" href="#ios-image-filenames">IOS Image Filenames</a></li>
<li class="toctree-l4"><a class="reference internal" href="#boot-system-command">boot system command</a></li>
<li class="toctree-l4"><a class="reference internal" href="#technology-packages-licenses">Technology Packages Licenses</a></li>
<li class="toctree-l4"><a class="reference internal" href="#licensing-proces">Licensing Proces</a></li>
<li class="toctree-l4"><a class="reference internal" href="#ch10-skills-integration-challenge">Ch10 Skills Integration Challenge</a></li>
<li class="toctree-l4"><a class="reference internal" href="#ch10-practice-exam">Ch10 practice exam</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../vim.html">VIM</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../commands.html">BASH</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../git.html">GIT</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../scripting.html">Scripting</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../storage.html">Object vs Block</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../rest.html">reStructuredText Primer</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../index.html">debian & networking</a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../../index.html">Docs</a> &raquo;</li>
        
          <li><a href="../routing_n_switching.html">Routing/Switching</a> &raquo;</li>
        
      <li>Device Discovery Management &amp; Maintenance</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../../../_sources/nw/rns/basics/lldpAndLicensing.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="device-discovery-management-maintenance">
<h1>Device Discovery Management &amp; Maintenance<a class="headerlink" href="#device-discovery-management-maintenance" title="Permalink to this headline">¶</a></h1>
<p>Cisco Discovery Protocol (CDP) and Link Layer Discover Protocol (LLDP) are both capable of discovering information about directly connected devices.</p>
<p>Network Time Protocol (NTP) can be effectively used to synchronize the time across all your networking devices, which is especially important when trying to compare log files from different devices. Those log files are generated by the syslog protocol. Syslog messages can be captured and sent to a syslog server to aid in device management tasks.</p>
<div class="section" id="cisco-discovery-protocol-operation">
<h2>Cisco Discovery Protocol Operation<a class="headerlink" href="#cisco-discovery-protocol-operation" title="Permalink to this headline">¶</a></h2>
<p>Cisco Discovery Protocol (CDP) is a Cisco proprietary Layer 2 protocol that is used to gather information about Cisco devices which share the same data link. CDP is media and protocol independent and runs on all Cisco devices, such as routers, switches, and access servers.</p>
<p>The device sends periodic CDP advertisements to connected devices. These advertisements share information about the type of device that is discovered, the name of the devices, and the number and type of the interfaces.</p>
<p>CDP can assist in network design decisions, troubleshooting, and making changes to equipment. CDP can also be used as a network discovery tool to determine the information about the neighboring devices. This information gathered from CDP can help build a logical topology of a network when documentation is missing or lacking in detail.</p>
<dl class="docutils">
<dt>Router# show cdp</dt>
<dd>Verify the status of CDP &amp; display information about CDP</dd>
<dt>Router(config)# cdp run</dt>
<dd>enable CDP globally for all the supported interfaces</dd>
<dt>Router(config)# no cdp run</dt>
<dd>disabe cdp for all the interfaces on the device</dd>
<dt>Router(config-if)# no cdp enable</dt>
<dd>disable cdp for specific interface (eg ISP link)</dd>
<dt>Router# show cdp neighbors [detail]</dt>
<dd>verify status of CDP &amp; display list of neighbors. use to display the IFs that are CDP enabled, status of IF is also shown</dd>
</dl>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last"><code class="docutils literal"><span class="pre">show</span> <span class="pre">cdp</span> <span class="pre">neighbors</span></code> reveals the remote hostname - local IF - remote platform - remote IF - capabilities Router S(witch) I(GMP)</p>
</div>
</div>
<div class="section" id="cdp-exercise-10-1-1-4">
<h2>cdp exercise 10.1.1.4<a class="headerlink" href="#cdp-exercise-10-1-1-4" title="Permalink to this headline">¶</a></h2>
<table border="1" class="docutils">
<colgroup>
<col width="20%" />
<col width="13%" />
<col width="19%" />
<col width="20%" />
<col width="29%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Device</th>
<th class="head">Interface</th>
<th class="head">IP Address</th>
<th class="head">Subnet Mask</th>
<th class="head">Local IF &amp; Connected NB</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>Edge1</td>
<td>G0/0</td>
<td>192.168.1.1</td>
<td>255.255.255.0</td>
<td>G0/0 - S1</td>
</tr>
<tr class="row-odd"><td>&#160;</td>
<td>S0/0/0</td>
<td>209.165.200.5</td>
<td>255.255.255.252</td>
<td>S0/0/0 - ISP</td>
</tr>
<tr class="row-even"><td>Branch-Edge</td>
<td>S0/0/1</td>
<td>209.165.200.10</td>
<td>255.255.255.252</td>
<td>S0/0/1  - ISP</td>
</tr>
<tr class="row-odd"><td>&#160;</td>
<td>G0/0</td>
<td>192.168.3.249</td>
<td>255.255.255.248</td>
<td>G0/0 - Branch-Firewall</td>
</tr>
<tr class="row-even"><td>Branch-Firewall</td>
<td>G0/0</td>
<td>192.168.3.253</td>
<td>255.255.255.248</td>
<td>G0/0 - Branch-Edge</td>
</tr>
<tr class="row-odd"><td>&#160;</td>
<td>G0/1</td>
<td>192.168.4.129</td>
<td>255.255.255.128</td>
<td>G0/1 - sw-br-floor2</td>
</tr>
<tr class="row-even"><td>sw-br-floor1</td>
<td>G0/2</td>
<td>no mgmt ip</td>
<td>&#160;</td>
<td>G0/2 - sw-br-floor2</td>
</tr>
<tr class="row-odd"><td>&#160;</td>
<td>G0/1</td>
<td>no mgmt ip</td>
<td>&#160;</td>
<td>G0/1 - Branch-Firewall</td>
</tr>
<tr class="row-even"><td>sw-br-floor2</td>
<td>vlan 1</td>
<td>192.168.4.132</td>
<td>255.255.255.128</td>
<td>mgmt interface</td>
</tr>
<tr class="row-odd"><td>&#160;</td>
<td>G0/2</td>
<td>192.168.4.132</td>
<td>255.255.255.128</td>
<td>G0/2 - sw-br-floor1</td>
</tr>
<tr class="row-even"><td>&#160;</td>
<td>G0/1</td>
<td>192.168.4.132</td>
<td>255.255.255.128</td>
<td>G0/1 - Branch-Firewall</td>
</tr>
<tr class="row-odd"><td>&#160;</td>
<td>Fa0/24</td>
<td>192.168.4.132</td>
<td>255.255.255.128</td>
<td>Fa0/24 - sw-br-floor3</td>
</tr>
<tr class="row-even"><td>sw-br-floor3</td>
<td>vlan 1</td>
<td>192.168.4.133</td>
<td>255.255.255.128</td>
<td>mgmt interface</td>
</tr>
<tr class="row-odd"><td>&#160;</td>
<td>G0/1</td>
<td>&#160;</td>
<td>&#160;</td>
<td>G0/1 - sw-br-floor1</td>
</tr>
<tr class="row-even"><td>&#160;</td>
<td>Fa0/24</td>
<td>&#160;</td>
<td>&#160;</td>
<td>Fa0/24 - sw-br-floor2</td>
</tr>
</tbody>
</table>
<p>Map a network using CDP and SSH remote access</p>
<p>Local Network
Username: admin01
Password: <a class="reference external" href="mailto:S3cre7P&#37;&#52;&#48;55">S3cre7P<span>&#64;</span>55</a></p>
<p>Branch Office Network
Username: branchadmin
Password: <a class="reference external" href="mailto:S3cre7P&#37;&#52;&#48;55">S3cre7P<span>&#64;</span>55</a></p>
<img alt="../../../_images/Ch10_ex_cdp_10.1.1.4.png" src="../../../_images/Ch10_ex_cdp_10.1.1.4.png" />
<ol class="arabic">
<li><p class="first">On Admin-PC open CMD and SSH into the gateway router at 192.168.1.1 using the username admin01 and the password <a class="reference external" href="mailto:S3cre7P&#37;&#52;&#48;55">S3cre7P<span>&#64;</span>55</a></p>
<div class="code highlight-default"><div class="highlight"><pre><span></span>PC&gt; ssh –l admin01 192.168.1.1
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Notice that you are placed directly into privileged EXEC mode. This is because the admin01 user account is set to privilege level 15.</p>
</div>
</li>
<li><p class="first">Use the show ip interface brief and show interfaces commands to document the Edge1 router’s physical interfaces, IP addresses , and subnet masks in the Addressing Table.</p>
<div class="code highlight-default"><div class="highlight"><pre><span></span>Edge1# show ip interface brief
Interface              IP-Address      OK? Method Status                Protocol
GigabitEthernet0/0     192.168.1.1     YES manual up                    up
GigabitEthernet0/1     unassigned      YES unset  administratively down down
Serial0/0/0            209.165.200.5   YES manual up                    up
Serial0/0/1            unassigned      YES unset  administratively down down
Vlan1                  unassigned      YES unset  administratively down down

Edge1#show interfaces
GigabitEthernet0/0 is up, line protocol is up (connected)
  Hardware is CN Gigabit Ethernet, address is 00e0.a3dd.7001 (bia 00e0.a3dd.7001)
  Internet address is 192.168.1.1/24
  MTU 1500 bytes, BW 1000000 Kbit, DLY 10 usec,
     reliability 255/255, txload 1/255, rxload 1/255
  Encapsulation ARPA, loopback not set
  Keepalive set (10 sec)
  Full-duplex, 100Mb/s, media type is RJ45
  output flow-control is unsupported, input flow-control is unsupported
  ARP type: ARPA, ARP Timeout 04:00:00,
  Last input 00:00:08, output 00:00:05, output hang never
  Last clearing of &quot;show interface&quot; counters never
  Input queue: 0/75/0 (size/max/drops); Total output drops: 0
  Queueing strategy: fifo
  Output queue :0/40 (size/max)
  5 minute input rate 40 bits/sec, 0 packets/sec
  5 minute output rate 31 bits/sec, 0 packets/sec
     115 packets input, 4666 bytes, 0 no buffer
     Received 0 broadcasts, 0 runts, 0 giants, 0 throttles
     0 input errors, 0 CRC, 0 frame, 0 overrun, 0 ignored, 0 abort
     0 watchdog, 1017 multicast, 0 pause input
     0 input packets with dribble condition detected
     64 packets output, 2616 bytes, 0 underruns
     0 output errors, 0 collisions, 1 interface resets
     0 unknown protocol drops
     0 babbles, 0 late collision, 0 deferred
     0 lost carrier, 0 no carrier
     0 output buffer failures, 0 output buffers swapped out
GigabitEthernet0/1 is administratively down, line protocol is down (disabled)
  Hardware is CN Gigabit Ethernet, address is 00e0.a3dd.7002 (bia 00e0.a3dd.7002)
  MTU 1500 bytes, BW 1000000 Kbit, DLY 10 usec,
     reliability 255/255, txload 1/255, rxload 1/255
  Encapsulation ARPA, loopback not set
  Keepalive set (10 sec)
  Full-duplex, 100Mb/s, media type is RJ45
  output flow-control is unsupported, input flow-control is unsupported
  ARP type: ARPA, ARP Timeout 04:00:00,
  Last input 00:00:08, output 00:00:05, output hang never
  Last clearing of &quot;show interface&quot; counters never
  Input queue: 0/75/0 (size/max/drops); Total output drops: 0
  Queueing strategy: fifo
  Output queue :0/40 (size/max)
  5 minute input rate 0 bits/sec, 0 packets/sec
  5 minute output rate 0 bits/sec, 0 packets/sec
     0 packets input, 0 bytes, 0 no buffer
     Received 0 broadcasts, 0 runts, 0 giants, 0 throttles
     0 input errors, 0 CRC, 0 frame, 0 overrun, 0 ignored, 0 abort
     0 watchdog, 1017 multicast, 0 pause input
     0 input packets with dribble condition detected
     0 packets output, 0 bytes, 0 underruns
     0 output errors, 0 collisions, 2 interface resets
     0 unknown protocol drops
     0 babbles, 0 late collision, 0 deferred
     0 lost carrier, 0 no carrier
     0 output buffer failures, 0 output buffers swapped out
Serial0/0/0 is up, line protocol is up (connected)
  Hardware is HD64570
  Internet address is 209.165.200.5/30
  MTU 1500 bytes, BW 1544 Kbit, DLY 20000 usec,
     reliability 255/255, txload 1/255, rxload 1/255
  Encapsulation HDLC, loopback not set, keepalive set (10 sec)
  Last input never, output never, output hang never
  Last clearing of &quot;show interface&quot; counters never
  Input queue: 0/75/0 (size/max/drops); Total output drops: 0
  Queueing strategy: weighted fair
  Output queue: 0/1000/64/0 (size/max total/threshold/drops)
     Conversations  0/0/256 (active/max active/max total)
     Reserved Conversations 0/0 (allocated/max allocated)
     Available Bandwidth 1158 kilobits/sec
  5 minute input rate 0 bits/sec, 0 packets/sec
  5 minute output rate 0 bits/sec, 0 packets/sec
     0 packets input, 0 bytes, 0 no buffer
     Received 0 broadcasts, 0 runts, 0 giants, 0 throttles
     0 input errors, 0 CRC, 0 frame, 0 overrun, 0 ignored, 0 abort
     0 packets output, 0 bytes, 0 underruns
     0 output errors, 0 collisions, 1 interface resets
     0 output buffer failures, 0 output buffers swapped out
     0 carrier transitions
     DCD=up  DSR=up  DTR=up  RTS=up  CTS=up
Serial0/0/1 is administratively down, line protocol is down (disabled)
  Hardware is HD64570
  MTU 1500 bytes, BW 1544 Kbit, DLY 20000 usec,
     reliability 255/255, txload 1/255, rxload 1/255
  Encapsulation HDLC, loopback not set, keepalive set (10 sec)
  Last input never, output never, output hang never
  Last clearing of &quot;show interface&quot; counters never
  Input queue: 0/75/0 (size/max/drops); Total output drops: 0
  Queueing strategy: weighted fair
  Output queue: 0/1000/64/0 (size/max total/threshold/drops)
     Conversations  0/0/256 (active/max active/max total)
     Reserved Conversations 0/0 (allocated/max allocated)
     Available Bandwidth 1158 kilobits/sec
  5 minute input rate 0 bits/sec, 0 packets/sec
  5 minute output rate 0 bits/sec, 0 packets/sec
     0 packets input, 0 bytes, 0 no buffer
     Received 0 broadcasts, 0 runts, 0 giants, 0 throttles
     0 input errors, 0 CRC, 0 frame, 0 overrun, 0 ignored, 0 abort
     0 packets output, 0 bytes, 0 underruns
     0 output errors, 0 collisions, 2 interface resets
     0 output buffer failures, 0 output buffers swapped out
     0 carrier transitions
     DCD=down  DSR=down  DTR=down  RTS=down  CTS=down
Vlan1 is administratively down, line protocol is down
  Hardware is CPU Interface, address is 0060.70bd.dd13 (bia 0060.70bd.dd13)
  MTU 1500 bytes, BW 100000 Kbit, DLY 1000000 usec,
     reliability 255/255, txload 1/255, rxload 1/255
  Encapsulation ARPA, loopback not set
  ARP type: ARPA, ARP Timeout 04:00:00
  Last input 21:40:21, output never, output hang never
  Last clearing of &quot;show interface&quot; counters never
  Input queue: 0/75/0/0 (size/max/drops/flushes); Total output drops: 0
  Queueing strategy: fifo
  Output queue: 0/40 (size/max)
  5 minute input rate 0 bits/sec, 0 packets/sec
  5 minute output rate 0 bits/sec, 0 packets/sec
     1682 packets input, 530955 bytes, 0 no buffer
     Received 0 broadcasts (0 IP multicast)
     0 runts, 0 giants, 0 throttles
     0 input errors, 0 CRC, 0 frame, 0 overrun, 0 ignored
     563859 packets output, 0 bytes, 0 underruns
     0 output errors, 23 interface resets
     0 output buffer failures, 0 output buffers swapped out
</pre></div>
</div>
</li>
<li><dl class="first docutils">
<dt>Using the Edge1 router’s CLI, you will SSH into the Remote Branch Office at 209.165.200.10 with the username branchadmin and the same password</dt>
<dd><p class="first last">Password:</p>
</dd>
</dl>
<div class="code highlight-default"><div class="highlight"><pre><span></span>  Edge1# ssh –l branchadmin 209.165.200.10
  Branch-Edge#

After connecting to the Remote Branch Office at 209.165.200.10 what piece of previously missing information can now be added to the Addressing Table above?

hostname Branche-Edge, Branch-Firewall hostnames and their ip address + subnet mask

.. code::

   Branch-Edge#show cdp neighbors detail

   Device ID: Branch-Firewall
   Entry address(es):
     IP address : 192.168.3.253
   Platform: cisco C1900, Capabilities: Router
   Interface: GigabitEthernet0/0, Port ID (outgoing port): GigabitEthernet0/0
   Holdtime: 154
</pre></div>
</div>
</li>
<li><p class="first">disable cdp on link to ISP</p>
<div class="code highlight-default"><div class="highlight"><pre><span></span><span class="n">Branch</span><span class="o">-</span><span class="n">Edge</span><span class="p">(</span><span class="n">config</span><span class="p">)</span><span class="c1">#interface S0/0/1</span>
<span class="n">Branch</span><span class="o">-</span><span class="n">Edge</span><span class="p">(</span><span class="n">config</span><span class="o">-</span><span class="k">if</span><span class="p">)</span><span class="c1">#no cdp enable</span>
<span class="n">Branch</span><span class="o">-</span><span class="n">Edge</span><span class="p">(</span><span class="n">config</span><span class="o">-</span><span class="k">if</span><span class="p">)</span><span class="c1">#exit</span>
<span class="n">Branch</span><span class="o">-</span><span class="n">Edge</span><span class="p">(</span><span class="n">config</span><span class="p">)</span><span class="c1">#cdp run</span>
<span class="n">Branch</span><span class="o">-</span><span class="n">Edge</span><span class="p">(</span><span class="n">config</span><span class="p">)</span><span class="c1">#</span>
</pre></div>
</div>
</li>
<li><p class="first">check NBs on Branch-Edge</p>
<div class="code highlight-default"><div class="highlight"><pre><span></span><span class="n">Branch</span><span class="o">-</span><span class="n">Edge</span><span class="p">(</span><span class="n">config</span><span class="p">)</span><span class="c1">#do show cdp neighbors detail</span>

<span class="n">Device</span> <span class="n">ID</span><span class="p">:</span> <span class="n">Branch</span><span class="o">-</span><span class="n">Firewall</span>
<span class="n">Entry</span> <span class="n">address</span><span class="p">(</span><span class="n">es</span><span class="p">):</span>
  <span class="n">IP</span> <span class="n">address</span> <span class="p">:</span> <span class="mf">192.168</span><span class="o">.</span><span class="mf">3.253</span>
<span class="o">...</span>
</pre></div>
</div>
</li>
<li><p class="first">ssh into the firewall</p>
<div class="code highlight-default"><div class="highlight"><pre><span></span><span class="n">Branch</span><span class="o">-</span><span class="n">Edge</span><span class="c1">#ssh -l branchadmin 192.168.3.253</span>
<span class="n">Open</span>
<span class="n">Password</span><span class="p">:</span>

<span class="n">Branch</span><span class="o">-</span><span class="n">Firewall</span><span class="c1">#</span>
</pre></div>
</div>
</li>
<li><p class="first">check NBs on Branch-Firewall</p>
<div class="code highlight-default"><div class="highlight"><pre><span></span><span class="n">Branch</span><span class="o">-</span><span class="n">Firewall</span><span class="c1">#show cdp neighbors</span>
<span class="n">Capability</span> <span class="n">Codes</span><span class="p">:</span> <span class="n">R</span> <span class="o">-</span> <span class="n">Router</span><span class="p">,</span> <span class="n">T</span> <span class="o">-</span> <span class="n">Trans</span> <span class="n">Bridge</span><span class="p">,</span> <span class="n">B</span> <span class="o">-</span> <span class="n">Source</span> <span class="n">Route</span> <span class="n">Bridge</span>
                  <span class="n">S</span> <span class="o">-</span> <span class="n">Switch</span><span class="p">,</span> <span class="n">H</span> <span class="o">-</span> <span class="n">Host</span><span class="p">,</span> <span class="n">I</span> <span class="o">-</span> <span class="n">IGMP</span><span class="p">,</span> <span class="n">r</span> <span class="o">-</span> <span class="n">Repeater</span><span class="p">,</span> <span class="n">P</span> <span class="o">-</span> <span class="n">Phone</span>
<span class="n">Device</span> <span class="n">ID</span>    <span class="n">Local</span> <span class="n">Intrfce</span>   <span class="n">Holdtme</span>    <span class="n">Capability</span>   <span class="n">Platform</span>    <span class="n">Port</span> <span class="n">ID</span>
<span class="n">sw</span><span class="o">-</span><span class="n">br</span><span class="o">-</span><span class="n">floor2</span>
             <span class="n">Gig</span> <span class="mi">0</span><span class="o">/</span><span class="mi">1</span>          <span class="mi">137</span>            <span class="n">S</span>       <span class="mi">2960</span>        <span class="n">Gig</span> <span class="mi">0</span><span class="o">/</span><span class="mi">1</span>
<span class="n">Branch</span><span class="o">-</span><span class="n">Edge</span>  <span class="n">Gig</span> <span class="mi">0</span><span class="o">/</span><span class="mi">0</span>          <span class="mi">171</span>            <span class="n">R</span>       <span class="n">C1900</span>       <span class="n">Gig</span> <span class="mi">0</span><span class="o">/</span><span class="mi">0</span>

<span class="n">Branch</span><span class="o">-</span><span class="n">Firewall</span><span class="c1">#show cdp neighbors detail</span>

<span class="n">Device</span> <span class="n">ID</span><span class="p">:</span> <span class="n">sw</span><span class="o">-</span><span class="n">br</span><span class="o">-</span><span class="n">floor2</span>
<span class="n">Entry</span> <span class="n">address</span><span class="p">(</span><span class="n">es</span><span class="p">):</span>
  <span class="n">IP</span> <span class="n">address</span> <span class="p">:</span> <span class="mf">192.168</span><span class="o">.</span><span class="mf">4.132</span>
<span class="n">Platform</span><span class="p">:</span> <span class="n">cisco</span> <span class="mi">2960</span><span class="p">,</span> <span class="n">Capabilities</span><span class="p">:</span> <span class="n">Switch</span>
<span class="n">Interface</span><span class="p">:</span> <span class="n">GigabitEthernet0</span><span class="o">/</span><span class="mi">1</span><span class="p">,</span> <span class="n">Port</span> <span class="n">ID</span> <span class="p">(</span><span class="n">outgoing</span> <span class="n">port</span><span class="p">):</span> <span class="n">GigabitEthernet0</span><span class="o">/</span><span class="mi">1</span>
<span class="n">Holdtime</span><span class="p">:</span> <span class="mi">130</span>

<span class="n">Version</span> <span class="p">:</span>
<span class="n">Cisco</span> <span class="n">IOS</span> <span class="n">Software</span><span class="p">,</span> <span class="n">C2960</span> <span class="n">Software</span> <span class="p">(</span><span class="n">C2960</span><span class="o">-</span><span class="n">LANBASE</span><span class="o">-</span><span class="n">M</span><span class="p">),</span> <span class="n">Version</span> <span class="mf">12.2</span><span class="p">(</span><span class="mi">25</span><span class="p">)</span><span class="n">FX</span><span class="p">,</span> <span class="n">RELEASE</span> <span class="n">SOFTWARE</span> <span class="p">(</span><span class="n">fc1</span><span class="p">)</span>
<span class="n">Copyright</span> <span class="p">(</span><span class="n">c</span><span class="p">)</span> <span class="mi">1986</span><span class="o">-</span><span class="mi">2005</span> <span class="n">by</span> <span class="n">Cisco</span> <span class="n">Systems</span><span class="p">,</span> <span class="n">Inc</span><span class="o">.</span>
<span class="n">Compiled</span> <span class="n">Wed</span> <span class="mi">12</span><span class="o">-</span><span class="n">Oct</span><span class="o">-</span><span class="mi">05</span> <span class="mi">22</span><span class="p">:</span><span class="mi">05</span> <span class="n">by</span> <span class="n">pt_team</span>

<span class="n">advertisement</span> <span class="n">version</span><span class="p">:</span> <span class="mi">2</span>
<span class="n">Duplex</span><span class="p">:</span> <span class="n">full</span>
<span class="o">---------------------------</span>

<span class="n">Device</span> <span class="n">ID</span><span class="p">:</span> <span class="n">Branch</span><span class="o">-</span><span class="n">Edge</span>
<span class="n">Entry</span> <span class="n">address</span><span class="p">(</span><span class="n">es</span><span class="p">):</span>
  <span class="n">IP</span> <span class="n">address</span> <span class="p">:</span> <span class="mf">192.168</span><span class="o">.</span><span class="mf">3.249</span>
<span class="n">Platform</span><span class="p">:</span> <span class="n">cisco</span> <span class="n">C1900</span><span class="p">,</span> <span class="n">Capabilities</span><span class="p">:</span> <span class="n">Router</span>
<span class="n">Interface</span><span class="p">:</span> <span class="n">GigabitEthernet0</span><span class="o">/</span><span class="mi">0</span><span class="p">,</span> <span class="n">Port</span> <span class="n">ID</span> <span class="p">(</span><span class="n">outgoing</span> <span class="n">port</span><span class="p">):</span> <span class="n">GigabitEthernet0</span><span class="o">/</span><span class="mi">0</span>
<span class="n">Holdtime</span><span class="p">:</span> <span class="mi">165</span>

<span class="n">Version</span> <span class="p">:</span>
<span class="n">Cisco</span> <span class="n">IOS</span> <span class="n">Software</span><span class="p">,</span> <span class="n">C1900</span> <span class="n">Software</span> <span class="p">(</span><span class="n">C1900</span><span class="o">-</span><span class="n">UNIVERSALK9</span><span class="o">-</span><span class="n">M</span><span class="p">),</span> <span class="n">Version</span> <span class="mf">15.1</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span><span class="n">M4</span><span class="p">,</span> <span class="n">RELEASE</span> <span class="n">SOFTWARE</span> <span class="p">(</span><span class="n">fc2</span><span class="p">)</span>
<span class="n">Technical</span> <span class="n">Support</span><span class="p">:</span> <span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">www</span><span class="o">.</span><span class="n">cisco</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">techsupport</span>
<span class="n">Copyright</span> <span class="p">(</span><span class="n">c</span><span class="p">)</span> <span class="mi">1986</span><span class="o">-</span><span class="mi">2012</span> <span class="n">by</span> <span class="n">Cisco</span> <span class="n">Systems</span><span class="p">,</span> <span class="n">Inc</span><span class="o">.</span>
<span class="n">Compiled</span> <span class="n">Thurs</span> <span class="mi">5</span><span class="o">-</span><span class="n">Jan</span><span class="o">-</span><span class="mi">12</span> <span class="mi">15</span><span class="p">:</span><span class="mi">41</span> <span class="n">by</span> <span class="n">pt_team</span>

<span class="n">advertisement</span> <span class="n">version</span><span class="p">:</span> <span class="mi">2</span>
<span class="n">Duplex</span><span class="p">:</span> <span class="n">full</span>

<span class="n">Branch</span><span class="o">-</span><span class="n">Firewall</span><span class="c1">#</span>
</pre></div>
</div>
</li>
<li><p class="first">explore the discovered switch via ssh</p>
<div class="code highlight-default"><div class="highlight"><pre><span></span>Branch-Firewall#ssh -l branchadmin 192.168.4.132
Open
Password:

sw-br-floor2&gt;
sw-br-floor2&gt;show ip int brief
Interface              IP-Address      OK? Method Status                Protocol
...
FastEthernet0/24       unassigned      YES manual up                    up
GigabitEthernet0/1     unassigned      YES manual up                    up
GigabitEthernet0/2     unassigned      YES manual up                    up
Vlan1                  192.168.4.132   YES manual up                    up
------------------
sw-br-floor2&gt;
sw-br-floor2&gt;show cdp neighbors detail
Device ID: sw-br-floor3
Entry address(es):
  IP address : 192.168.4.133
Platform: cisco 2960, Capabilities: Switch
Interface: FastEthernet0/24, Port ID (outgoing port): FastEthernet0/24
Holdtime: 139

Version :
Cisco IOS Software, C2960 Software (C2960-LANBASE-M), Version 12.2(25)FX, RELEASE SOFTWARE (fc1)
Copyright (c) 1986-2005 by Cisco Systems, Inc.
Compiled Wed 12-Oct-05 22:05 by pt_team

advertisement version: 2
Duplex: full
---------------------------

Device ID: Branch-Firewall
Entry address(es):
  IP address : 192.168.4.129
Platform: cisco C1900, Capabilities: Router
Interface: GigabitEthernet0/1, Port ID (outgoing port): GigabitEthernet0/1
Holdtime: 139

Version :
Cisco IOS Software, C1900 Software (C1900-UNIVERSALK9-M), Version 15.1(4)M4, RELEASE SOFTWARE (fc2)
Technical Support: http://www.cisco.com/techsupport
Copyright (c) 1986-2012 by Cisco Systems, Inc.
Compiled Thurs 5-Jan-12 15:41 by pt_team

advertisement version: 2
Duplex: full
---------------------------

Device ID: sw-br-floor1
Entry address(es):
Platform: cisco 2960, Capabilities: Switch
Interface: GigabitEthernet0/2, Port ID (outgoing port): GigabitEthernet0/2
Holdtime: 139

Version :
Cisco IOS Software, C2960 Software (C2960-LANBASE-M), Version 12.2(25)FX, RELEASE SOFTWARE (fc1)
Copyright (c) 1986-2005 by Cisco Systems, Inc.
Compiled Wed 12-Oct-05 22:05 by pt_team

advertisement version: 2
Duplex: full
----------------------------------------------
sw-br-floor2&gt;
</pre></div>
</div>
<p>Add the vlan ip and the newly discovered switch to the addressing table</p>
</li>
<li><p class="first">Verify there are no ip addresses left by using traceroute and even <code class="docutils literal"><span class="pre">show</span> <span class="pre">arp</span></code></p>
<div class="code highlight-default"><div class="highlight"><pre><span></span><span class="n">sw</span><span class="o">-</span><span class="n">br</span><span class="o">-</span><span class="n">floor3</span><span class="o">&gt;</span><span class="n">traceroute</span> <span class="mf">209.165</span><span class="o">.</span><span class="mf">200.5</span>
<span class="n">Type</span> <span class="n">escape</span> <span class="n">sequence</span> <span class="n">to</span> <span class="n">abort</span><span class="o">.</span>
<span class="n">Tracing</span> <span class="n">the</span> <span class="n">route</span> <span class="n">to</span> <span class="mf">209.165</span><span class="o">.</span><span class="mf">200.5</span>

  <span class="mi">1</span>   <span class="mf">192.168</span><span class="o">.</span><span class="mf">4.129</span>   <span class="mi">0</span> <span class="n">msec</span>    <span class="mi">0</span> <span class="n">msec</span>    <span class="mi">0</span> <span class="n">msec</span>
  <span class="mi">2</span>   <span class="mf">192.168</span><span class="o">.</span><span class="mf">3.249</span>   <span class="mi">0</span> <span class="n">msec</span>    <span class="mi">0</span> <span class="n">msec</span>    <span class="mi">0</span> <span class="n">msec</span>
  <span class="mi">3</span>   <span class="mf">209.165</span><span class="o">.</span><span class="mf">200.9</span>   <span class="mi">2</span> <span class="n">msec</span>    <span class="mi">1</span> <span class="n">msec</span>    <span class="mi">0</span> <span class="n">msec</span>
  <span class="mi">4</span>   <span class="mf">209.165</span><span class="o">.</span><span class="mf">200.5</span>   <span class="mi">1</span> <span class="n">msec</span>    <span class="mi">2</span> <span class="n">msec</span>    <span class="mi">1</span> <span class="n">msec</span>

<span class="n">Branch</span><span class="o">-</span><span class="n">Firewall</span><span class="c1">#show arp</span>
<span class="n">Protocol</span>  <span class="n">Address</span>          <span class="n">Age</span> <span class="p">(</span><span class="nb">min</span><span class="p">)</span>  <span class="n">Hardware</span> <span class="n">Addr</span>   <span class="n">Type</span>   <span class="n">Interface</span>
<span class="n">Internet</span>  <span class="mf">192.168</span><span class="o">.</span><span class="mf">3.249</span>           <span class="mi">67</span>  <span class="mf">0001.9660</span><span class="o">.</span><span class="mi">0053</span>  <span class="n">ARPA</span>   <span class="n">GigabitEthernet0</span><span class="o">/</span><span class="mi">0</span>
<span class="n">Internet</span>  <span class="mf">192.168</span><span class="o">.</span><span class="mf">3.253</span>           <span class="o">-</span>   <span class="mi">00</span><span class="n">D0</span><span class="o">.</span><span class="n">D351</span><span class="o">.</span><span class="mi">0601</span>  <span class="n">ARPA</span>   <span class="n">GigabitEthernet0</span><span class="o">/</span><span class="mi">0</span>
<span class="n">Internet</span>  <span class="mf">192.168</span><span class="o">.</span><span class="mf">4.129</span>           <span class="o">-</span>   <span class="mi">00</span><span class="n">D0</span><span class="o">.</span><span class="n">D351</span><span class="o">.</span><span class="mi">0602</span>  <span class="n">ARPA</span>   <span class="n">GigabitEthernet0</span><span class="o">/</span><span class="mi">1</span>
<span class="n">Internet</span>  <span class="mf">192.168</span><span class="o">.</span><span class="mf">4.132</span>           <span class="mi">53</span>  <span class="mf">0060.70</span><span class="n">C4</span><span class="o">.</span><span class="n">E374</span>  <span class="n">ARPA</span>   <span class="n">GigabitEthernet0</span><span class="o">/</span><span class="mi">1</span>
<span class="n">Internet</span>  <span class="mf">192.168</span><span class="o">.</span><span class="mf">4.133</span>           <span class="mi">12</span>  <span class="mf">0090.2173</span><span class="o">.</span><span class="n">AC1D</span>  <span class="n">ARPA</span>   <span class="n">GigabitEthernet0</span><span class="o">/</span><span class="mi">1</span>
</pre></div>
</div>
</li>
</ol>
<p>enable password is unkown and switch 1 doesn’t have a mgmt ip address so we can’t explore further</p>
<blockquote>
<div><div class="code highlight-default"><div class="highlight"><pre><span></span>sw-br-floor2&gt;show cdp neighbors detail
Device ID: sw-br-floor3
Entry address(es):
  IP address : 192.168.4.133
Platform: cisco 2960, Capabilities: Switch
Interface: FastEthernet0/24, Port ID (outgoing port): FastEthernet0/24
Holdtime: 139

Version :
Cisco IOS Software, C2960 Software (C2960-LANBASE-M), Version 12.2(25)FX, RELEASE SOFTWARE (fc1)
Copyright (c) 1986-2005 by Cisco Systems, Inc.
Compiled Wed 12-Oct-05 22:05 by pt_team

advertisement version: 2
Duplex: full
---------------------------

Device ID: Branch-Firewall
Entry address(es):
  IP address : 192.168.4.129
Platform: cisco C1900, Capabilities: Router
Interface: GigabitEthernet0/1, Port ID (outgoing port): GigabitEthernet0/1
Holdtime: 139

Version :
Cisco IOS Software, C1900 Software (C1900-UNIVERSALK9-M), Version 15.1(4)M4, RELEASE SOFTWARE (fc2)
Technical Support: http://www.cisco.com/techsupport
Copyright (c) 1986-2012 by Cisco Systems, Inc.
Compiled Thurs 5-Jan-12 15:41 by pt_team

advertisement version: 2
Duplex: full
---------------------------

Device ID: sw-br-floor1
Entry address(es):
Platform: cisco 2960, Capabilities: Switch
Interface: GigabitEthernet0/2, Port ID (outgoing port): GigabitEthernet0/2
Holdtime: 139

Version :
Cisco IOS Software, C2960 Software (C2960-LANBASE-M), Version 12.2(25)FX, RELEASE SOFTWARE (fc1)
Copyright (c) 1986-2005 by Cisco Systems, Inc.
Compiled Wed 12-Oct-05 22:05 by pt_team

advertisement version: 2
Duplex: full

sw-br-floor2&gt;
    !
    interface FastEthernet0/10
     switchport access vlan 30
     switchport mode access
     shutdown
    !
    interface FastEthernet0/11
     description link2FileServerVLAN15
     switchport access vlan 15
     switchport mode access
    !
    interface FastEthernet0/12
     switchport access vlan 15
     switchport mode access
     shutdown
    !
    interface FastEthernet0/13
     switchport access vlan 15
     switchport mode access
     shutdown
    !
    interface FastEthernet0/14
     switchport access vlan 15
     switchport mode access
     shutdown
    !
    interface FastEthernet0/15
     switchport access vlan 15
     switchport mode access
     shutdown
    !
    interface FastEthernet0/16
     switchport access vlan 15
     switchport mode access
     shutdown
    !
    interface FastEthernet0/17
     switchport access vlan 15
     switchport mode access
     shutdown
    !
    interface FastEthernet0/18
     switchport access vlan 15
     switchport mode access
     shutdown
    !
    interface FastEthernet0/19
     switchport access vlan 15
     switchport mode access
     shutdown
    !
    interface FastEthernet0/20
     switchport access vlan 15
     switchport mode access
     shutdown
    !
    interface FastEthernet0/21
     switchport mode access
     switchport port-security violation restrict
     shutdown
    !
    interface FastEthernet0/22
     switchport port-security violation restrict
    !
    interface FastEthernet0/23
     switchport port-security violation restrict
    !
    interface FastEthernet0/24
     switchport port-security violation restrict
    !
    interface GigabitEthernet0/1
     description link_Trunk2Central
     switchport trunk native vlan 45
     switchport trunk allowed vlan 15,30,45,60
     switchport mode trunk
    !
    interface GigabitEthernet0/2
     switchport trunk native vlan 45
     switchport trunk allowed vlan 15,30,45,60
     switchport mode trunk
     shutdown
    !
    interface Vlan1
     no ip address
     shutdown
    !
    interface Vlan60
     mac-address 0001.c9aa.4801
     ip address 172.16.15.10 255.255.255.248
    !
    ip default-gateway 172.16.15.9
    !
    !
    !
    !
    line con 0
    !
    line vty 0 4
     login local
     transport input ssh
     transport output none
    line vty 5 15
     login local
     transport input ssh
     transport output none
    !
    !
    !
    end
</pre></div>
</div>
</div></blockquote>
</div>
<div class="section" id="link-layer-discovery-protocol">
<h2>Link Layer Discovery Protocol<a class="headerlink" href="#link-layer-discovery-protocol" title="Permalink to this headline">¶</a></h2>
<dl class="docutils">
<dt>LLDP</dt>
<dd>A vendor-neutral neighbor discovery protocol similar to CDP. Works with Routers,Switches,WLAN APs. Advertises its identity and capabilities over L2</dd>
</dl>
<div class="section" id="configuration">
<h3>Configuration<a class="headerlink" href="#configuration" title="Permalink to this headline">¶</a></h3>
<div class="code highlight-default"><div class="highlight"><pre><span></span><span class="n">Switch</span><span class="c1"># conf t</span>
<span class="n">Switch</span><span class="p">(</span><span class="n">config</span><span class="p">)</span><span class="c1"># lldp run</span>
<span class="n">Switch</span><span class="p">(</span><span class="n">config</span><span class="p">)</span><span class="c1"># interface gigabitethernet 0/1</span>
<span class="n">Switch</span><span class="p">(</span><span class="n">config</span><span class="o">-</span><span class="k">if</span><span class="p">)</span><span class="c1"># lldp transmit</span>
<span class="n">Switch</span><span class="p">(</span><span class="n">config</span><span class="o">-</span><span class="k">if</span><span class="p">)</span><span class="c1"># lldp receive</span>
<span class="n">Switch</span><span class="c1"># show lldp</span>

<span class="n">Global</span> <span class="n">LLDP</span> <span class="n">Information</span><span class="p">:</span>
    <span class="n">Status</span><span class="p">:</span> <span class="n">ACTIVE</span>
    <span class="n">LLDP</span> <span class="n">advertisements</span> <span class="n">are</span> <span class="n">sent</span> <span class="n">every</span> <span class="mi">30</span> <span class="n">seconds</span>
    <span class="n">LLDP</span> <span class="n">hold</span> <span class="n">time</span> <span class="n">advertised</span> <span class="ow">is</span> <span class="mi">120</span> <span class="n">seconds</span>
    <span class="n">LLDP</span> <span class="n">interface</span> <span class="n">reinitialisation</span> <span class="n">delay</span> <span class="ow">is</span> <span class="mi">2</span> <span class="n">seconds</span>

<span class="n">Switch</span><span class="c1"># show lldp neighbors</span>
<span class="n">Switch</span><span class="c1"># show lldp neighbors detail</span>
</pre></div>
</div>
</div>
<div class="section" id="comparison-neighbors-information">
<h3>comparison neighbors information<a class="headerlink" href="#comparison-neighbors-information" title="Permalink to this headline">¶</a></h3>
<p>cdp</p>
<blockquote>
<div><div class="code highlight-default"><div class="highlight"><pre><span></span><span class="n">S3</span><span class="c1"># show cdp neighbors</span>
<span class="n">Capability</span> <span class="n">Codes</span><span class="p">:</span> <span class="n">R</span> <span class="o">-</span> <span class="n">Router</span><span class="p">,</span> <span class="n">T</span> <span class="o">-</span> <span class="n">Trans</span> <span class="n">Bridge</span><span class="p">,</span> <span class="n">B</span> <span class="o">-</span> <span class="n">Source</span> <span class="n">Route</span> <span class="n">Bridge</span>
                  <span class="n">S</span> <span class="o">-</span> <span class="n">Switch</span><span class="p">,</span> <span class="n">H</span> <span class="o">-</span> <span class="n">Host</span><span class="p">,</span> <span class="n">I</span> <span class="o">-</span> <span class="n">IGMP</span><span class="p">,</span> <span class="n">r</span> <span class="o">-</span> <span class="n">Repeater</span><span class="p">,</span> <span class="n">P</span> <span class="o">-</span> <span class="n">Phone</span><span class="p">,</span>
                  <span class="n">D</span> <span class="o">-</span> <span class="n">Remote</span><span class="p">,</span> <span class="n">C</span> <span class="o">-</span> <span class="n">CVTA</span><span class="p">,</span> <span class="n">M</span> <span class="o">-</span> <span class="n">Two</span><span class="o">-</span> <span class="n">port</span> <span class="n">Mac</span> <span class="n">Relay</span>
<span class="n">Device</span> <span class="n">ID</span>        <span class="n">Local</span> <span class="n">Intrfce</span>     <span class="n">Holdtme</span>    <span class="n">Capability</span>  <span class="n">Platform</span>  <span class="n">Port</span> <span class="n">ID</span>
<span class="n">Gateway</span>          <span class="n">Fas</span> <span class="mi">0</span><span class="o">/</span><span class="mi">5</span>           <span class="mi">143</span>            <span class="n">R</span> <span class="n">B</span> <span class="n">S</span> <span class="n">I</span> <span class="n">CISCO1941</span> <span class="n">Gig</span> <span class="mi">0</span><span class="o">/</span><span class="mi">1</span>
<span class="n">S2</span>               <span class="n">Fas</span> <span class="mi">0</span><span class="o">/</span><span class="mi">2</span>           <span class="mi">173</span>              <span class="n">S</span> <span class="n">I</span>   <span class="n">WS</span><span class="o">-</span><span class="n">C2960</span><span class="o">-</span> <span class="n">Fas</span> <span class="mi">0</span><span class="o">/</span><span class="mi">4</span>
<span class="n">S1</span>               <span class="n">Fas</span> <span class="mi">0</span><span class="o">/</span><span class="mi">4</span>           <span class="mi">171</span>              <span class="n">S</span> <span class="n">I</span>   <span class="n">WS</span><span class="o">-</span><span class="n">C2960</span><span class="o">-</span> <span class="n">Fas</span> <span class="mi">0</span><span class="o">/</span><span class="mi">4</span>
</pre></div>
</div>
</div></blockquote>
<p>lldp</p>
<blockquote>
<div><div class="code highlight-default"><div class="highlight"><pre><span></span><span class="n">Capability</span> <span class="n">codes</span><span class="p">:(</span><span class="n">R</span><span class="p">)</span> <span class="n">Router</span><span class="p">,</span> <span class="p">(</span><span class="n">B</span><span class="p">)</span> <span class="n">Bridge</span><span class="p">,</span> <span class="p">(</span><span class="n">T</span><span class="p">)</span> <span class="n">Telephone</span><span class="p">,</span> <span class="p">(</span><span class="n">C</span><span class="p">)</span> <span class="n">DOCSIS</span> <span class="n">Cable</span> <span class="n">Device</span>
                 <span class="p">(</span><span class="n">W</span><span class="p">)</span> <span class="n">WLAN</span> <span class="n">Access</span> <span class="n">Point</span><span class="p">,</span> <span class="p">(</span><span class="n">P</span><span class="p">)</span> <span class="n">Repeater</span><span class="p">,</span> <span class="p">(</span><span class="n">S</span><span class="p">)</span> <span class="n">Station</span><span class="p">,</span> <span class="p">(</span><span class="n">O</span><span class="p">)</span> <span class="n">Other</span>
<span class="n">Device</span> <span class="n">ID</span>           <span class="n">Local</span> <span class="n">Intf</span>     <span class="n">Hold</span><span class="o">-</span><span class="n">time</span>  <span class="n">Capability</span>    <span class="n">Port</span> <span class="n">ID</span>
<span class="n">S3</span>                  <span class="n">Gi0</span><span class="o">/</span><span class="mi">1</span>          <span class="mi">120</span>        <span class="n">B</span>               <span class="n">Fa0</span><span class="o">/</span><span class="mi">5</span>
<span class="n">Total</span> <span class="n">entries</span> <span class="n">displayed</span><span class="p">:</span> <span class="mi">1</span>
</pre></div>
</div>
</div></blockquote>
<table border="1" class="docutils">
<colgroup>
<col width="39%" />
<col width="61%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">cdp</th>
<th class="head">lldp</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>R# show cdp</td>
<td>R# show lldp [traffic]</td>
</tr>
<tr class="row-odd"><td>R(config)# cdp run</td>
<td>R(config)# lldp run</td>
</tr>
<tr class="row-even"><td>R(config)# no cdp run</td>
<td>R(config)# no lldp run</td>
</tr>
<tr class="row-odd"><td>R# show cdp interface [if-id]</td>
<td>R# show lldp interface [if-id]</td>
</tr>
<tr class="row-even"><td>R# show cdp neighbors [detail]</td>
<td>R# show lldp neighbors [detail]</td>
</tr>
<tr class="row-odd"><td>R(config-if)# cdp enable</td>
<td>R(config-if)# lldp transmit  &amp; lldp receive</td>
</tr>
<tr class="row-even"><td>R(config-if)# no cdp enable</td>
<td>R(config-if)# no lldp transmit &amp; no lldp receive</td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The show cdp neighbors command can be used to prove that Layer 1 and Layer 2 connectivity exists between two Cisco devices. For example, if two devices have duplicate IP addresses, a ping between the devices will fail, but the output of show cdp neighbors will be successful. The show cdp neighbors detail could be used to verify the IP address of the directly connected device in case the same IP address is assigned to the two routers.</p>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The show cdp neighbors detail command reveals the IP address of a neighboring device regardless of whether you can ping the neighbor</p>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The show cdp neighbors command provides information on directly connected Cisco devices including Device ID, local interface, capability, platform, and port ID of the remote device.</p>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Cisco developed NetFlow for the purpose of gathering statistics on packets flowing through Cisco routers and multilayer switches. SNMP can be used to collect and store information about a device. Syslog is used to access and store system messages. NTP is used to allow network devices to synchronize time settings.</p>
</div>
</div>
</div>
<div class="section" id="ntp">
<h2>NTP<a class="headerlink" href="#ntp" title="Permalink to this headline">¶</a></h2>
<p>set clock manually (you’d be an idiot but hey learn the command)</p>
<div class="code highlight-default"><div class="highlight"><pre><span></span><span class="n">R1</span><span class="c1"># clock set 20:36:00 dec 11 2015</span>
<span class="n">R1</span><span class="c1"># clock timezone PST -8</span>
<span class="n">R1</span><span class="c1"># clock summer-time PDT recurring</span>
</pre></div>
</div>
<p>Configure the Network Time Protocol (NTP)</p>
<p>When NTP is implemented in the network, it can be set up to synchronize to a private master clock or it can synchronize to a publicly available NTP server on the Internet.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">NTP uses UDP port 123 and is documented in RFC 1305.</p>
</div>
</div>
<div class="section" id="ntp-stratum-labels">
<h2>NTP Stratum Labels<a class="headerlink" href="#ntp-stratum-labels" title="Permalink to this headline">¶</a></h2>
<img alt="../../../_images/Ch10_NTP_Stratum_labels.png" src="../../../_images/Ch10_NTP_Stratum_labels.png" />
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The stratum level is defined as the number of hop counts from the authoritative source.</p>
</div>
<dl class="docutils">
<dt>Stratum 0</dt>
<dd>An NTP network gets the time from authoritative time sources. These authoritative time sources, also referred to as stratum 0 devices, are high-precision timekeeping devices assumed to be accurate and with little or no delay associated with them. Stratum 0 devices are represented by the clock in the figure.</dd>
<dt>Stratum 1</dt>
<dd>The stratum 1 devices are directly connected to the authoritative time sources. They act as the primary network time standard.</dd>
<dt>Stratum 2 and Lower</dt>
<dd>The stratum 2 servers are connected to stratum 1 devices through network connections. Stratum 2 devices, such as NTP clients, synchronize their time using the NTP packets from stratum 1 servers. They could also act as servers for stratum 3 devices.</dd>
<dt>Smaller stratum numbers</dt>
<dd>indicate that the server is closer to the authorized time source than larger stratum numbers. The larger the stratum number, the lower the stratum level. The <strong>max hop count is 15. Stratum 16, the lowest stratum level, indicates that a device is unsynchronized</strong>. Time servers on the <strong>same stratum level</strong> can be configured to act as a peer with other time servers on the same stratum level <strong>for backup or verification of time</strong>.</dd>
</dl>
</div>
<div class="section" id="verify-ntp-server-config">
<h2>Verify NTP Server Config<a class="headerlink" href="#verify-ntp-server-config" title="Permalink to this headline">¶</a></h2>
<img alt="../../../_images/Ch10_Verify_NTP_Server_configuration.png" src="../../../_images/Ch10_Verify_NTP_Server_configuration.png" />
<table border="1" class="docutils">
<colgroup>
<col width="41%" />
<col width="59%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">command</th>
<th class="head">description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>show clock detail</td>
<td>check the Time Source</td>
</tr>
<tr class="row-odd"><td>show ntp associations</td>
<td>verify that R1 is synchronized with the NTP server</td>
</tr>
<tr class="row-even"><td>show ntp status</td>
<td>verify synchronization + view stratum</td>
</tr>
<tr class="row-odd"><td>S1(config)# ntp server 192.168.1.1</td>
<td>configure ntp source/server</td>
</tr>
</tbody>
</table>
<div class="code highlight-default"><div class="highlight"><pre><span></span>R2&gt;en
R2#ping 209.165.200.225

Type escape sequence to abort.
Sending 5, 100-byte ICMP Echos to 209.165.200.225, timeout is 2 seconds:
.!!!!
Success rate is 80 percent (4/5), round-trip min/avg/max = 0/0/0 ms

R2#conf t
Enter configuration commands, one per line.  End with CNTL/Z.
R2(config)#ntp server 209.165.200.225
R2(config)#do show clock
15:13:8.338 UTC Wed Oct 4 2017
R2(config)#do show clock detail
15:13:12.329 UTC Wed Oct 4 2017
Time source is NTP
R2(config)#do show clock detail
15:13:32.787 UTC Wed Oct 4 2017
Time source is NTP
R2(config)#exit
R2#
%SYS-5-CONFIG_I: Configured from console by console

R2#show ntp
R2#show ntp associations
% This command is not supported by Packet Tracer.
R2#show ntp ?
  associations  NTP associations
  status        NTP status
R2#show ntp status
Clock is synchronized, stratum 2, reference is 209.165.200.225
nominal freq is 250.0000 Hz, actual freq is 249.9990 Hz, precision is 2**19
reference time is FFFFFFFFDD5548E2.00000060 (15:12:34.096 UTC Wed Oct 4 2017)
clock offset is 0.00 msec, root delay is 0.00  msec
root dispersion is 0.02 msec, peer dispersion is 0.02 msec.
R2#
</pre></div>
</div>
</div>
<div class="section" id="syslog">
<h2>Syslog<a class="headerlink" href="#syslog" title="Permalink to this headline">¶</a></h2>
<dl class="docutils">
<dt>Syslog</dt>
<dd>uses UDP port 514 to send event notification messages across IP networks to event message collectors. The protocol allows networking devices to send their system messages across the network to syslog servers</dd>
</dl>
<p>The syslog logging service provides three primary functions:</p>
<blockquote>
<div><ol class="arabic simple">
<li>The ability to gather logging information for monitoring and troubleshooting</li>
<li>The ability to select the type of logging information that is captured</li>
<li>The ability to specify the destinations of captured syslog messages</li>
</ol>
</div></blockquote>
</div>
<div class="section" id="syslog-intro">
<h2>Syslog intro<a class="headerlink" href="#syslog-intro" title="Permalink to this headline">¶</a></h2>
<p>On Cisco network devices, the syslog protocol starts by <strong>sending system messages and debug output to a local logging process internal to the device</strong>.
<strong>How the logging process manages these messages and outputs is based on device configurations</strong>. For example, syslog messages may be sent across the network to an external syslog server. These messages can be retrieved without the need of accessing the actual device. Log messages and outputs stored on the external server can be pulled into various reports for easier reading.</p>
<p>Alternatively, syslog messages may be sent to an internal buffer. Messages sent to the <strong>internal buffer</strong> are only viewable through the CLI of the device.</p>
<p>Finally, the network administrator may specify that only certain types of system messages are sent to various destinations. For example, the device may be configured to forward all system messages to an external syslog server. However, debug-level messages are forwarded to the internal buffer and are only accessible by the administrator from the CLI.</p>
<dl class="docutils">
<dt>popular destinations for syslog messages include</dt>
<dd><ul class="first last simple">
<li>Logging buffer (RAM inside a router or switch)</li>
<li>Console line</li>
<li>Terminal line</li>
<li>Syslog server</li>
</ul>
</dd>
</dl>
<p>It is possible to remotely monitor system messages by viewing the logs on a syslog server, or by accessing the device through Telnet, SSH, or through the console port.</p>
</div>
<div class="section" id="syslog-rfcs">
<h2>Syslog RFCs<a class="headerlink" href="#syslog-rfcs" title="Permalink to this headline">¶</a></h2>
<table border="1" class="docutils">
<colgroup>
<col width="85%" />
<col width="15%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">syslog relation</th>
<th class="head">RFC</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>The BSD syslog Protocol (obsoleted by RFC 5424)</td>
<td><a href="#id1"><span class="problematic" id="id2">`rfc 3164`_</span></a></td>
</tr>
<tr class="row-odd"><td>Reliable Delivery for syslog</td>
<td><a href="#id3"><span class="problematic" id="id4">`rfc 3195`_</span></a></td>
</tr>
<tr class="row-even"><td>The Syslog Protocol</td>
<td><a href="#id5"><span class="problematic" id="id6">`rfc 5424`_</span></a></td>
</tr>
<tr class="row-odd"><td>TLS Transport Mapping for Syslog</td>
<td><a href="#id7"><span class="problematic" id="id8">`rfc 5425`_</span></a></td>
</tr>
<tr class="row-even"><td>Transmission of Syslog Messages over UDP</td>
<td><a href="#id9"><span class="problematic" id="id10">`rfc 5426`_</span></a></td>
</tr>
<tr class="row-odd"><td>Textual Conventions for Syslog Management</td>
<td><a href="#id11"><span class="problematic" id="id12">`rfc 5427`_</span></a></td>
</tr>
<tr class="row-even"><td>Signed Syslog Messages</td>
<td><a href="#id13"><span class="problematic" id="id14">`rfc 5848`_</span></a></td>
</tr>
<tr class="row-odd"><td>Datagram Transport Layer Security (DTLS) Transport Mapping for Syslog</td>
<td><a href="#id15"><span class="problematic" id="id16">`rfc 6012`_</span></a></td>
</tr>
<tr class="row-even"><td>Transmission of Syslog Messages over TCP</td>
<td><a href="#id17"><span class="problematic" id="id18">`rfc 6587`_</span></a></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="severity-level">
<h2>Severity level<a class="headerlink" href="#severity-level" title="Permalink to this headline">¶</a></h2>
<p>The list of severities is also defined by <a href="#id19"><span class="problematic" id="id20">`rfc 5424`_</span></a></p>
<table border="1" class="docutils">
<colgroup>
<col width="6%" />
<col width="13%" />
<col width="8%" />
<col width="13%" />
<col width="62%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">value</th>
<th class="head">severity</th>
<th class="head">keyword</th>
<th class="head">depr. keyword</th>
<th class="head">description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>0</td>
<td>Emergency</td>
<td>emerg</td>
<td>panic</td>
<td>System is unusable
A panic condition</td>
</tr>
<tr class="row-odd"><td>1</td>
<td>Alert</td>
<td>alert</td>
<td>&#160;</td>
<td>Action must be taken immediately
A condition that should be corrected immediately, such as a corrupted DB</td>
</tr>
<tr class="row-even"><td>2</td>
<td>Critical</td>
<td>crit</td>
<td>&#160;</td>
<td>Critical conditions, such as hard device errors</td>
</tr>
<tr class="row-odd"><td>3</td>
<td>Error</td>
<td>err</td>
<td>error</td>
<td>Error conditions</td>
</tr>
<tr class="row-even"><td>4</td>
<td>Warning</td>
<td>warning</td>
<td>warn</td>
<td>Warning conditions</td>
</tr>
<tr class="row-odd"><td>5</td>
<td>Notice</td>
<td>notice</td>
<td>&#160;</td>
<td>Normal but significant conditions
Conditions that aren’t error conditions but require special handling</td>
</tr>
<tr class="row-even"><td>6</td>
<td>Informational</td>
<td>info</td>
<td>&#160;</td>
<td>Informational messages</td>
</tr>
<tr class="row-odd"><td>7</td>
<td>Debug</td>
<td>debug</td>
<td>&#160;</td>
<td>Debug-level messages
Messages that contain information of use only when debugging a program</td>
</tr>
</tbody>
</table>
<img alt="../../../_images/Ch10_Syslog_Severity_Level.png" src="../../../_images/Ch10_Syslog_Severity_Level.png" />
<img alt="../../../_images/Ch10_Syslog_Message_Format.png" src="../../../_images/Ch10_Syslog_Message_Format.png" />
<p>The meaning of severity levels other than Emergency and Debug are relative to the application. For example, if the purpose of the system is to process transactions to update customer account balance information, an error in the final step should be assigned Alert level. However, an error occurring in an attempt to display the ZIP code of the customer may be assigned Error or even Warning level.</p>
<p>The server process which handles the message (syslogd) usually includes all lower (more severe) levels. That is, if messages are separated by individual severity, a Warning level entry will also be included in Notice, Info and Debug processing.</p>
<p>In addition to specifying the severity, syslog messages also contain information on the facility. Syslog facilities are service identifiers that identify and categorize system state data for error and event message reporting. The logging facility options that are available are specific to the networking device. For example, Cisco 2960 Series switches running Cisco IOS Release 15.0(2) and Cisco 1941 routers running Cisco IOS Release 15.2(4) support 24 facility options that are categorized into 12 facility types.</p>
<p>Some common syslog message facilities reported on Cisco IOS routers include</p>
<ul class="simple">
<li>IP</li>
<li>OSPF protocol</li>
<li>SYS operating system</li>
<li>IP security (IPsec)</li>
<li>Interface IP (IF)</li>
</ul>
<p>By default, the format of syslog messages on the Cisco IOS Software is as follows:</p>
<p><code class="docutils literal"><span class="pre">seq</span> <span class="pre">no:</span> <span class="pre">timestamp:</span> <span class="pre">%facility-severity-MNEMONIC:</span> <span class="pre">description</span></code></p>
<p>For example, sample output on a Cisco switch for an EtherChannel link changing state to up is:</p>
<p><code class="docutils literal"><span class="pre">00:00:46:</span> <span class="pre">%LINK-3-UPDOWN:</span> <span class="pre">Interface</span> <span class="pre">Port-channel1,</span> <span class="pre">changed</span> <span class="pre">state</span> <span class="pre">to</span> <span class="pre">up</span></code></p>
<p><strong>Facility-SecurityLvl-Mnemonic:</strong>
Here the facility is <strong>LINK</strong> and the severity level is <strong>3</strong>, with a MNEMONIC of <strong>UPDOWN</strong>.</p>
<p>The most common messages are link up and down messages, and messages that a device produces when it exits from configuration mode. If ACL logging is configured, the device generates syslog messages when packets match a parameter condition.</p>
</div>
<div class="section" id="adding-a-timestamp-to-syslog-messages">
<h2>Adding a timestamp to Syslog Messages<a class="headerlink" href="#adding-a-timestamp-to-syslog-messages" title="Permalink to this headline">¶</a></h2>
<div class="code highlight-default"><div class="highlight"><pre><span></span><span class="n">R1</span><span class="c1"># conf t</span>
<span class="n">R1</span><span class="p">(</span><span class="n">config</span><span class="p">)</span><span class="c1"># interface g0/0</span>
<span class="n">R1</span><span class="p">(</span><span class="n">config</span><span class="o">-</span><span class="k">if</span><span class="p">)</span><span class="c1"># shutdown</span>
<span class="o">%</span><span class="n">LINK</span><span class="o">-</span><span class="mi">5</span><span class="o">-</span><span class="n">CHANGED</span><span class="p">:</span> <span class="n">Interface</span> <span class="n">GigabitEthernet0</span><span class="o">/</span><span class="mi">0</span><span class="p">,</span> <span class="n">changed</span> <span class="n">state</span> <span class="n">to</span> <span class="n">administratively</span> <span class="n">down</span>
<span class="o">%</span><span class="n">LINEPROTO</span><span class="o">-</span><span class="mi">5</span><span class="o">-</span><span class="n">UPDOWN</span><span class="p">:</span> <span class="n">Line</span> <span class="n">protocol</span> <span class="n">on</span> <span class="n">Interface</span> <span class="n">GigabitEthernet0</span><span class="o">/</span><span class="mi">0</span><span class="p">,</span> <span class="n">changed</span> <span class="n">state</span> <span class="n">to</span> <span class="n">down</span>
<span class="n">R1</span><span class="p">(</span><span class="n">config</span><span class="o">-</span><span class="k">if</span><span class="p">)</span><span class="c1"># exit</span>
<span class="n">R1</span><span class="p">(</span><span class="n">config</span><span class="p">)</span><span class="c1"># service timestamps log datetime</span>
<span class="n">R1</span><span class="p">(</span><span class="n">config</span><span class="p">)</span><span class="c1"># interface g0/0</span>
<span class="n">R1</span><span class="p">(</span><span class="n">config</span><span class="o">-</span><span class="k">if</span><span class="p">)</span><span class="c1"># no shutdown</span>
<span class="o">*</span><span class="n">Mar</span>  <span class="mi">1</span> <span class="mi">11</span><span class="p">:</span><span class="mi">52</span><span class="p">:</span><span class="mi">42</span><span class="p">:</span> <span class="o">%</span><span class="n">LINK</span><span class="o">-</span><span class="mi">3</span><span class="o">-</span><span class="n">UPDOWN</span><span class="p">:</span> <span class="n">Interface</span> <span class="n">GigabitEthernet0</span><span class="o">/</span><span class="mi">0</span><span class="p">,</span> <span class="n">changed</span> <span class="n">state</span> <span class="n">to</span> <span class="n">down</span>
<span class="o">*</span><span class="n">Mar</span>  <span class="mi">1</span> <span class="mi">11</span><span class="p">:</span><span class="mi">52</span><span class="p">:</span><span class="mi">45</span><span class="p">:</span> <span class="o">%</span><span class="n">LINK</span><span class="o">-</span><span class="mi">3</span><span class="o">-</span><span class="n">UPDOWN</span><span class="p">:</span> <span class="n">Interface</span> <span class="n">GigabitEthernet0</span><span class="o">/</span><span class="mi">0</span><span class="p">,</span> <span class="n">changed</span> <span class="n">state</span> <span class="n">to</span> <span class="n">up</span>
<span class="o">*</span><span class="n">Mar</span>  <span class="mi">1</span> <span class="mi">11</span><span class="p">:</span><span class="mi">52</span><span class="p">:</span><span class="mi">46</span><span class="p">:</span> <span class="o">%</span><span class="n">LINEPROTO</span><span class="o">-</span><span class="mi">5</span><span class="o">-</span><span class="n">UPDOWN</span><span class="p">:</span> <span class="n">Line</span> <span class="n">protocol</span> <span class="n">on</span> <span class="n">Interface</span> <span class="n">GigabitEthernet0</span><span class="o">/</span><span class="mi">0</span><span class="p">,</span>
<span class="n">changed</span> <span class="n">state</span> <span class="n">to</span> <span class="n">up</span>
<span class="n">R1</span><span class="p">(</span><span class="n">config</span><span class="o">-</span><span class="k">if</span><span class="p">)</span><span class="c1">#</span>
</pre></div>
</div>
<p>Use the command <code class="docutils literal"><span class="pre">service</span> <span class="pre">timestamps</span> <span class="pre">log</span> <span class="pre">datetime</span></code> to <strong>force logged events to display the date and time</strong>
Above, when the R1 GigabitEthernet 0/0 interface is reactivated, the log messages now contain the date and time.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">when using the <strong>datetime</strong> keyword, the clock on the networking device must be set, manually or through NTP</p>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">the timestamp can include the date like <strong>Jun 12 22:09:44.643</strong></p>
</div>
<p>To view syslog messages, a syslog server must be installed on a workstation in the network.</p>
</div>
<div class="section" id="default-logging-service-settings">
<h2>Default Logging Service Settings<a class="headerlink" href="#default-logging-service-settings" title="Permalink to this headline">¶</a></h2>
<p>by default routers and switches send log messages for all security levels to the console
<code class="docutils literal"><span class="pre">logging</span> <span class="pre">console</span></code>
On some IOS version the device also <strong>buffers</strong> log messages
<code class="docutils literal"><span class="pre">logging</span> <span class="pre">buffered</span></code></p>
<p>The <code class="docutils literal"><span class="pre">show</span> <span class="pre">logging</span></code> command displays the default logging service settings on a cisco router.</p>
<img alt="../../../_images/Ch10_Show_logging.png" src="../../../_images/Ch10_Show_logging.png" />
<p>The first highlighted line states that this router logs to the console and includes debug messages. This actually means that <strong>all debug level messages, as well as any lower level messages (such as notification level messages), are logged to the console</strong>. On most Cisco IOS routers, the <strong>default severity level is 7, debugging</strong>. The output also notes that 32 such messages have been logged.</p>
<p>The second highlighted line states that this router logs to an internal buffer. Because this router has <strong>enabled logging to an internal buffer</strong>, the show logging command also lists the messages in that buffer. You can view some of the system messages that have been logged at the end of the output.</p>
</div>
<div class="section" id="syslog-configuration">
<h2>Syslog configuration<a class="headerlink" href="#syslog-configuration" title="Permalink to this headline">¶</a></h2>
<ol class="arabic">
<li><p class="first">configure destination hostname/IPv4 of the syslog server</p>
<div class="code highlight-default"><div class="highlight"><pre><span></span><span class="n">R1</span><span class="p">(</span><span class="n">config</span><span class="p">)</span><span class="c1"># logging 192.168.1.3</span>
</pre></div>
</div>
</li>
<li><p class="first">control messages to be sent to the syslog server with the <code class="docutils literal"><span class="pre">logging</span> <span class="pre">trap</span></code> command. E.g. 4 and lower(more severe) the msgs with a higher,less severe level are sent to console.</p>
<div class="code highlight-default"><div class="highlight"><pre><span></span><span class="n">R1</span><span class="p">(</span><span class="n">config</span><span class="p">)</span><span class="c1"># logging trap 4</span>
</pre></div>
</div>
</li>
<li><p class="first">Optionally configure the source IF with <code class="docutils literal"><span class="pre">logging</span> <span class="pre">source-interface</span> <span class="pre">if-type</span> <span class="pre">if-number</span></code>. This specifies that <strong>syslog packets shall contain the IP of this interface</strong> regardless of what IF the packet uses to exit the router</p>
<div class="code highlight-default"><div class="highlight"><pre><span></span><span class="n">R1</span><span class="p">(</span><span class="n">config</span><span class="p">)</span><span class="c1"># logging source-interface GigabitEthernet 0/0</span>
</pre></div>
</div>
</li>
</ol>
</div>
<div class="section" id="verifying-syslog">
<h2>Verifying Syslog<a class="headerlink" href="#verifying-syslog" title="Permalink to this headline">¶</a></h2>
<div class="code highlight-default"><div class="highlight"><pre><span></span><span class="n">R1</span><span class="c1"># show logging | include changed state to up</span>
<span class="n">R1</span><span class="c1"># show logging | begin June 12 22:35</span>
</pre></div>
</div>
<div class="section" id="filter-logging-with-specific-date">
<h3>filter logging with specific date<a class="headerlink" href="#filter-logging-with-specific-date" title="Permalink to this headline">¶</a></h3>
<div class="code highlight-default"><div class="highlight"><pre><span></span><span class="n">Oct</span> <span class="mi">30</span> <span class="mi">20</span><span class="p">:</span><span class="mi">44</span><span class="p">:</span><span class="mf">42.941</span> <span class="n">UTC</span><span class="p">:</span> <span class="o">%</span><span class="n">LINK</span><span class="o">-</span><span class="mi">3</span><span class="o">-</span><span class="n">UPDOWN</span><span class="p">:</span> <span class="n">Interface</span> <span class="n">Serial3</span><span class="o">/</span><span class="mi">1</span><span class="o">/</span><span class="mf">0.6</span><span class="o">/</span><span class="mi">3</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span> <span class="n">changed</span> <span class="n">state</span> <span class="n">to</span> <span class="n">down</span>
<span class="n">show</span> <span class="n">logging</span> <span class="o">|</span> <span class="n">include</span> <span class="p">(</span><span class="n">Oct</span> <span class="mi">30</span> <span class="mi">20</span><span class="p">:</span><span class="mi">44</span><span class="p">)</span><span class="o">..*</span><span class="p">(</span><span class="mi">3</span><span class="o">/</span><span class="mi">1</span><span class="o">/</span><span class="mf">0.6</span><span class="o">/</span><span class="mi">3</span><span class="p">:</span><span class="mi">0</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="capturing-traffic-epc">
<h3>capturing traffic &amp; EPC<a class="headerlink" href="#capturing-traffic-epc" title="Permalink to this headline">¶</a></h3>
<dl class="docutils">
<dt>To capture what’s happening</dt>
<dd><p class="first">To capture what’s happening on each router you can use debug ip icmp detail and debug ip packet detail, increase the buffers and record it or send it to the console and view it in real time , if your coming over the vty log to the monitor or use term mon  which replicates like logging to the console either , logging to monitor is on by default in ios so you will see debug if you enable for a specific  feature even if buffer is not set, other than that you could setup span session and capture the traffic on either side in wireshark</p>
<p class="last">Again syslog is on by default in ios it can’t be disabled but if you don’t have logging host set it won’t actually do anything</p>
</dd>
<dt>Embedded Packet Capture (EPC)</dt>
<dd>Embedded Packet Capture (EPC) is an onboard packet capture facility that allows network administrators to capture packets flowing to, through, and from the device and to analyze them locally or save and export them for offline analysis by using a tool such as Wireshark. This feature simplifies network operations by allowing devices to become active participants in the management and operation of the network. This feature facilitates troubleshooting by gathering information about the packet format. This feature also facilitates application analysis and security.</dd>
</dl>
</div>
</div>
<div class="section" id="pt-configure-syslog-ntp">
<h2>PT Configure Syslog &amp; NTP<a class="headerlink" href="#pt-configure-syslog-ntp" title="Permalink to this headline">¶</a></h2>
<img alt="../../../_images/Ch10_PT_Syslog_NTP.png" src="../../../_images/Ch10_PT_Syslog_NTP.png" />
<ol class="arabic">
<li><p class="first">enable the syslog service on the syslog server via services tab
Turn it on and move the window so you can monitor actively</p>
</li>
<li><p class="first">Configure intermediary devices to use the syslog server</p>
<ul>
<li><p class="first">Configure R1 to send log events</p>
<div class="code highlight-default"><div class="highlight"><pre><span></span><span class="n">R1</span><span class="p">(</span><span class="n">config</span><span class="p">)</span><span class="c1">#logging ?</span>
<span class="n">A</span><span class="o">.</span><span class="n">B</span><span class="o">.</span><span class="n">C</span><span class="o">.</span><span class="n">D</span>   <span class="n">IP</span> <span class="n">address</span> <span class="n">of</span> <span class="n">the</span> <span class="n">logging</span> <span class="n">host</span>
<span class="n">buffered</span>  <span class="n">Set</span> <span class="n">buffered</span> <span class="n">logging</span> <span class="n">parameters</span>
<span class="n">console</span>   <span class="n">Set</span> <span class="n">console</span> <span class="n">logging</span> <span class="n">parameters</span>
<span class="n">host</span>      <span class="n">Set</span> <span class="n">syslog</span> <span class="n">server</span> <span class="n">IP</span> <span class="n">address</span> <span class="ow">and</span> <span class="n">parameters</span>
<span class="n">on</span>        <span class="n">Enable</span> <span class="n">logging</span> <span class="n">to</span> <span class="nb">all</span> <span class="n">enabled</span> <span class="n">destinations</span>
<span class="n">trap</span>      <span class="n">Set</span> <span class="n">syslog</span> <span class="n">server</span> <span class="n">logging</span> <span class="n">level</span>
<span class="n">userinfo</span>  <span class="n">Enable</span> <span class="n">logging</span> <span class="n">of</span> <span class="n">user</span> <span class="n">info</span> <span class="n">on</span> <span class="n">privileged</span> <span class="n">mode</span> <span class="n">enabling</span>

<span class="n">R1</span><span class="p">(</span><span class="n">config</span><span class="p">)</span><span class="c1"># logging 10.0.1.254</span>
<span class="n">R1</span><span class="p">(</span><span class="n">config</span><span class="p">)</span><span class="c1">#exit</span>
<span class="n">R1</span><span class="c1">#</span>
<span class="o">%</span><span class="n">SYS</span><span class="o">-</span><span class="mi">5</span><span class="o">-</span><span class="n">CONFIG_I</span><span class="p">:</span> <span class="n">Configured</span> <span class="kn">from</span> <span class="nn">console</span> <span class="n">by</span> <span class="n">console</span>
<span class="o">%</span><span class="n">SYS</span><span class="o">-</span><span class="mi">6</span><span class="o">-</span><span class="n">LOGGINGHOST_STARTSTOP</span><span class="p">:</span> <span class="n">Logging</span> <span class="n">to</span> <span class="n">host</span> <span class="mf">10.0</span><span class="o">.</span><span class="mf">1.254</span> <span class="n">port</span> <span class="mi">514</span> <span class="n">started</span> <span class="o">-</span> <span class="n">CLI</span> <span class="n">initiated</span>
</pre></div>
</div>
</li>
<li><p class="first">Configure S1 and S2 to send event to syslog server</p>
</li>
</ul>
</li>
<li><p class="first">Change the status of interfaces to create event logs</p>
<ul class="simple">
<li>configure a loopback 0 interface on R1 then disable it</li>
<li>turn off PC1 and PC2 and then turn them on again</li>
</ul>
</li>
<li><p class="first">examine the syslog events.</p>
<ul class="simple">
<li>The timestamps are incorrect!</li>
<li>Clear the log before proceeding</li>
</ul>
</li>
<li><p class="first">manually set the clocks on the switches to the current date and time</p>
<div class="code highlight-default"><div class="highlight"><pre><span></span><span class="n">S2</span><span class="c1">#clock set 14:57:33 September 5 2017</span>
<span class="n">S1</span><span class="c1">#clock set 15:00:00 September 5 2017</span>
</pre></div>
</div>
</li>
<li><p class="first">Enable the logging timestamp <strong>service</strong> on the switches</p>
<ul>
<li><p class="first">Configure S1 and S2 to send its timestamp with logs it sends to the syslog server</p>
<div class="code highlight-default"><div class="highlight"><pre><span></span><span class="n">S1</span><span class="p">(</span><span class="n">config</span><span class="p">)</span><span class="c1"># service timestamps log datetime msec</span>
<span class="n">S2</span><span class="p">(</span><span class="n">config</span><span class="p">)</span><span class="c1"># service timestamps log datetime msec</span>
</pre></div>
</div>
</li>
</ul>
</li>
<li><p class="first">Configure NTP Service (public ntp server). If server was private, authentication could also be used</p>
<ul>
<li><p class="first">Open the services tab of the NTP server</p>
</li>
<li><p class="first">Turn the NTP service on and not the date and time</p>
</li>
<li><p class="first">Automatically set the clock on R1 w date &amp; time according to NTP server</p>
<div class="code highlight-default"><div class="highlight"><pre><span></span><span class="n">R1</span><span class="p">(</span><span class="n">config</span><span class="p">)</span><span class="c1"># ntp server 64.103.224.2</span>
</pre></div>
</div>
</li>
<li><p class="first">Configure R1 to send its timestamp with the logs that it sends to the Syslog server</p>
<div class="code highlight-default"><div class="highlight"><pre><span></span><span class="n">R1</span><span class="p">(</span><span class="n">config</span><span class="p">)</span><span class="c1">#service timestamps log datetime msec</span>
</pre></div>
</div>
</li>
</ul>
</li>
<li><p class="first">Verify timestamped logs</p>
<ul class="simple">
<li>re-enable and then disable the Loopback 0 interface on R1</li>
<li>turn off laptops L1 and L2. Turn them on again.</li>
<li>Look at the syslog events</li>
</ul>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">R1 uses the clock settings from the NTP server, S1 and S2 the clock settings configured by you</p>
</div>
<img alt="../../../_images/Ch10_Syslog_Service_Entries.png" src="../../../_images/Ch10_Syslog_Service_Entries.png" />
<p>That is one badly configured NTP server :p</p>
</li>
</ol>
</div>
<div class="section" id="lab-configuring-syslog-ntp">
<h2>LAB Configuring syslog &amp; NTP<a class="headerlink" href="#lab-configuring-syslog-ntp" title="Permalink to this headline">¶</a></h2>
<img alt="../../../_images/Ch10_Lab_syslog_NTP.png" src="../../../_images/Ch10_Lab_syslog_NTP.png" />
<p>Addressing Table</p>
<table border="1" class="docutils">
<colgroup>
<col width="13%" />
<col width="22%" />
<col width="19%" />
<col width="27%" />
<col width="19%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Device</th>
<th class="head">Interface</th>
<th class="head">IP Address</th>
<th class="head">Subnet Mask</th>
<th class="head">Default GW</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>R1</td>
<td>S0/0/0 (DCE)</td>
<td>10.1.1.1</td>
<td>255.255.255.252</td>
<td>N/A</td>
</tr>
<tr class="row-odd"><td>R2</td>
<td>S0/0/0</td>
<td>10.1.1.2</td>
<td>255.255.255.252</td>
<td>N/A</td>
</tr>
<tr class="row-even"><td>&#160;</td>
<td>G0/0</td>
<td>172.16.2.1</td>
<td>255.255.255.0</td>
<td>N/A</td>
</tr>
<tr class="row-odd"><td>PC-B</td>
<td>NIC</td>
<td>172.16.2.3</td>
<td>255.255.255.0</td>
<td>172.16.2.1</td>
</tr>
</tbody>
</table>
<p>In this lab, you will configure R1 as the NTP server and R2 as a Syslog and NTP client. The syslog server application, such as Tftp32d or other similar program, will be running on PC-B. Furthermore, you will control the severity level of log messages that are collected and archived on the syslog server.
Note: The routers used with CCNA hands-on labs are Cisco 1941 Integrated Services Routers (ISRs) with Cisco IOS Release 15.2(4)M3 (universal k9 image). Other routers and Cisco IOS versions can be used.</p>
<ol class="arabic">
<li><p class="first">Console into the router and enter global configuration mode.</p>
<ul>
<li><p class="first">Copy the following basic configuration and paste it to the running-configuration on the router.</p>
<div class="code highlight-default"><div class="highlight"><pre><span></span><span class="n">no</span> <span class="n">ip</span> <span class="n">domain</span><span class="o">-</span><span class="n">lookup</span>
<span class="n">service</span> <span class="n">password</span><span class="o">-</span><span class="n">encryption</span>
<span class="n">enable</span> <span class="n">secret</span> <span class="k">class</span>
<span class="nc">banner</span> <span class="n">motd</span> <span class="c1">#</span>
<span class="n">Unauthorized</span> <span class="n">access</span> <span class="ow">is</span> <span class="n">strictly</span> <span class="n">prohibited</span><span class="o">.</span> <span class="c1">#</span>
<span class="n">line</span> <span class="n">con</span> <span class="mi">0</span>
<span class="n">password</span> <span class="n">cisco</span>
<span class="n">login</span>
<span class="n">logging</span> <span class="n">synchronous</span>
<span class="n">line</span> <span class="n">vty</span> <span class="mi">0</span> <span class="mi">4</span>
<span class="n">password</span> <span class="n">cisco</span>
<span class="n">login</span>
</pre></div>
</div>
</li>
<li><p class="first">Configure the hostname as shown</p>
</li>
<li><p class="first">Apply the IP addresses to Serial and Gig interfaces according to table and activate them</p>
</li>
<li><p class="first">set the clock rate to 128000 for the DCE serial interface</p>
</li>
</ul>
</li>
<li><p class="first">Configure routing</p>
<ul class="simple">
<li>Enable RIPv2 on the routers. Add all the networks into the RIPv2 process</li>
</ul>
</li>
<li><p class="first">Configure IP and Default GW for PC-B</p>
</li>
<li><p class="first">Verify end-to-end connectivity</p>
</li>
<li><p class="first">Save running-config to startup-config</p>
</li>
<li><p class="first">Configure NTP</p>
<ul>
<li><p class="first">Configure R1 as the NTP Server and R2 as the NTP client of R1. Synchronized time is important for Syslog and debug functions</p>
</li>
<li><p class="first">Display the current time</p>
<div class="code highlight-default"><div class="highlight"><pre><span></span><span class="n">R1</span><span class="c1">#show clock</span>
</pre></div>
</div>
</li>
<li><p class="first">Set the time. Use the clock set command</p>
<div class="code highlight-default"><div class="highlight"><pre><span></span><span class="n">R1</span><span class="c1"># clock set 15:45:00 5 october 2017</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The time can also be set using the clock timezone command in the global configuration mode. For more information regarding this command, research the clock timezone command at <a href="#id21"><span class="problematic" id="id22">`cisco timezone`_</span></a> to determine the zone for your region. UTC+1 <code class="docutils literal"><span class="pre">clock</span> <span class="pre">timezone</span> <span class="pre">WEST</span> <span class="pre">+1</span></code> configure summertime <code class="docutils literal"><span class="pre">Router(config)#</span> <span class="pre">clock</span> <span class="pre">summer-time</span> <span class="pre">WEST</span> <span class="pre">recurring</span></code></p>
</div>
</li>
<li><p class="first">Configure the NTP master
Use the <code class="docutils literal"><span class="pre">ntp</span> <span class="pre">master</span> <span class="pre">stratum--hopcountnumber</span></code>. NTP hops away from an authoritative time source.</p>
<div class="code highlight-default"><div class="highlight"><pre><span></span><span class="n">R1</span><span class="p">(</span><span class="n">config</span><span class="p">)</span><span class="c1"># ntp master 5</span>
</pre></div>
</div>
</li>
<li><p class="first">Configure the NTP client</p>
<div class="code highlight-default"><div class="highlight"><pre><span></span><span class="n">R2</span><span class="p">(</span><span class="n">config</span><span class="p">)</span><span class="c1"># ntp server 10.1.1.1</span>
<span class="n">R2</span><span class="p">(</span><span class="n">config</span><span class="p">)</span><span class="c1"># ntp update-calendar</span>
</pre></div>
</div>
<p>the <code class="docutils literal"><span class="pre">ntp</span> <span class="pre">update-calendar</span></code> command periodically updates the calendar with NTP time</p>
</li>
<li><p class="first">Verify NTP configuration</p>
<div class="code highlight-default"><div class="highlight"><pre><span></span><span class="n">R2</span><span class="c1"># show ntp associations</span>
</pre></div>
</div>
</li>
<li><p class="first">Issue show clock on R1 and R2 to compare the timestamp</p>
<div class="code highlight-default"><div class="highlight"><pre><span></span><span class="n">R1</span><span class="c1"># show clock</span>
<span class="n">R2</span><span class="c1"># show clock</span>
</pre></div>
</div>
</li>
</ul>
</li>
<li><p class="first">Configure Syslog</p>
<ul>
<li><p class="first">install a syslog server on the pc</p>
</li>
<li><p class="first">start the syslog server on PC-B</p>
</li>
<li><p class="first">Verify that the timestamp service is enabled on R2</p>
<div class="code highlight-default"><div class="highlight"><pre><span></span><span class="n">R2</span><span class="p">(</span><span class="n">config</span><span class="p">)</span><span class="c1"># show run | include timestamp</span>
<span class="n">service</span> <span class="n">timestamps</span> <span class="n">debug</span> <span class="n">datetime</span> <span class="n">msec</span>
<span class="n">service</span> <span class="n">timestamps</span> <span class="n">log</span> <span class="n">datetime</span> <span class="n">msec</span>

<span class="k">if</span> <span class="ow">not</span> <span class="n">enabled</span><span class="p">:</span>
<span class="n">R2</span><span class="p">(</span><span class="n">config</span><span class="p">)</span><span class="c1"># service timestamps log datetime msec</span>
</pre></div>
</div>
</li>
<li><p class="first">Configure R2 to send syslog messages to syslog server, PC-B</p>
<div class="code highlight-default"><div class="highlight"><pre><span></span><span class="n">R2</span><span class="p">(</span><span class="n">config</span><span class="p">)</span><span class="c1"># logging host 172.16.2.3</span>
</pre></div>
</div>
</li>
<li><p class="first">Display the default logging settings</p>
<div class="code highlight-default"><div class="highlight"><pre><span></span><span class="n">R2</span><span class="c1"># show logging</span>
</pre></div>
</div>
<ul class="simple">
<li>What is the IP address of the syslog server?</li>
<li>What protocol and port is syslog using?</li>
<li>At what level is trap logging enabled?</li>
</ul>
</li>
<li><p class="first">Configure and observe the effect of logging severity levels on R2</p>
<div class="code highlight-default"><div class="highlight"><pre><span></span><span class="n">R2</span><span class="p">(</span><span class="n">config</span><span class="p">)</span><span class="c1"># logging trap ?</span>
<span class="o">&lt;</span><span class="mi">0</span><span class="o">-</span><span class="mi">7</span><span class="o">&gt;</span>          <span class="n">Logging</span> <span class="n">severity</span> <span class="n">level</span>
<span class="n">alerts</span>         <span class="n">Immediate</span> <span class="n">action</span> <span class="n">needed</span>           <span class="p">(</span><span class="n">severity</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="n">critical</span>       <span class="n">Critical</span> <span class="n">conditions</span>               <span class="p">(</span><span class="n">severity</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
<span class="n">debugging</span>      <span class="n">Debugging</span> <span class="n">messages</span>                <span class="p">(</span><span class="n">severity</span><span class="o">=</span><span class="mi">7</span><span class="p">)</span>
<span class="n">emergencies</span>    <span class="n">System</span> <span class="ow">is</span> <span class="n">unusable</span>                <span class="p">(</span><span class="n">severity</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
<span class="n">errors</span>         <span class="n">Error</span> <span class="n">conditions</span>                  <span class="p">(</span><span class="n">severity</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>
<span class="n">informational</span>  <span class="n">Informational</span> <span class="n">messages</span>            <span class="p">(</span><span class="n">severity</span><span class="o">=</span><span class="mi">6</span><span class="p">)</span>
<span class="n">notifications</span>  <span class="n">Normal</span> <span class="n">but</span> <span class="n">significant</span> <span class="n">conditions</span> <span class="p">(</span><span class="n">severity</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>
<span class="n">warnings</span>       <span class="ne">Warning</span> <span class="n">conditions</span>                <span class="p">(</span><span class="n">severity</span><span class="o">=</span><span class="mi">4</span><span class="p">)</span>
<span class="o">&lt;</span><span class="n">cr</span><span class="o">&gt;</span>
</pre></div>
</div>
<ul>
<li><p class="first">if the <code class="docutils literal"><span class="pre">logging</span> <span class="pre">trap</span> <span class="pre">warnings</span></code> command was issued, what severity levels of msgs are logged?</p>
</li>
<li><p class="first">Change the logging severity level to 4</p>
<div class="code highlight-default"><div class="highlight"><pre><span></span><span class="n">R2</span><span class="p">(</span><span class="n">config</span><span class="p">)</span><span class="c1"># logging trap warnings</span>
<span class="ow">or</span>
<span class="n">R2</span><span class="p">(</span><span class="n">config</span><span class="p">)</span><span class="c1"># logging trap 4</span>
</pre></div>
</div>
</li>
</ul>
</li>
<li><p class="first">Create interface loopback 0 IF on R2 and observe the log messages on PC-B</p>
<div class="code highlight-default"><div class="highlight"><pre><span></span><span class="n">R2</span><span class="p">(</span><span class="n">config</span><span class="p">)</span><span class="c1"># interface lo 0</span>
<span class="n">R2</span><span class="p">(</span><span class="n">config</span><span class="o">-</span><span class="k">if</span><span class="p">)</span><span class="c1">#</span>
</pre></div>
</div>
</li>
<li><p class="first">Remove the loopback 0 IF on R2 and observe logs</p>
<div class="code highlight-default"><div class="highlight"><pre><span></span><span class="n">R2</span><span class="p">(</span><span class="n">config</span><span class="p">)</span><span class="c1"># no interface lo 0</span>
</pre></div>
</div>
<ul class="simple">
<li>At severity level 4, are there any log messages on the syslog server? If any log messages appeared, explain what appeared and why</li>
</ul>
</li>
<li><p class="first">Change the logging severity to 6</p>
<div class="code highlight-default"><div class="highlight"><pre><span></span><span class="n">R2</span><span class="p">(</span><span class="n">config</span><span class="p">)</span><span class="c1"># logging trap informational</span>
<span class="ow">or</span>
<span class="n">R2</span><span class="p">(</span><span class="n">config</span><span class="p">)</span><span class="c1"># logging trap 6</span>
</pre></div>
</div>
</li>
<li><p class="first">Clear the syslog entries on PC-B</p>
</li>
<li><p class="first">Create the loopback 1 IF on R2</p>
<div class="code highlight-default"><div class="highlight"><pre><span></span><span class="n">R2</span><span class="p">(</span><span class="n">config</span><span class="p">)</span><span class="c1"># interface loopback 1</span>
<span class="n">R2</span><span class="p">(</span><span class="n">config</span><span class="o">-</span><span class="k">if</span><span class="p">)</span><span class="c1"># no interface loopback 1</span>
</pre></div>
</div>
</li>
<li><p class="first">Observe the syslog server output. Compare the results with that at trapping lvl 4</p>
</li>
</ul>
</li>
</ol>
<dl class="docutils">
<dt>Reflection</dt>
<dd>What is the problem when setting the level of severity too high or too low for syslog?</dd>
</dl>
</div>
<div class="section" id="router-file-systems">
<h2>Router File Systems<a class="headerlink" href="#router-file-systems" title="Permalink to this headline">¶</a></h2>
<p>Cisco IOS File System (IFS)</p>
<p>Although there are several file systems listed, of interest to us will be the tftp, flash, and nvram file systems.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Note that the flash file system also has an asterisk preceding it. This indicates that flash is the current default file system. The bootable IOS is located in flash; therefore, the pound symbol (#) is appended to the flash listing, indicating that it is a bootable disk.</p>
</div>
<div class="code highlight-default"><div class="highlight"><pre><span></span><span class="n">Router</span><span class="c1"># show file systems</span>
<span class="n">Router</span><span class="c1"># dir</span>
<span class="n">Router</span><span class="c1"># pwd</span>
<span class="n">nvram</span><span class="p">:</span><span class="o">/</span>
<span class="n">Router</span><span class="c1"># dir</span>
<span class="n">Directory</span> <span class="n">of</span> <span class="n">nvram</span><span class="p">:</span><span class="o">/</span>
<span class="o">....</span>

<span class="n">Switch</span><span class="c1"># show file systems</span>
<span class="n">File</span> <span class="n">Systems</span><span class="p">:</span>
<span class="o">....</span>
</pre></div>
</div>
</div>
<div class="section" id="backing-up-and-restoring">
<h2>Backing up and restoring<a class="headerlink" href="#backing-up-and-restoring" title="Permalink to this headline">¶</a></h2>
<div class="section" id="backup-w-text-capture-eg-tera-term">
<h3>Backup w text capture (eg Tera Term)<a class="headerlink" href="#backup-w-text-capture-eg-tera-term" title="Permalink to this headline">¶</a></h3>
<ol class="arabic simple">
<li>On the File menu, click Log.</li>
<li>Choose the location to save the file. Tera Term will begin capturing text.</li>
<li>After capture has been started, execute the show running-config or show startup-config command at the privileged EXEC prompt. Text displayed in the terminal window will be directed to the chosen file.</li>
<li>When the capture is complete, select Close in the Tera Term: Log window.</li>
<li>View the file to verify that it was not corrupted.</li>
</ol>
<p>Restoring Text Configurations</p>
<p>A configuration can be copied from a file to a device. When copied from a text file and pasted into a terminal window, the IOS executes each line of the configuration text as a command. This means that the file will require editing to ensure that encrypted passwords are in plain text and that non-command text such as “–More–” and IOS messages are removed. This process is discussed in the lab.</p>
<p>Further, at the CLI, the device must be set at the global configuration mode to receive the commands from the text file being pasted into the terminal window.</p>
<p>When using Tera Term, the steps are:</p>
<ol class="arabic simple">
<li>On the File menu, click Send file.</li>
<li>Locate the file to be copied into the device and click Open.</li>
<li>Tera Term will paste the file into the device.</li>
</ol>
<p>The text in the file will be applied as commands in the CLI and become the running configuration on the device. This is a convenient method for manually configuring a router.</p>
</div>
<div class="section" id="backup-configs-w-tftp">
<h3>Backup configs w TFTP<a class="headerlink" href="#backup-configs-w-tftp" title="Permalink to this headline">¶</a></h3>
<ol class="arabic simple">
<li>use the <code class="docutils literal"><span class="pre">copy</span> <span class="pre">running-config</span> <span class="pre">tftp</span></code> or <code class="docutils literal"><span class="pre">copy</span> <span class="pre">startup-config</span> <span class="pre">tftp</span></code> commands to backup the configs</li>
<li>use the <code class="docutils literal"><span class="pre">copy</span> <span class="pre">tftp</span> <span class="pre">running-config</span></code> or <code class="docutils literal"><span class="pre">copy</span> <span class="pre">tftp</span> <span class="pre">startup-config</span></code> commands to restore the configs</li>
</ol>
</div>
</div>
<div class="section" id="using-usb-ports">
<h2>Using USB ports<a class="headerlink" href="#using-usb-ports" title="Permalink to this headline">¶</a></h2>
<div class="code highlight-default"><div class="highlight"><pre><span></span><span class="n">R1</span><span class="c1"># dir usbflash0:</span>
<span class="n">Directory</span> <span class="n">of</span> <span class="n">usbflash0</span><span class="p">:</span><span class="o">/</span>
<span class="mi">1</span> <span class="o">-</span><span class="n">rw</span><span class="o">-</span> <span class="mi">30125020</span> <span class="n">Dec</span> <span class="mi">22</span> <span class="mi">2032</span> <span class="mi">05</span><span class="p">:</span><span class="mi">22</span><span class="p">:</span><span class="mi">32</span> <span class="o">+</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span> <span class="n">c3825</span><span class="o">-</span><span class="n">entservicesk9</span><span class="o">-</span><span class="n">mz</span><span class="o">.</span><span class="mi">123</span><span class="o">-</span><span class="mf">14.</span><span class="n">T</span>
<span class="mi">63158272</span> <span class="nb">bytes</span> <span class="n">total</span> <span class="p">(</span><span class="mi">33033216</span> <span class="nb">bytes</span> <span class="n">free</span><span class="p">)</span>
</pre></div>
</div>
<p>you can use the <code class="docutils literal"><span class="pre">more</span></code> command to view the the contents</p>
<div class="code highlight-default"><div class="highlight"><pre><span></span><span class="n">R1</span><span class="c1"># more usbflash0:/R1-Config</span>
</pre></div>
</div>
<div class="section" id="backing-up-to-usb">
<h3>Backing up to USB<a class="headerlink" href="#backing-up-to-usb" title="Permalink to this headline">¶</a></h3>
<div class="code highlight-default"><div class="highlight"><pre><span></span>R1# copy running-config usbflash0:
Destination filename [running-config]? R1-Config
5024 bytes copied in 0.736 secs (6826 bytes/sec)
</pre></div>
</div>
</div>
<div class="section" id="restoring-from-usb">
<h3>Restoring from USB<a class="headerlink" href="#restoring-from-usb" title="Permalink to this headline">¶</a></h3>
<div class="code highlight-default"><div class="highlight"><pre><span></span><span class="n">R1</span><span class="c1"># copy usbflash0:/R1-Config running-config</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="password-recovery">
<h2>Password Recovery<a class="headerlink" href="#password-recovery" title="Permalink to this headline">¶</a></h2>
<ol class="arabic">
<li><p class="first">Enter rommon mode</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">With console access, a user can access the ROMMON mode by using a break sequence during the boot up process or removing the external flash memory when the device is powered off.</p>
</div>
</li>
<li><p class="first">Change the configuration register to <code class="docutils literal"><span class="pre">0x2142</span></code> to ignore the startup-config file</p>
<div class="code highlight-default"><div class="highlight"><pre><span></span><span class="n">monitor</span><span class="p">:</span> <span class="n">command</span> <span class="s2">&quot;boot&quot;</span> <span class="n">aborted</span> <span class="n">due</span> <span class="n">to</span> <span class="n">user</span> <span class="n">interrupt</span>
<span class="n">rommon</span> <span class="mi">1</span> <span class="o">&gt;</span> <span class="n">confreg</span> <span class="mh">0x2142</span>
<span class="n">rommon</span> <span class="mi">2</span> <span class="o">&gt;</span> <span class="n">reset</span>
</pre></div>
</div>
</li>
<li><p class="first">make necessary changes to original startup config file</p>
</li>
<li><p class="first">save those changes</p>
</li>
<li><p class="first">apply the changes and reset config-register to <code class="docutils literal"><span class="pre">0x2102</span></code> and <code class="docutils literal"><span class="pre">reload</span></code></p>
<div class="code highlight-default"><div class="highlight"><pre><span></span>Router# copy startup-config running-config
Destination filename [running-config]?

1450 bytes copied in 0.156 secs
Router# conf t
Router(config)# enable secret cisco
Router(config)# config-register 0x2102
Router(config)# end
Router# copy running-config startup-config
Destination filename [startup-config]?
Building configuration...
[OK]
Router# reload
</pre></div>
</div>
</li>
</ol>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Note that in rommon it’s <code class="docutils literal"><span class="pre">confreg</span> <span class="pre">0x2142</span></code> and in IOS it’s <code class="docutils literal"><span class="pre">config-register</span> <span class="pre">0x2102</span></code></p>
</div>
</div>
<div class="section" id="lab-managing-device-configuration-files">
<h2>Lab - Managing Device Configuration Files<a class="headerlink" href="#lab-managing-device-configuration-files" title="Permalink to this headline">¶</a></h2>
<ol class="arabic simple">
<li>Build the Network and Configure Basic Device Settings</li>
<li>(Optional) Download TFTP Server Software</li>
<li>Use TFTP to Back Up and Restore the Switch Running Configuration</li>
<li>Use TFTP to Back Up and Restore the Router Running Configuration</li>
<li>Back Up and Restore Running Configurations Using Router Flash Memory</li>
<li>(Optional) Use a USB Drive to Back Up and Restore the Running Configuration</li>
</ol>
<p>Addressing Table</p>
<table border="1" class="docutils">
<colgroup>
<col width="12%" />
<col width="17%" />
<col width="22%" />
<col width="23%" />
<col width="26%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Device</th>
<th class="head">Interface</th>
<th class="head">IP Address</th>
<th class="head">Subnet Mask</th>
<th class="head">Default Gateway</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>R1</td>
<td>G0/1</td>
<td>192.168.1.1</td>
<td>255.255.255.0</td>
<td>N/A</td>
</tr>
<tr class="row-odd"><td>S1</td>
<td>VLAN 1</td>
<td>192.168.1.11</td>
<td>255.255.255.0</td>
<td>192.168.1.1</td>
</tr>
<tr class="row-even"><td>PC-A</td>
<td>NIC</td>
<td>192.168.1.3</td>
<td>255.255.255.0</td>
<td>192.168.1.1</td>
</tr>
</tbody>
</table>
<div class="highlight-html"><div class="highlight"><pre><span></span>  g0/1    F0/5
R1 <span class="p">&lt;</span><span class="nt">--------</span><span class="p">&gt;</span> S1 <span class="p">&lt;</span><span class="nt">---------</span><span class="p">&gt;</span> PC-A
tftp            F0/6         tftp
client    tftp client        client
</pre></div>
</div>
<p>Configure basic device parameters as shown in the Addressing Table
To prevent the router and switch from attempting to translate incorrectly entered commands as though they were host names, disable DNS lookup
Assign class as the privileged EXEC encrypted password
Configure the passwords and allow login for console and vty lines using cisco as the password
Configure the default GW for S1
Encrypt clear txt passwords
Configure the IP - SM - GW for PC-A
Ping from PC-A to S1
Ping from PC-A to R1
Install and configure a TFTP server</p>
<p>The TFTP application uses the UDP Layer 4 transport protocol, which is encapsulated in an IP packet. For TFTP file transfers to function, there must be Layer 1 and 2 (Ethernet, in this case) and Layer 3 (IP) connectivity be tween the TFTP client and the TFTP server.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">A common misconception is that you can TFTP a file over the console connection. This is not the case because the console connection does not use IP. The TFTP transfer can be initiated from the client device (router or switch) using the console connection, but there must be IP connectivity between the client and server for the file transfer to take place.</p>
</div>
<div class="code highlight-default"><div class="highlight"><pre><span></span><span class="n">S1</span><span class="c1"># copy ?</span>
<span class="o">/</span><span class="n">erase</span>          <span class="n">Erase</span> <span class="n">destination</span> <span class="n">file</span> <span class="n">system</span><span class="o">.</span>
<span class="o">/</span><span class="n">error</span>          <span class="n">Allow</span> <span class="n">to</span> <span class="n">copy</span> <span class="n">error</span> <span class="n">file</span><span class="o">.</span>
<span class="o">/</span><span class="n">noverify</span>       <span class="n">Don</span><span class="s1">&#39;t verify image signature before reload.</span>
<span class="o">/</span><span class="n">verify</span>         <span class="n">Verify</span> <span class="n">image</span> <span class="n">signature</span> <span class="n">before</span> <span class="n">reload</span><span class="o">.</span>
<span class="n">archive</span><span class="p">:</span>        <span class="n">Copy</span> <span class="kn">from</span> <span class="nn">archive</span><span class="p">:</span> <span class="n">file</span> <span class="n">system</span>
<span class="n">cns</span><span class="p">:</span>            <span class="n">Copy</span> <span class="kn">from</span> <span class="nn">cns</span><span class="p">:</span> <span class="n">file</span> <span class="n">system</span>
<span class="n">flash0</span><span class="p">:</span>         <span class="n">Copy</span> <span class="kn">from</span> <span class="nn">flash0</span><span class="p">:</span> <span class="n">file</span> <span class="n">system</span>
<span class="n">flash1</span><span class="p">:</span>         <span class="n">Copy</span> <span class="kn">from</span> <span class="nn">flash1</span><span class="p">:</span> <span class="n">file</span> <span class="n">system</span>
<span class="n">flash</span><span class="p">:</span>          <span class="n">Copy</span> <span class="kn">from</span> <span class="nn">flash</span><span class="p">:</span> <span class="n">file</span> <span class="n">system</span>
<span class="n">ftp</span><span class="p">:</span>            <span class="n">Copy</span> <span class="kn">from</span> <span class="nn">ftp</span><span class="p">:</span> <span class="n">file</span> <span class="n">system</span>
<span class="n">http</span><span class="p">:</span>           <span class="n">Copy</span> <span class="kn">from</span> <span class="nn">http</span><span class="p">:</span> <span class="n">file</span> <span class="n">system</span>
<span class="n">https</span><span class="p">:</span>          <span class="n">Copy</span> <span class="kn">from</span> <span class="nn">https</span><span class="p">:</span> <span class="n">file</span> <span class="n">system</span>
<span class="n">null</span><span class="p">:</span>           <span class="n">Copy</span> <span class="kn">from</span> <span class="nn">null</span><span class="p">:</span> <span class="n">file</span> <span class="n">system</span>
<span class="n">nvram</span><span class="p">:</span>          <span class="n">Copy</span> <span class="kn">from</span> <span class="nn">nvram</span><span class="p">:</span> <span class="n">file</span> <span class="n">system</span>
<span class="n">rcp</span><span class="p">:</span>            <span class="n">Copy</span> <span class="kn">from</span> <span class="nn">rcp</span><span class="p">:</span> <span class="n">file</span> <span class="n">system</span>
<span class="n">running</span><span class="o">-</span><span class="n">config</span>  <span class="n">Copy</span> <span class="kn">from</span> <span class="nn">current</span> <span class="n">system</span> <span class="n">configuration</span>
<span class="n">scp</span><span class="p">:</span>            <span class="n">Copy</span> <span class="kn">from</span> <span class="nn">scp</span><span class="p">:</span> <span class="n">file</span> <span class="n">system</span>
<span class="n">startup</span><span class="o">-</span><span class="n">config</span>  <span class="n">Copy</span> <span class="kn">from</span> <span class="nn">startup</span> <span class="n">configuration</span>
<span class="n">system</span><span class="p">:</span>         <span class="n">Copy</span> <span class="kn">from</span> <span class="nn">system</span><span class="p">:</span> <span class="n">file</span> <span class="n">system</span>
<span class="n">tar</span><span class="p">:</span>            <span class="n">Copy</span> <span class="kn">from</span> <span class="nn">tar</span><span class="p">:</span> <span class="n">file</span> <span class="n">system</span>
<span class="n">tftp</span><span class="p">:</span>           <span class="n">Copy</span> <span class="kn">from</span> <span class="nn">tftp</span><span class="p">:</span> <span class="n">file</span> <span class="n">system</span>
<span class="n">tmpsys</span><span class="p">:</span>         <span class="n">Copy</span> <span class="kn">from</span> <span class="nn">tmpsys</span><span class="p">:</span> <span class="n">file</span> <span class="n">system</span>
<span class="n">xmodem</span><span class="p">:</span>         <span class="n">Copy</span> <span class="kn">from</span> <span class="nn">xmodem</span><span class="p">:</span> <span class="n">file</span> <span class="n">system</span>
<span class="n">ymodem</span><span class="p">:</span>         <span class="n">Copy</span> <span class="kn">from</span> <span class="nn">ymodem</span><span class="p">:</span> <span class="n">file</span> <span class="n">syste</span>

<span class="n">Router</span><span class="c1"># copy usbflash1: R1-running-config-backup.txt running-config</span>
</pre></div>
</div>
<p>The flash: file system for S1 is the source file system in this example.</p>
<div class="code highlight-default"><div class="highlight"><pre><span></span><span class="n">S1</span><span class="c1"># copy flash: ?</span>
<span class="n">archive</span><span class="p">:</span>        <span class="n">Copy</span> <span class="n">to</span> <span class="n">archive</span><span class="p">:</span> <span class="n">file</span> <span class="n">system</span>
<span class="n">flash0</span><span class="p">:</span>         <span class="n">Copy</span> <span class="n">to</span> <span class="n">flash0</span><span class="p">:</span> <span class="n">file</span> <span class="n">system</span>
<span class="n">flash1</span><span class="p">:</span>         <span class="n">Copy</span> <span class="n">to</span> <span class="n">flash1</span><span class="p">:</span> <span class="n">file</span> <span class="n">system</span>
<span class="n">flash</span><span class="p">:</span>          <span class="n">Copy</span> <span class="n">to</span> <span class="n">flash</span><span class="p">:</span> <span class="n">file</span> <span class="n">system</span>
<span class="n">ftp</span><span class="p">:</span>            <span class="n">Copy</span> <span class="n">to</span> <span class="n">ftp</span><span class="p">:</span> <span class="n">file</span> <span class="n">system</span>
<span class="n">http</span><span class="p">:</span>           <span class="n">Copy</span> <span class="n">to</span> <span class="n">http</span><span class="p">:</span> <span class="n">file</span> <span class="n">system</span>
<span class="n">https</span><span class="p">:</span>          <span class="n">Copy</span> <span class="n">to</span> <span class="n">https</span><span class="p">:</span> <span class="n">file</span> <span class="n">system</span>
<span class="n">idconf</span>          <span class="n">Load</span> <span class="n">an</span> <span class="n">IDConf</span> <span class="n">configuration</span> <span class="n">file</span>
<span class="n">null</span><span class="p">:</span>           <span class="n">Copy</span> <span class="n">to</span> <span class="n">null</span><span class="p">:</span> <span class="n">file</span> <span class="n">system</span>
<span class="n">nvram</span><span class="p">:</span>          <span class="n">Copy</span> <span class="n">to</span> <span class="n">nvram</span><span class="p">:</span> <span class="n">file</span> <span class="n">system</span>
<span class="n">rcp</span><span class="p">:</span>            <span class="n">Copy</span> <span class="n">to</span> <span class="n">rcp</span><span class="p">:</span> <span class="n">file</span> <span class="n">system</span>
<span class="n">running</span><span class="o">-</span><span class="n">config</span>  <span class="n">Update</span> <span class="p">(</span><span class="n">merge</span> <span class="k">with</span><span class="p">)</span> <span class="n">current</span> <span class="n">system</span> <span class="n">configuration</span>
<span class="n">scp</span><span class="p">:</span>            <span class="n">Copy</span> <span class="n">to</span> <span class="n">scp</span><span class="p">:</span> <span class="n">file</span> <span class="n">system</span>
<span class="n">startup</span><span class="o">-</span><span class="n">config</span>  <span class="n">Copy</span> <span class="n">to</span> <span class="n">startup</span> <span class="n">configuration</span>
<span class="n">syslog</span><span class="p">:</span>                  <span class="n">Copy</span> <span class="n">to</span> <span class="n">syslog</span><span class="p">:</span> <span class="n">file</span> <span class="n">system</span>
<span class="n">system</span><span class="p">:</span>         <span class="n">Copy</span> <span class="n">to</span> <span class="n">system</span><span class="p">:</span> <span class="n">file</span> <span class="n">system</span>
<span class="n">tftp</span><span class="p">:</span>           <span class="n">Copy</span> <span class="n">to</span> <span class="n">tftp</span><span class="p">:</span> <span class="n">file</span> <span class="n">system</span>
<span class="n">tmpsys</span><span class="p">:</span>         <span class="n">Copy</span> <span class="n">to</span> <span class="n">tmpsys</span><span class="p">:</span> <span class="n">file</span> <span class="n">system</span>
<span class="n">xmodem</span><span class="p">:</span>         <span class="n">Copy</span> <span class="n">to</span> <span class="n">xmodem</span><span class="p">:</span> <span class="n">file</span> <span class="n">system</span>
<span class="n">ymodem</span><span class="p">:</span>         <span class="n">Copy</span> <span class="n">to</span> <span class="n">ymodem</span><span class="p">:</span> <span class="n">file</span> <span class="n">system</span>
</pre></div>
</div>
<p>Enter the copy running-config tftp: command. Provide the remote host address of the TFTP server (PC-A), 192.168.1.3. Press Enter to accept default destination filename (s1-config) or provide your own filename. The exclamation marks (!!) indicate the transfer process is in progress and is successful.</p>
<div class="code highlight-default"><div class="highlight"><pre><span></span>S1# copy running-config tftp:
Address or name of remote host []?  192.168.1.3
Destination filename [s1-config]?
!!
1465 bytes copied in 0.663 secs (2210 bytes/sec)
S1#
</pre></div>
</div>
<p>The TFTP server also displays the progress during the transfer.
If you don’t have the required permissions you’ll get this error
%Error opening <a class="reference external" href="tftp://192.168.1.3/s1-config">tftp://192.168.1.3/s1-config</a> (Permission denied)</p>
<p>explore flash/usbflash as well</p>
<div class="code highlight-default"><div class="highlight"><pre><span></span><span class="n">R1</span><span class="c1"># copy running-config flash:</span>
<span class="n">R1</span><span class="c1"># dir flash:</span>
<span class="n">R1</span><span class="c1"># more flash:R1-running-config-backup</span>

<span class="n">R1</span><span class="c1"># show file systems</span>
<span class="n">R1</span><span class="c1"># copy running-config usbflash0:</span>
<span class="n">R1</span><span class="c1"># dir usbflash0:</span>
<span class="n">Router</span><span class="c1"># copy usbflash1: R1-running-config-backup.txt running-config</span>
</pre></div>
</div>
</div>
<div class="section" id="ios-15-system-image-packaging">
<h2>IOS 15 System Image Packaging<a class="headerlink" href="#ios-15-system-image-packaging" title="Permalink to this headline">¶</a></h2>
<img alt="../../../_images/Ch10_Packaging_Model_4_ISR_G2_Routers.png" src="../../../_images/Ch10_Packaging_Model_4_ISR_G2_Routers.png" />
<p>Cisco Integrated Services Routers Generation Two (ISR G2) 1900, 2900, and 3900 Series support services on demand through the use of software licensing. The Services on Demand process enables customers to realize operational savings through ease of software ordering and management. When an order is placed for a new ISR G2 platform, the router is shipped with a single universal Cisco IOS Software image and <strong>a license is used to enable the specific feature set packages</strong>, as shown in image above.</p>
<p>There are 2 types of universal images supported in ISR G2:</p>
<blockquote>
<div><ul class="simple">
<li>Universal images with the “universalk9” designation in the image name - This universal image offers all of the Cisco IOS Software features, including strong payload cryptography features, such as IPsec VPN, SSL VPN, and Secure Unified Communications.</li>
<li>Universal images with the “universalk9_npe” designation in the image name - The strong enforcement of encryption capabilities provided by Cisco Software Activation satisfies requirements for the export of encryption capabilities. However, some countries have import requirements that require that the platform does not support any strong cryptography functionality, such as payload cryptography. To satisfy the import requirements of those countries, the npe universal image does not support any strong payload encryption.</li>
</ul>
</div></blockquote>
<p>With the ISR G2 devices, IOS image selection has been made easier because all features are included within the universal image. Features are activated through licensing. Each device ships with Universal image. The technology packages IP Base, Data, UC (Unified Communications), and SEC (Security), are enabled in the universal image using Cisco Software Activation licensing keys. Each licensing key is unique to a particular device and is obtained from Cisco by providing the product ID and serial number of the router and a Product Activation Key (PAK). The PAK is provided by Cisco at the time of software purchase. The IP Base is installed by default.</p>
</div>
<div class="section" id="ios-image-filenames">
<h2>IOS Image Filenames<a class="headerlink" href="#ios-image-filenames" title="Permalink to this headline">¶</a></h2>
<img alt="../../../_images/Ch10_Software_Image_Name.png" src="../../../_images/Ch10_Software_Image_Name.png" />
<ul class="simple">
<li>Image Name (c1900) - Identifies the platform on which the image runs. In this example, the platform is a Cisco 1900 router.</li>
<li>universalk9 - Specifies the image designation. The two designations for an ISR G2 are universalk9 and universalk9_npe. Universalk9_npe does not contain strong encryption and is meant for countries with encryption restrictions. Features are controlled by licensing and can be divided into four technology packages. These are IP Base, Security, Unified Communications, and Data.</li>
<li>mz - Indicates where the image runs and if the file is compressed. In this example, mz indicates that the file runs from RAM and is compressed.</li>
<li>SPA - Designates that file is digitally signed by Cisco.</li>
<li>152-4.M3 - Specifies the filename format for the image 15.2(4)M3. This is the version of IOS, which includes the major release, minor release, maintenance release, and maintenance rebuild numbers. The M indicates this is an extended maintenance release.</li>
<li>bin - The file extension. This extension indicates that this file is a binary executable file.</li>
</ul>
<p>The most common designation for memory location and compression format is mz. The first letter indicates the location where the image is executed on the router. The locations can include:</p>
<blockquote>
<div><ul class="simple">
<li>f - flash</li>
<li>m - RAM</li>
<li>r - ROM</li>
<li>l - relocatable</li>
</ul>
</div></blockquote>
<p>The compression format can be either z for zip or x for mzip. Zipping is a method Cisco uses to compress some run-from-RAM images that is effective in reducing the size of the image. It is self-unzipping, so when the image is loaded into RAM for execution, the first action is to unzip.</p>
<p>Note: The Cisco IOS Software naming conventions, field meaning, image content, and other details are subject to change.</p>
<p>Memory Requirements</p>
<p>On most Cisco routers including the integrated services routers, the IOS is stored in compact flash as a compressed image and loaded into DRAM during boot-up. The Cisco IOS Software Release 15.0 images available for the Cisco 1900 and 2900 ISR require 256MB of flash and 512MB of RAM. The 3900 ISR requires 256MB of flash and 1GB of RAM. This does not include additional management tools such as Cisco Configuration Professional (Cisco CP). For complete details, refer to the product data sheet for the specific router.</p>
<p>to backup ios image <code class="docutils literal"><span class="pre">R1#</span> <span class="pre">copy</span> <span class="pre">flash0:</span> <span class="pre">tftp:</span></code>
to restore ios image <code class="docutils literal"><span class="pre">R1#</span> <span class="pre">copy</span> <span class="pre">tftp:</span> <span class="pre">flash0:</span></code></p>
</div>
<div class="section" id="boot-system-command">
<h2>boot system command<a class="headerlink" href="#boot-system-command" title="Permalink to this headline">¶</a></h2>
<p>To upgrade to the copied IOS image after that image is saved on the router’s flash memory, configure the router to load the new image during bootup using the <code class="docutils literal"><span class="pre">boot</span> <span class="pre">system</span></code> command
Verify with <code class="docutils literal"><span class="pre">show</span> <span class="pre">version</span></code></p>
<div class="code highlight-default"><div class="highlight"><pre><span></span><span class="n">R1</span><span class="c1"># configure terminal</span>
<span class="n">R1</span><span class="p">(</span><span class="n">config</span><span class="p">)</span><span class="c1"># boot system flash0://c1900-universalk9-mz.SPA.152-4.M3.bin</span>
<span class="n">R1</span><span class="p">(</span><span class="n">config</span><span class="p">)</span><span class="c1"># exit</span>
<span class="n">R1</span><span class="c1"># copy running-config startup-config</span>
<span class="n">R1</span><span class="c1"># reload</span>
</pre></div>
</div>
<p>Copy the IPBase with strong encryption IOS image (ipbasek9) for the 1841 router from the TFTP Server to R1</p>
<div class="code highlight-default"><div class="highlight"><pre><span></span>R1# copy tftp: flash:
Address or name of remote host []? 192.168.2.254
Source filename []?  c1841-ipbasek9-mz.124-12.bin
Destination filename [c1841-ipbasek9-mz.124-12.bin]?

Accessing tftp://192.168.2.254/c1841-ipbasek9-mz.124-12.bin....
Loading c1841-ipbasek9-mz.124-12.bin from 192.168.2.254:
!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
!!!!!!!!!!!!!!!!!!!!!!
!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
[OK - 16599160 bytes]

16599160 bytes copied in 3.44 secs (1079726 bytes/sec)
</pre></div>
</div>
<p>Verify that the IOS image has been copied to flash
How many IOS images are located in the flash:?</p>
<p>Use the <code class="docutils literal"><span class="pre">boot</span> <span class="pre">system</span></code> command to load the IPBase image on the next reload</p>
<div class="code highlight-default"><div class="highlight"><pre><span></span><span class="n">R1</span><span class="p">(</span><span class="n">config</span><span class="p">)</span><span class="c1"># boot system flash:c1841-ipbasek9-mz.124-12.bin</span>
<span class="n">Save</span> <span class="n">the</span> <span class="n">configuration</span> <span class="ow">and</span> <span class="n">reload</span> <span class="n">R1</span>

<span class="n">Verify</span> <span class="n">the</span> <span class="n">upgraded</span> <span class="n">IOS</span> <span class="n">image</span> <span class="ow">is</span> <span class="n">loaded</span> <span class="n">after</span> <span class="n">R1</span> <span class="n">reboots</span>
</pre></div>
</div>
</div>
<div class="section" id="technology-packages-licenses">
<h2>Technology Packages Licenses<a class="headerlink" href="#technology-packages-licenses" title="Permalink to this headline">¶</a></h2>
<p>What are the ISO v15 Feature sets (technology package) types we have now days with ISR G2:</p>
<ul class="simple">
<li>IP Base (ipbaseK9)come and running with any new ISR G2 routers (1900,2900,3900 Series), its entry level for Cisco IOS functionality
Offers features found in IP Base IOS image on ISR 1900, 2900, and 3900 + Flexible Netflow + IPv6 parity for IPv4 features present in IP Base. Some of the key features are AAA, BGP, OSPF, EIGRP, IS-IS, RIP, PBR, IGMP, Multicast, DHCP, HSRP, GLBP, NHRP, HTTP, HQF, QoS, ACL, NBAR, GRE, CDP, ARP, NTP, PPP, PPPoA, PPPoE, RADIUS, TACACS, SCTP, SMDS, SNMP, STP, VLAN, DTP, IGMP, Snooping, SPAN, WCCP, ISDN, ADSL over ISDN, NAT-Basic X.25, RSVP, NTP, Flexible Netflow, etc.</li>
<li>DATA (dataK9)support MPLS.ATM. Multiprotocol support
Data features found in SP Services and Enterprise Services IOS image on ISR 1900, 2900, and 3900 e.g. MPLS, BFD, RSVP, L2VPN, L2TPv3, Layer 2 Local Switching, Mobile IP, Multicast Authentication, FHRP-GLBP, IP SLAs, PfR, DECnet, ALPS, RSRB, BIP, DLSw+, FRAS, Token Ring, ISL, IPX, STUN, SNTP, SDLC, QLLC, etc.</li>
<li>Unified Commuincations (ucK9) support VOIP &amp; IP Telephony
Offers the UC Features found in IPVoice IOS image on ISR 1900, 2900, and 3900 e.g. TDM/PSTN Gateway, Video Gateway [H320/324], Voice Conferencing, Codec Transcoding, RSVP Agent (voice), FAX T.37/38, CAC/QOS, Hoot-n-Holler, etc.</li>
<li>Security (securityK9) support Cisco IOS Firewall , IPS , IPsec , 3DES, VPN
Offers the security features found in Advanced Security IOS image on ISR 1900, 2900, and 3900 e.g. IKE v1 / IPsec / PKI, IPsec/GRE, Easy VPN w/ DVTI, DMVPN, Static VTI, Firewall, Network Foundation Protection, GETVPN, etc.</li>
</ul>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The IP Base license is a prerequisite for installing the Data, Security, and Unified Communications licenses. For earlier router platforms that can support Cisco IOS Software release 15.0, a universal image is not available. It is necessary to download a separate image that contains the desired features.</p>
</div>
<p>Technology Package Licenses</p>
<p>Technology package licenses are supported on Cisco ISR G2 platforms (Cisco 1900, 2900, and 3900 Series routers). The Cisco IOS universal image contains all packages and features in one image. Each package is a grouping of technology-specific features. Multiple technology package licenses can be activated on the Cisco 1900, 2900, and 3900 series ISR platforms.</p>
<img alt="../../../_images/Ch10_Technology_Packages.png" src="../../../_images/Ch10_Technology_Packages.png" />
</div>
<div class="section" id="licensing-proces">
<h2>Licensing Proces<a class="headerlink" href="#licensing-proces" title="Permalink to this headline">¶</a></h2>
<img alt="../../../_images/Ch10_Licensing_Process.png" src="../../../_images/Ch10_Licensing_Process.png" />
<p>When a new router is shipped, it comes preinstalled with the software image and the corresponding permanent licenses for the customer-specified packages and features.</p>
<p>The router also comes with the evaluation license, known as a temporary license, for most packages and features supported on the specified router. This allows customers to try a new software package or feature by activating a specific evaluation license. If customers want to permanently activate a software package or feature on the router, they must get a new software license.</p>
<p>The figure shows the three steps to permanently activate a new software package or feature on the router.</p>
<p>for more info click here: <a href="#id23"><span class="problematic" id="id24">`cisco licensing`_</span></a></p>
<img alt="../../../_images/Ch10_license_purchase.png" src="../../../_images/Ch10_license_purchase.png" />
<ol class="arabic simple">
<li>purchase the software package or feature needed. This may be adding a package to IP Base, such as Security.<ul>
<li>Software Claim Certificates are used for licenses that require software activation. The claim certificate provides the Product Activation Key (PAK) for the license and important information regarding the Cisco End User License Agreement (EULA). In most instances, Cisco or the Cisco channel partner will have already activated the licenses ordered at the time of purchase and no Software Claim Certificate is provided.</li>
<li>In either instance, customers receive a PAK with their purchase. The PAK serves as a receipt and is used to obtain a license. A PAK is an 11 digit alpha numeric key created by Cisco manufacturing. It defines the Feature Set associated with the PAK. A PAK is not tied to a specific device until the license is created. A PAK can be purchased that generates any specified number of licenses. As shown in the figure, a separate license is required for each package, IP Base, Data, UC, and SEC.</li>
</ul>
</li>
<li>obtain the license, which is actually a license file. A license file, also known as a Software Activation License, is obtained using one of the following options:<ul>
<li>Cisco License Manager (CLM) - This is a free software application available at <a class="reference external" href="http://www.cisco.com/go/clm">http://www.cisco.com/go/clm</a>. Cisco License Manager is a standalone application from Cisco that helps network administrators rapidly deploy multiple Cisco software licenses across their networks. Cisco License Manager can discover network devices, view their license information, and acquire and deploy licenses from Cisco. The application provides a GUI that simplifies installation and helps automate license acquisition, as well as perform multiple licensing tasks from a central location. CLM is free of charge and can be downloaded from CCO.</li>
<li>Cisco License Registration Portal - This is the web-based portal for getting and registering individual software licenses, available at <a class="reference external" href="http://www.cisco.com/go/license">http://www.cisco.com/go/license</a>.</li>
</ul>
</li>
</ol>
<p>Both of these processes require a PAK number and a Unique Device Identifier (UDI).</p>
<p>The PAK is received during purchase.</p>
<p>The UDI is a combination of the Product ID (PID), the Serial Number (SN), and the hardware version. The SN is an 11 digit number which uniquely identifies a device. The PID identifies the type of device. Only the PID and SN are used for license creation. This UDI can be displayed using the show license udi command shown in Figure 1. This information is also available on a pull-out label tray found on the device. Figure 2 shows an example of the pull-out label on a Cisco 1941 router.</p>
<p>After entering the appropriate information, the customer receives an email containing the license information to install the license file. The license file is an XML text file with a .lic extension.</p>
<p><code class="docutils literal"><span class="pre">R2#</span> <span class="pre">show</span> <span class="pre">license</span> <span class="pre">udi</span></code></p>
<ol class="arabic">
<li><p class="first">Install the license</p>
<div class="code highlight-default"><div class="highlight"><pre><span></span><span class="n">R1</span><span class="c1"># license install flash0:security-CISCO1941-FHH12250057.xml</span>
<span class="o">...</span>
<span class="n">R1</span><span class="c1"># reload</span>
</pre></div>
</div>
</li>
<li><p class="first">Verify with <code class="docutils literal"><span class="pre">show</span> <span class="pre">version</span></code> and <code class="docutils literal"><span class="pre">show</span> <span class="pre">license</span></code></p>
</li>
<li><p class="first">Activate an evaluation right-to-use license</p>
<div class="code highlight-default"><div class="highlight"><pre><span></span><span class="n">R1</span><span class="p">(</span><span class="n">config</span><span class="p">)</span><span class="c1"># license accept end user agreement</span>
<span class="n">R1</span><span class="p">(</span><span class="n">config</span><span class="p">)</span><span class="c1"># license boot module c1900 technology-package datak9</span>
<span class="n">R1</span><span class="p">(</span><span class="n">config</span><span class="p">)</span><span class="c1"># show license</span>
</pre></div>
</div>
</li>
</ol>
<p>Use the <code class="docutils literal"><span class="pre">show</span> <span class="pre">license</span> <span class="pre">feature</span></code> command to view the technology package licenses and feature licenses supported on the router.</p>
<ol class="arabic">
<li><p class="first">Backup the license</p>
<div class="code highlight-default"><div class="highlight"><pre><span></span><span class="n">R1</span><span class="c1"># license save file-sys://lic-location</span>
<span class="n">R1</span><span class="c1"># license save flash0://all_licenses.lic</span>
<span class="n">R1</span><span class="c1"># show flash0:</span>
<span class="n">to</span> <span class="n">restore</span>
<span class="o">----------</span>
<span class="n">R1</span><span class="c1"># license install</span>
</pre></div>
</div>
</li>
</ol>
<p>To clear an active permanent license from the Cisco 1900 series, 2900 series, and 3900 series routers, perform the following steps:</p>
<blockquote>
<div><ol class="arabic">
<li><p class="first">Disable the technology package.</p>
<p>Disable the active license with the command:</p>
<p><code class="docutils literal"><span class="pre">Router(config)#</span> <span class="pre">license</span> <span class="pre">boot</span> <span class="pre">module</span> <span class="pre">module-name</span> <span class="pre">technology-package</span> <span class="pre">package-name</span> <span class="pre">disable</span></code></p>
<p>Reload the router using the reload command. A reload is required to make the software package inactive.</p>
</li>
<li><p class="first">Clear the license.</p>
<p>Clear the technology package license from license storage.</p>
<p><code class="docutils literal"><span class="pre">Router#</span> <span class="pre">license</span> <span class="pre">clear</span> <span class="pre">feature-name</span></code></p>
<p>Clear the license boot module command used for disabling the active license:</p>
<p><code class="docutils literal"><span class="pre">Router(config)#</span> <span class="pre">no</span> <span class="pre">license</span> <span class="pre">boot</span> <span class="pre">module</span> <span class="pre">module-name</span> <span class="pre">technology-package</span> <span class="pre">package-name</span> <span class="pre">disable</span></code></p>
</li>
</ol>
</div></blockquote>
<img alt="../../../_images/Ch10_clearing_license.png" src="../../../_images/Ch10_clearing_license.png" />
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Some licenses, such as built-in licenses, cannot be cleared. Only licenses that have been added by using the license install command are removed. Evaluation licenses are not removed.</p>
</div>
<p>A lesson on ios licensing here: <a href="#id25"><span class="problematic" id="id26">`cisco licensing_lesson`_</span></a></p>
</div>
<div class="section" id="ch10-skills-integration-challenge">
<h2>Ch10 Skills Integration Challenge<a class="headerlink" href="#ch10-skills-integration-challenge" title="Permalink to this headline">¶</a></h2>
<p>Addressing Table</p>
<table border="1" class="docutils">
<colgroup>
<col width="12%" />
<col width="16%" />
<col width="22%" />
<col width="25%" />
<col width="25%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Device</th>
<th class="head">Interface</th>
<th class="head">IP Address</th>
<th class="head">Subnet Mask</th>
<th class="head">Default Gateway</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>&#160;</td>
<td>G0/0.15</td>
<td>&#160;</td>
<td>&#160;</td>
<td>N/A</td>
</tr>
<tr class="row-odd"><td>&#160;</td>
<td>G0/0.30</td>
<td>&#160;</td>
<td>&#160;</td>
<td>N/A</td>
</tr>
<tr class="row-even"><td>&#160;</td>
<td>G0/0.45</td>
<td>&#160;</td>
<td>&#160;</td>
<td>N/A</td>
</tr>
<tr class="row-odd"><td>&#160;</td>
<td>G0/0.60</td>
<td>&#160;</td>
<td>&#160;</td>
<td>N/A</td>
</tr>
<tr class="row-even"><td>&#160;</td>
<td>S0/0/0</td>
<td>&#160;</td>
<td>255.255.255.252</td>
<td>N/A</td>
</tr>
<tr class="row-odd"><td>&#160;</td>
<td>S0/0/1</td>
<td>&#160;</td>
<td>255.255.255.252</td>
<td>N/A</td>
</tr>
<tr class="row-even"><td>&#160;</td>
<td>S0/1/0</td>
<td>&#160;</td>
<td>255.255.255.252</td>
<td>N/A</td>
</tr>
<tr class="row-odd"><td>&#160;</td>
<td>G0/0</td>
<td>&#160;</td>
<td>&#160;</td>
<td>N/A</td>
</tr>
<tr class="row-even"><td>&#160;</td>
<td>S0/0/0</td>
<td>&#160;</td>
<td>255.255.255.252</td>
<td>N/A</td>
</tr>
<tr class="row-odd"><td>&#160;</td>
<td>S0/0/1</td>
<td>&#160;</td>
<td>255.255.255.252</td>
<td>N/A</td>
</tr>
<tr class="row-even"><td>&#160;</td>
<td>G0/0</td>
<td>&#160;</td>
<td>&#160;</td>
<td>N/A</td>
</tr>
<tr class="row-odd"><td>&#160;</td>
<td>S0/0/0</td>
<td>&#160;</td>
<td>255.255.255.252</td>
<td>N/A</td>
</tr>
<tr class="row-even"><td>&#160;</td>
<td>S0/0/1</td>
<td>&#160;</td>
<td>255.255.255.252</td>
<td>N/A</td>
</tr>
<tr class="row-odd"><td>&#160;</td>
<td>VLAN 60</td>
<td>&#160;</td>
<td>&#160;</td>
<td>&#160;</td>
</tr>
<tr class="row-even"><td>&#160;</td>
<td>NIC</td>
<td>DHCP Assigned</td>
<td>DHCP Assigned</td>
<td>DHCP Assigned</td>
</tr>
</tbody>
</table>
<p>VLANs and Port Assignments Table</p>
<table border="1" class="docutils">
<colgroup>
<col width="43%" />
<col width="37%" />
<col width="20%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">VLAN Number - Name</th>
<th class="head">Port assignment</th>
<th class="head">Network</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>15 - Servers</td>
<td>F0/11 - F0/20</td>
<td>&#160;</td>
</tr>
<tr class="row-odd"><td>30 - PCs</td>
<td>F0/1 - F0/10</td>
<td>&#160;</td>
</tr>
<tr class="row-even"><td>45 - Native</td>
<td>G0/1</td>
<td>&#160;</td>
</tr>
<tr class="row-odd"><td>60 - Management</td>
<td>VLAN 60</td>
<td>&#160;</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="ch10-practice-exam">
<h2>Ch10 practice exam<a class="headerlink" href="#ch10-practice-exam" title="Permalink to this headline">¶</a></h2>
<ol class="arabic">
<li><p class="first">A ping fails when performed from router R1 to directly connected router R2. The network administrator then proceeds to issue the show cdp neighbors command. Why would the network administrator issue this command if the ping failed between the two routers?</p>
<ul class="simple">
<li>The network administrator suspects a virus because the ping command did not work.</li>
<li>The network administrator wants to verify Layer 2 connectivity.</li>
<li>The network administrator wants to verify the IP address configured on router R2.</li>
<li>The network administrator wants to determine if connectivity can be established from a non-directly connected network.</li>
<li>Answer -&gt; <span class="transparent">The network administrator wants to verify Layer 2 connectivity</span></li>
</ul>
</li>
<li><p class="first">Which statement is true about CDP on a Cisco device?</p>
<ul class="simple">
<li>The show cdp neighbor detail command will reveal the IP address of a neighbor only if there is Layer 3 connectivity​.</li>
<li>To disable CDP globally, the no cdp enable command in interface configuration mode must be used.</li>
<li>CDP can be disabled globally or on a specific interface</li>
<li>Because it runs at the data link layer, the CDP protocol can only be implemented in switches.</li>
<li>Answer -&gt; <span class="transparent">CDP can be disabled globally or on a specific interface</span></li>
</ul>
</li>
<li><p class="first">Why would a network administrator issue the show cdp neigbors command on a router?</p>
<ul class="simple">
<li>to display device ID and other information about directly connected Cisco devices</li>
<li>to display router ID and other information about OSPF neighbors</li>
<li>to display line status and other information about directly connected Cisco devices</li>
<li>to display routing table and other information about directly connected Cisco devices</li>
<li>Answer -&gt; <span class="transparent">to display device ID and other information about directly connected Cisco devices</span></li>
</ul>
</li>
<li><p class="first">Refer to the exhibit. Routers R1 and R2 are connected via a serial link. One router is configured as the NTP master, and the other is an NTP client. Which two pieces of information can be obtained from the partial output of the show ntp associations detail command on R2? (Choose two.)</p>
<ul class="simple">
<li>Both routers are configured to use NTPv2</li>
<li>Router R1 is the master, and R2 is the client</li>
<li>Router R2 is the master, and R1 is the client</li>
<li>The IP address of R1 is 192.168.1.2</li>
<li>The IP address of R2 is 192.168.1.2</li>
<li>Answer -&gt; <span class="transparent">Router R1 is the master, and R2 is the client &amp;&amp; The IP address of R1 is 192.168.1.2</span></li>
</ul>
</li>
<li><p class="first">Which two statements are true about NTP servers in an enterprise network? (Choose two)</p>
<ul class="simple">
<li>There can only be one NTP server on an enterprise network</li>
<li>All NTP servers synchronize directly to a stratum 1 time source</li>
<li>NTP servers at stratum 1 are directly connected to an authoritative time source</li>
<li>NTP servers ensure an accurate time stamp on logging and debugging information</li>
<li>NTP servers control the mean time between failures (MTBF) for key network devices</li>
<li>Answer -&gt; <span class="transparent">NTP servers at stratum 1 are directly connected to an authoritative time source &amp;&amp; NTP servers ensure an accurate time stamp on logging and debugging information</span></li>
</ul>
</li>
<li><p class="first">The command ntp server 10.1.1.1 is issued on a router. What impact does this command have?</p>
<ul class="simple">
<li>determines which server to send system log files to</li>
<li>identifies the server on which to store backup configurations</li>
<li>ensures that all logging will have a time stamp associated with it</li>
<li>synchronizes the system clock with the time source with IP address 10.1.1.1</li>
<li>Answer -&gt; <span class="transparent">synchronizes the system clock with the time source with IP address 10.1.1.1</span></li>
</ul>
</li>
<li><p class="first">Refer to the exhibit. Which two conclusions can be drawn from the syslog message that was generated by the router? (Choose two.)</p>
<div class="code highlight-default"><div class="highlight"><pre><span></span><span class="n">Mar</span> <span class="mi">31</span> <span class="mi">07</span><span class="p">:</span><span class="mi">23</span><span class="p">:</span><span class="mf">03.2323</span><span class="p">:</span> <span class="o">%</span><span class="n">LINEPROTO</span><span class="o">-</span><span class="mi">5</span><span class="o">-</span><span class="n">UPDOWN</span><span class="p">:</span> <span class="n">Line</span> <span class="n">protocol</span> <span class="n">on</span> <span class="n">Interface</span> <span class="n">Serial0</span><span class="o">/</span><span class="mi">0</span><span class="p">,</span> <span class="n">changed</span> <span class="n">state</span> <span class="n">to</span> <span class="n">up</span>
</pre></div>
</div>
<ul class="simple">
<li>This message resulted from an unusual error requiring reconfiguration of the interface.</li>
<li>This message indicates that the interface should be replaced.</li>
<li>This message is a level 5 notification message.</li>
<li>This message indicates that service timestamps have been configured.</li>
<li>This message indicates that the interface changed state five times.</li>
<li>Answer -&gt; <span class="transparent">This message is a level 5 notification message &amp;&amp; This message indicates that service timestamps have been configured</span></li>
</ul>
</li>
<li><p class="first">Which protocol or service allows network administrators to receive system messages that are provided by network devices?</p>
<ul class="simple">
<li>syslog</li>
<li>NTP</li>
<li>SNMP</li>
<li>NetFlow</li>
<li>Answer -&gt; <span class="transparent">syslog</span></li>
</ul>
</li>
<li><p class="first">Which syslog message type is accessible only to an administrator and only via the Cisco CLI?</p>
<ul class="simple">
<li>errors</li>
<li>debugging</li>
<li>emergency</li>
<li>alerts</li>
<li>Answer -&gt; <span class="transparent">debugging</span></li>
</ul>
</li>
<li><p class="first">Refer to the exhibit. From what location have the syslog messages been retrieved?</p>
<ul class="simple">
<li>syslog server</li>
<li>syslog client</li>
<li>router RAM</li>
<li>router NVRAM</li>
<li>Answer -&gt; <span class="transparent">router RAM</span></li>
</ul>
</li>
<li><p class="first">Refer to the exhibit. What does the number 17:46:26.143 represent?</p>
<ul class="simple">
<li>the time passed since the syslog server has been started</li>
<li>the time when the syslog message was issued</li>
<li>the time passed since the interfaces have been up</li>
<li>the time on the router when the show logging command was issued</li>
<li>Answer -&gt; <span class="transparent">the time when the syslog message was issued</span></li>
</ul>
</li>
<li><p class="first">What is used as the default event logging destination for Cisco routers and switches?</p>
<ul class="simple">
<li>terminal line</li>
<li>syslog server</li>
<li>console line</li>
<li>workstation</li>
<li>Answer -&gt; <span class="transparent">console line</span></li>
</ul>
</li>
<li><p class="first">A network administrator has issued the logging trap 4 global configuration mode command. What is the result of this command?</p>
<ul class="simple">
<li>After four events, the syslog client will send an event message to the syslog server</li>
<li>The syslog client will send to the syslog server any event message that has a severity level of 4 and higher</li>
<li>The syslog client will send to the syslog server any event message that has a severity level of 4 and lower</li>
<li>The syslog client will send to the syslog server event messages with an identification trap level of only 4</li>
<li>Answer -&gt; <span class="transparent">The syslog client will send to the syslog server any event message that has a severity level of 4 and lower</span></li>
</ul>
</li>
<li><p class="first">What is the major release number in the IOS image name c1900-universalk9-mz.SPA.152-3.T.bin?</p>
<ul class="simple">
<li>2</li>
<li>3</li>
<li>15</li>
<li>52</li>
<li>1900</li>
<li>Answer -&gt; <span class="transparent">15</span></li>
</ul>
</li>
<li><p class="first">What statement describes a Cisco IOS image with the “universalk9_npe” designation for Cisco ISR G2 routers?</p>
<ul class="simple">
<li>It is an IOS version that can only be used in the United States of America</li>
<li>It is an IOS version that provides only the IPBase feature set</li>
<li>It is an IOS version that offers all of the Cisco IOS Software feature sets</li>
<li>It is an IOS version that, at the request of some countries, removes any strong cryptographic functionality</li>
<li>Answer -&gt; <span class="transparent">It is an IOS version that, at the request of some countries, removes any strong cryptographic functionality</span></li>
</ul>
</li>
<li><p class="first">What code in the Cisco IOS 15 image filename c1900-universalk9-mz.SPA.153-3.M.bin indicates that the file is digitally signed by Cisco?</p>
<ul class="simple">
<li>SPA</li>
<li>universalk9</li>
<li>M</li>
<li>mz</li>
<li>Answer -&gt; <span class="transparent">SPA</span></li>
</ul>
</li>
<li><p class="first">Which two conditions should the network administrator verify before attempting to upgrade a Cisco IOS image using a TFTP server? (Choose two.)</p>
<ul class="simple">
<li>Verify the name of the TFTP server using the show hosts command</li>
<li>Verify that the TFTP server is running using the tftpdnld command</li>
<li>Verify that the checksum for the image is valid using the show version command</li>
<li>Verify connectivity between the router and TFTP server using the ping command</li>
<li>Verify that there is enough flash memory for the new Cisco IOS image using the show flash command</li>
<li>Answer -&gt; <span class="transparent">Verify connectivity between the router and TFTP server using the ping command &amp;&amp; Verify that there is enough flash memory for the new Cisco IOS image using the show flash command</span></li>
</ul>
</li>
<li><p class="first">A network administrator configures a router with the command sequence:</p>
<div class="code highlight-default"><div class="highlight"><pre><span></span><span class="n">R1</span><span class="p">(</span><span class="n">config</span><span class="p">)</span><span class="c1"># boot system tftp://c1900-universalk9-mz.SPA.152-4.M3.bin</span>
<span class="n">R1</span><span class="p">(</span><span class="n">config</span><span class="p">)</span><span class="c1"># boot system rom</span>
</pre></div>
</div>
<p>What is the effect of the command sequence?</p>
<ul class="simple">
<li>On next reboot, the router will load the IOS image from ROM</li>
<li>The router will copy the IOS image from the TFTP server and then reboot the system</li>
<li>The router will load IOS from the TFTP server. If the image fails to load, it will load the IOS image from ROM</li>
<li>The router will search and load a valid IOS image in the sequence of flash, TFTP, and ROM</li>
<li>Answer -&gt; <span class="transparent">The router will load IOS from the TFTP server. If the image fails to load, it will load the IOS image from ROM</span></li>
</ul>
</li>
<li><p class="first">A network engineer is upgrading the Cisco IOS image on a 2900 series ISR. What command could the engineer use to verify the total amount of flash memory as well as how much flash memory is currently available?</p>
<ul class="simple">
<li>show flash0:</li>
<li>show version</li>
<li>show interfaces</li>
<li>show startup-config</li>
<li>Answer -&gt; <span class="transparent">show flash0:</span></li>
</ul>
</li>
<li><p class="first">Beginning with the Cisco IOS Software Release 15.0, which license is a prerequisite for installing additional technology pack licenses?</p>
<ul class="simple">
<li>IPBase</li>
<li>DATA</li>
<li>UC</li>
<li>SEC</li>
<li>Answer -&gt; <span class="transparent">IPBase</span></li>
</ul>
</li>
<li><p class="first">Which three software packages are available for Cisco IOS Release 15.0?</p>
<ul class="simple">
<li>DATA</li>
<li>IPVoice</li>
<li>Security</li>
<li>Enterprise Services</li>
<li>Unified Communications</li>
<li>Advanced IP Services</li>
<li>Answer -&gt; <span class="transparent">DATA - Security - Unified Communications</span></li>
</ul>
</li>
<li><p class="first">When a customer purchases a Cisco IOS 15.0 software package, what serves as the receipt for that customer and is used to obtain the license as well?</p>
<ul class="simple">
<li>Software Claim Certificate</li>
<li>End User License Agreement</li>
<li>Unique Device Identifier</li>
<li>Product Activation Key</li>
<li>Answer -&gt; <span class="transparent">Product Activation Key</span></li>
</ul>
</li>
<li><p class="first">In addition to IPBase, what are the three technology packs that are shipped within the universal Cisco IOS Software Release 15 image? (Choose three.)</p>
<ul class="simple">
<li>Advanced IP Services</li>
<li>Advanced Enterprise Services</li>
<li>DATA</li>
<li>Security</li>
<li>SP Services</li>
<li>Unified Communications</li>
<li>Answer -&gt; <span class="transparent">DATA - Security - Unified Communications</span></li>
</ul>
</li>
<li><p class="first">Which command would a network engineer use to find the unique device identifier of a Cisco router?</p>
<ul class="simple">
<li>show version</li>
<li>show license udi</li>
<li>show running-configuration</li>
<li>license install stored-location-url</li>
<li>Answer -&gt; <span class="transparent">show license udi</span></li>
</ul>
</li>
<li><p class="first">Which command is used to configure a one-time acceptance of the EULA for all Cisco IOS software packages and features?</p>
<ul class="simple">
<li>license save</li>
<li>show license</li>
<li>license boot module module-name</li>
<li>license accept end user agreement</li>
<li>Answer -&gt; <span class="transparent">license accept end user agreement</span></li>
</ul>
</li>
<li><p class="first">Refer to the exhibit. Match the components of the IOS image name to their description. (Not all options are used)</p>
<table border="1" class="docutils">
<colgroup>
<col width="20%" />
<col width="80%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">part</th>
<th class="head">description choice</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>mz</td>
<td>specifying the feature set</td>
</tr>
<tr class="row-odd"><td>15</td>
<td>minor release number</td>
</tr>
<tr class="row-even"><td>bin</td>
<td>where the image runs and if the file is compressed</td>
</tr>
<tr class="row-odd"><td>universalk9</td>
<td>platform on which the image runs</td>
</tr>
<tr class="row-even"><td>1</td>
<td>authentication type</td>
</tr>
<tr class="row-odd"><td>4</td>
<td>maintenance release and rebuild number</td>
</tr>
<tr class="row-even"><td>M4</td>
<td>new feature release number</td>
</tr>
<tr class="row-odd"><td>&#160;</td>
<td>file extension</td>
</tr>
<tr class="row-even"><td>&#160;</td>
<td>major release number</td>
</tr>
</tbody>
</table>
<blockquote>
<div><p>Answer</p>
</div></blockquote>
<table border="1" class="docutils">
<colgroup>
<col width="20%" />
<col width="80%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">part</th>
<th class="head">correct description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>universalk9</td>
<td>specifying the feature set</td>
</tr>
<tr class="row-odd"><td>1</td>
<td>minor release number</td>
</tr>
<tr class="row-even"><td>mz</td>
<td>where the image runs and if the file is compressed</td>
</tr>
<tr class="row-odd"><td>c1900</td>
<td>platform on which the image runs</td>
</tr>
<tr class="row-even"><td>&#160;</td>
<td>authentication type</td>
</tr>
<tr class="row-odd"><td>M4</td>
<td>maintenance release and rebuild number</td>
</tr>
<tr class="row-even"><td>4</td>
<td>new feature release number</td>
</tr>
<tr class="row-odd"><td>bin</td>
<td>file extension</td>
</tr>
<tr class="row-even"><td>15</td>
<td>major release number</td>
</tr>
</tbody>
</table>
</li>
<li><p class="first">A ping fails when performed from router R1 to directly connected router R2. The network administrator then proceeds to issue the show cdp neighbors command. Why would the network administrator issue this command if the ping failed between the two routers?</p>
<ul class="simple">
<li>The network administrator wants to venfy the IP address configured on router R2</li>
<li>The network administrator suspects a virus because the ping command did not work</li>
<li>The network administrator wants to verify Layer 2 connectivity</li>
<li>The network administrator wants to determine if connectivity can be established from a non-directly connected network</li>
<li>Answer <span class="transparent">The network administrator wants to verify Layer 2 connectivity</span></li>
</ul>
</li>
</ol>
</div>
</div>


           </div>
           <div class="articleComments">
            
           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../../../vim.html" class="btn btn-neutral float-right" title="VIM" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="nat.html" class="btn btn-neutral" title="NAT" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2017, Patrick Brunswyck.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../../../',
            VERSION:'20170824',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="../../../_static/jquery.js"></script>
      <script type="text/javascript" src="../../../_static/underscore.js"></script>
      <script type="text/javascript" src="../../../_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="../../../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>